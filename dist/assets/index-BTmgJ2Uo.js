(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cg={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function FR(){if(FE)return Ve;FE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,z={};function U(V,te,ce){this.props=V,this.context=te,this.refs=z,this.updater=ce||D}U.prototype.isReactComponent={},U.prototype.setState=function(V,te){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,te,"setState")},U.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Y(){}Y.prototype=U.prototype;function J(V,te,ce){this.props=V,this.context=te,this.refs=z,this.updater=ce||D}var K=J.prototype=new Y;K.constructor=J,M(K,U.prototype),K.isPureReactComponent=!0;var ue=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},pe=Object.prototype.hasOwnProperty;function I(V,te,ce,le,be,Ie){return ce=Ie.ref,{$$typeof:r,type:V,key:te,ref:ce!==void 0?ce:null,props:Ie}}function S(V,te){return I(V.type,te,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function O(V){var te={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ce){return te[ce]})}var P=/\/+/g;function k(V,te){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):te.toString(36)}function C(){}function ze(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(C,C):(V.status="pending",V.then(function(te){V.status==="pending"&&(V.status="fulfilled",V.value=te)},function(te){V.status==="pending"&&(V.status="rejected",V.reason=te)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function xe(V,te,ce,le,be){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var Ae=!1;if(V===null)Ae=!0;else switch(Ie){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(V.$$typeof){case r:case e:Ae=!0;break;case y:return Ae=V._init,xe(Ae(V._payload),te,ce,le,be)}}if(Ae)return be=be(V),Ae=le===""?"."+k(V,0):le,ue(be)?(ce="",Ae!=null&&(ce=Ae.replace(P,"$&/")+"/"),xe(be,te,ce,"",function(Hn){return Hn})):be!=null&&(R(be)&&(be=S(be,ce+(be.key==null||V&&V.key===be.key?"":(""+be.key).replace(P,"$&/")+"/")+Ae)),te.push(be)),1;Ae=0;var Mt=le===""?".":le+":";if(ue(V))for(var tt=0;tt<V.length;tt++)le=V[tt],Ie=Mt+k(le,tt),Ae+=xe(le,te,ce,Ie,be);else if(tt=b(V),typeof tt=="function")for(V=tt.call(V),tt=0;!(le=V.next()).done;)le=le.value,Ie=Mt+k(le,tt++),Ae+=xe(le,te,ce,Ie,be);else if(Ie==="object"){if(typeof V.then=="function")return xe(ze(V),te,ce,le,be);throw te=String(V),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function X(V,te,ce){if(V==null)return V;var le=[],be=0;return xe(V,le,"","",function(Ie){return te.call(ce,Ie,be++)}),le}function re(V){if(V._status===-1){var te=V._result;te=te(),te.then(function(ce){(V._status===0||V._status===-1)&&(V._status=1,V._result=ce)},function(ce){(V._status===0||V._status===-1)&&(V._status=2,V._result=ce)}),V._status===-1&&(V._status=0,V._result=te)}if(V._status===1)return V._result.default;throw V._result}var fe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ve(){}return Ve.Children={map:X,forEach:function(V,te,ce){X(V,function(){te.apply(this,arguments)},ce)},count:function(V){var te=0;return X(V,function(){te++}),te},toArray:function(V){return X(V,function(te){return te})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ve.Component=U,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=J,Ve.StrictMode=i,Ve.Suspense=m,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(V){return oe.H.useMemoCache(V)}},Ve.cache=function(V){return function(){return V.apply(null,arguments)}},Ve.cloneElement=function(V,te,ce){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=M({},V.props),be=V.key,Ie=void 0;if(te!=null)for(Ae in te.ref!==void 0&&(Ie=void 0),te.key!==void 0&&(be=""+te.key),te)!pe.call(te,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&te.ref===void 0||(le[Ae]=te[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=ce;else if(1<Ae){for(var Mt=Array(Ae),tt=0;tt<Ae;tt++)Mt[tt]=arguments[tt+2];le.children=Mt}return I(V.type,be,void 0,void 0,Ie,le)},Ve.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ve.createElement=function(V,te,ce){var le,be={},Ie=null;if(te!=null)for(le in te.key!==void 0&&(Ie=""+te.key),te)pe.call(te,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(be[le]=te[le]);var Ae=arguments.length-2;if(Ae===1)be.children=ce;else if(1<Ae){for(var Mt=Array(Ae),tt=0;tt<Ae;tt++)Mt[tt]=arguments[tt+2];be.children=Mt}if(V&&V.defaultProps)for(le in Ae=V.defaultProps,Ae)be[le]===void 0&&(be[le]=Ae[le]);return I(V,Ie,void 0,void 0,null,be)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(V){return{$$typeof:d,render:V}},Ve.isValidElement=R,Ve.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:re}},Ve.memo=function(V,te){return{$$typeof:p,type:V,compare:te===void 0?null:te}},Ve.startTransition=function(V){var te=oe.T,ce={};oe.T=ce;try{var le=V(),be=oe.S;be!==null&&be(ce,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ve,fe)}catch(Ie){fe(Ie)}finally{oe.T=te}},Ve.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},Ve.use=function(V){return oe.H.use(V)},Ve.useActionState=function(V,te,ce){return oe.H.useActionState(V,te,ce)},Ve.useCallback=function(V,te){return oe.H.useCallback(V,te)},Ve.useContext=function(V){return oe.H.useContext(V)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(V,te){return oe.H.useDeferredValue(V,te)},Ve.useEffect=function(V,te,ce){var le=oe.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,te)},Ve.useId=function(){return oe.H.useId()},Ve.useImperativeHandle=function(V,te,ce){return oe.H.useImperativeHandle(V,te,ce)},Ve.useInsertionEffect=function(V,te){return oe.H.useInsertionEffect(V,te)},Ve.useLayoutEffect=function(V,te){return oe.H.useLayoutEffect(V,te)},Ve.useMemo=function(V,te){return oe.H.useMemo(V,te)},Ve.useOptimistic=function(V,te){return oe.H.useOptimistic(V,te)},Ve.useReducer=function(V,te,ce){return oe.H.useReducer(V,te,ce)},Ve.useRef=function(V){return oe.H.useRef(V)},Ve.useState=function(V){return oe.H.useState(V)},Ve.useSyncExternalStore=function(V,te,ce){return oe.H.useSyncExternalStore(V,te,ce)},Ve.useTransition=function(){return oe.H.useTransition()},Ve.version="19.1.0",Ve}var jE;function up(){return jE||(jE=1,cg.exports=FR()),cg.exports}var q=up();const x=BT(q);var hg={exports:{}},Ru={},fg={exports:{}},dg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function jR(){return HE||(HE=1,function(r){function e(X,re){var fe=X.length;X.push(re);e:for(;0<fe;){var ve=fe-1>>>1,V=X[ve];if(0<a(V,re))X[ve]=re,X[fe]=V,fe=ve;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var re=X[0],fe=X.pop();if(fe!==re){X[0]=fe;e:for(var ve=0,V=X.length,te=V>>>1;ve<te;){var ce=2*(ve+1)-1,le=X[ce],be=ce+1,Ie=X[be];if(0>a(le,fe))be<V&&0>a(Ie,le)?(X[ve]=Ie,X[be]=fe,ve=be):(X[ve]=le,X[ce]=fe,ve=ce);else if(be<V&&0>a(Ie,fe))X[ve]=Ie,X[be]=fe,ve=be;else break e}}return re}function a(X,re){var fe=X.sortIndex-re.sortIndex;return fe!==0?fe:X.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var m=[],p=[],y=1,T=null,b=3,D=!1,M=!1,z=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ue(X){for(var re=t(p);re!==null;){if(re.callback===null)i(p);else if(re.startTime<=X)i(p),re.sortIndex=re.expirationTime,e(m,re);else break;re=t(p)}}function oe(X){if(z=!1,ue(X),!M)if(t(m)!==null)M=!0,pe||(pe=!0,k());else{var re=t(p);re!==null&&xe(oe,re.startTime-X)}}var pe=!1,I=-1,S=5,R=-1;function O(){return U?!0:!(r.unstable_now()-R<S)}function P(){if(U=!1,pe){var X=r.unstable_now();R=X;var re=!0;try{e:{M=!1,z&&(z=!1,J(I),I=-1),D=!0;var fe=b;try{t:{for(ue(X),T=t(m);T!==null&&!(T.expirationTime>X&&O());){var ve=T.callback;if(typeof ve=="function"){T.callback=null,b=T.priorityLevel;var V=ve(T.expirationTime<=X);if(X=r.unstable_now(),typeof V=="function"){T.callback=V,ue(X),re=!0;break t}T===t(m)&&i(m),ue(X)}else i(m);T=t(m)}if(T!==null)re=!0;else{var te=t(p);te!==null&&xe(oe,te.startTime-X),re=!1}}break e}finally{T=null,b=fe,D=!1}re=void 0}}finally{re?k():pe=!1}}}var k;if(typeof K=="function")k=function(){K(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ze=C.port2;C.port1.onmessage=P,k=function(){ze.postMessage(null)}}else k=function(){Y(P,0)};function xe(X,re){I=Y(function(){X(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(X){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var fe=b;b=re;try{return X()}finally{b=fe}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var fe=b;b=X;try{return re()}finally{b=fe}},r.unstable_scheduleCallback=function(X,re,fe){var ve=r.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ve+fe:ve):fe=ve,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=fe+V,X={id:y++,callback:re,priorityLevel:X,startTime:fe,expirationTime:V,sortIndex:-1},fe>ve?(X.sortIndex=fe,e(p,X),t(m)===null&&X===t(p)&&(z?(J(I),I=-1):z=!0,xe(oe,fe-ve))):(X.sortIndex=V,e(m,X),M||D||(M=!0,pe||(pe=!0,k()))),X},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(X){var re=b;return function(){var fe=b;b=re;try{return X.apply(this,arguments)}finally{b=fe}}}}(dg)),dg}var GE;function HR(){return GE||(GE=1,fg.exports=jR()),fg.exports}var mg={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function GR(){if(KE)return un;KE=1;var r=up();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:y}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,un.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},un.flushSync=function(m){var p=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=y,i.d.f()}},un.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},un.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},un.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,D=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:D}):y==="script"&&i.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:D,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},un.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},un.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,T=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},un.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},un.requestFormReset=function(m){i.d.r(m)},un.unstable_batchedUpdates=function(m,p){return m(p)},un.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.1.0",un}var QE;function KR(){if(QE)return mg.exports;QE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),mg.exports=GR(),mg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function QR(){if($E)return Ru;$E=1;var r=HR(),e=up(),t=KR();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,w=f.child;w;){if(w===o){E=!0,o=f,u=g;break}if(w===u){E=!0,u=f,o=g;break}w=w.sibling}if(!E){for(w=g.child;w;){if(w===o){E=!0,o=g,u=f;break}if(w===u){E=!0,u=g,o=f;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),J=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function ze(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case U:return"Profiler";case z:return"StrictMode";case oe:return"Suspense";case pe:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case K:return(n.displayName||"Context")+".Provider";case J:return(n._context.displayName||"Context")+".Consumer";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return s=n.displayName||null,s!==null?s:ze(n.type)||"Memo";case S:s=n._payload,n=n._init;try{return ze(n(s))}catch{}}return null}var xe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},ve=[],V=-1;function te(n){return{current:n}}function ce(n){0>V||(n.current=ve[V],ve[V]=null,V--)}function le(n,s){V++,ve[V]=n.current,n.current=s}var be=te(null),Ie=te(null),Ae=te(null),Mt=te(null);function tt(n,s){switch(le(Ae,s),le(Ie,n),le(be,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?pE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=pE(s),n=_E(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ce(be),le(be,n)}function Hn(){ce(be),ce(Ie),ce(Ae)}function vr(n){n.memoizedState!==null&&le(Mt,n);var s=be.current,o=_E(s,n.type);s!==o&&(le(Ie,n),le(be,o))}function ur(n){Ie.current===n&&(ce(be),ce(Ie)),Mt.current===n&&(ce(Mt),Tu._currentValue=fe)}var Gr=Object.prototype.hasOwnProperty,Kr=r.unstable_scheduleCallback,Qr=r.unstable_cancelCallback,Vs=r.unstable_shouldYield,qa=r.unstable_requestPaint,mn=r.unstable_now,Fa=r.unstable_getCurrentPriorityLevel,Ne=r.unstable_ImmediatePriority,Pe=r.unstable_UserBlockingPriority,Ye=r.unstable_NormalPriority,gn=r.unstable_LowPriority,Gn=r.unstable_IdlePriority,$r=r.log,Rc=r.unstable_setDisableYieldValue,wt=null,We=null;function On(n){if(typeof $r=="function"&&Rc(n),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(wt,n)}catch{}}var on=Math.clz32?Math.clz32:Ms,Ic=Math.log,fd=Math.LN2;function Ms(n){return n>>>=0,n===0?32:31-(Ic(n)/fd|0)|0}var Os=256,Ps=4194304;function cr(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ja(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?f=cr(u):(E&=w,E!==0?f=cr(E):o||(o=w&~n,o!==0&&(f=cr(o))))):(w=u&~g,w!==0?f=cr(w):E!==0?f=cr(E):o||(o=u&~n,o!==0&&(f=cr(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function ks(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Tl(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bl(){var n=Os;return Os<<=1,(Os&4194048)===0&&(Os=256),n}function wl(){var n=Ps;return Ps<<=1,(Ps&62914560)===0&&(Ps=4194304),n}function Yr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Xr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sl(n,s,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,N=n.expirationTimes,H=n.hiddenUpdates;for(o=E&~o;0<o;){var ee=31-on(o),ie=1<<ee;w[ee]=0,N[ee]=-1;var Q=H[ee];if(Q!==null)for(H[ee]=null,ee=0;ee<Q.length;ee++){var $=Q[ee];$!==null&&($.lane&=-536870913)}o&=~ie}u!==0&&Er(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~s))}function Er(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-on(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function Al(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-on(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function Mi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ha(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Oi(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:kE(n.type))}function xc(n,s){var o=re.p;try{return re.p=n,s()}finally{re.p=o}}var dt=Math.random().toString(36).slice(2),Bt="__reactFiber$"+dt,Ot="__reactProps$"+dt,Kn="__reactContainer$"+dt,Rl="__reactEvents$"+dt,dd="__reactListeners$"+dt,Pi="__reactHandles$"+dt,Cc="__reactResources$"+dt,Ls="__reactMarker$"+dt;function ki(n){delete n[Bt],delete n[Ot],delete n[Rl],delete n[dd],delete n[Pi]}function Wr(n){var s=n[Bt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Kn]||o[Bt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=TE(n);n!==null;){if(o=n[Bt])return o;n=TE(n)}return s}n=o,o=n.parentNode}return null}function Tr(n){if(n=n[Bt]||n[Kn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function br(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function pn(n){var s=n[Cc];return s||(s=n[Cc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function It(n){n[Ls]=!0}var Il=new Set,Ga={};function hr(n,s){Zr(n,s),Zr(n+"Capture",s)}function Zr(n,s){for(Ga[n]=s,n=0;n<s.length;n++)Il.add(s[n])}var Dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nc={},Us={};function Vc(n){return Gr.call(Us,n)?!0:Gr.call(Nc,n)?!1:Dc.test(n)?Us[n]=!0:(Nc[n]=!0,!1)}function Li(n,s,o){if(Vc(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function wr(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Zt(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Bs,Mc;function Jr(n){if(Bs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Bs=s&&s[1]||"",Mc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bs+n+Mc}var Ka=!1;function Qa(n,s){if(!n||Ka)return"";Ka=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch($){var Q=$}Reflect.construct(n,[],ie)}else{try{ie.call()}catch($){Q=$}n.call(ie.prototype)}}else{try{throw Error()}catch($){Q=$}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch($){if($&&Q&&typeof $.stack=="string")return[$.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],w=g[1];if(E&&w){var N=E.split(`
`),H=w.split(`
`);for(f=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===N.length||f===H.length)for(u=N.length-1,f=H.length-1;1<=u&&0<=f&&N[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(N[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||N[u]!==H[f]){var ee=`
`+N[u].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=u&&0<=f);break}}}finally{Ka=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Jr(o):""}function xl(n){switch(n.tag){case 26:case 27:case 5:return Jr(n.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 15:return Qa(n.type,!1);case 11:return Qa(n.type.render,!1);case 1:return Qa(n.type,!0);case 31:return Jr("Activity");default:return""}}function $a(n){try{var s="";do s+=xl(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cl(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function md(n){var s=Cl(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ya(n){n._valueTracker||(n._valueTracker=md(n))}function Dl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Cl(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function zs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var gd=/[\n"\\]/g;function Pt(n){return n.replace(gd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pn(n,s,o,u,f,g,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+_n(s)):n.value!==""+_n(s)&&(n.value=""+_n(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Ui(n,E,_n(s)):o!=null?Ui(n,E,_n(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+_n(w):n.removeAttribute("name")}function qs(n,s,o,u,f,g,E,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+_n(o):"",s=s!=null?""+_n(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ui(n,s,o){s==="number"&&zs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ei(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+_n(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function nt(n,s,o){if(s!=null&&(s=""+_n(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+_n(o):""}function Fs(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(xe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=_n(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Qn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oc(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||js.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Nl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Oc(n,f,u)}else for(var g in s)s.hasOwnProperty(g)&&Oc(n,g,s[g])}function Vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(n){return _d.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ti=null;function $n(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ni=null,ri=null;function Ml(n){var s=Tr(n);if(s&&(n=s.stateNode)){var o=n[Ot]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Ot]||null;if(!f)throw Error(i(90));Pn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Dl(u)}break e;case"textarea":nt(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ei(n,!!o.multiple,s,!1)}}}var Sr=!1;function Pc(n,s,o){if(Sr)return n(s,o);Sr=!0;try{var u=n(s);return u}finally{if(Sr=!1,(ni!==null||ri!==null)&&(xh(),ni&&(s=ni,n=ri,ri=ni=null,Ml(s),n)))for(s=0;s<n.length;s++)Ml(n[s])}}function Hs(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ot]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(fr)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Yn=!1}var Ar=null,Bi=null,ii=null;function Ol(){if(ii)return ii;var n,s=Bi,o=s.length,u,f="value"in Ar?Ar.value:Ar.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&s[o-u]===f[g-u];u++);return ii=f.slice(n,1<u?1-u:void 0)}function Rr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ir(){return!0}function Pl(){return!1}function Gt(n){function s(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ir:Pl,this.isPropagationStopped=Pl,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),s}var Xe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=Gt(Xe),Ks=y({},Xe,{view:0,detail:0}),kc=Gt(Ks),Za,Ja,xr,Qs=y({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xr&&(xr&&n.type==="mousemove"?(Za=n.screenX-xr.screenX,Ja=n.screenY-xr.screenY):Ja=Za=0,xr=n),Za)},movementY:function(n){return"movementY"in n?n.movementY:Ja}}),Xn=Gt(Qs),Lc=y({},Qs,{dataTransfer:0}),yd=Gt(Lc),$s=y({},Ks,{relatedTarget:0}),eo=Gt($s),kl=y({},Xe,{animationName:0,elapsedTime:0,pseudoElement:0}),to=Gt(kl),Uc=y({},Xe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),no=Gt(Uc),vd=y({},Xe,{data:0}),Ll=Gt(vd),Ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ul(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=zc[n])?!!s[n]:!1}function Xs(){return Ul}var qc=y({},Ks,{key:function(n){if(n.key){var s=Ys[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Rr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xs,charCode:function(n){return n.type==="keypress"?Rr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ro=Gt(qc),Fc=y({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bl=Gt(Fc),si=y({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xs}),jc=Gt(si),Hc=y({},Xe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gc=Gt(Hc),Kc=y({},Qs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),io=Gt(Kc),yn=y({},Xe,{newState:0,oldState:0}),Qc=Gt(yn),$c=[9,13,27,32],Cr=fr&&"CompositionEvent"in window,h=null;fr&&"documentMode"in document&&(h=document.documentMode);var _=fr&&"TextEvent"in window&&!h,v=fr&&(!Cr||h&&8<h&&11>=h),A=" ",F=!1;function Z(n,s){switch(n){case"keyup":return $c.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function zt(n,s){switch(n){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(F=!0,A);case"textInput":return n=s.data,n===A&&F?null:n;default:return null}}function je(n,s){if(Fe)return n==="compositionend"||!Cr&&Z(n,s)?(n=Ol(),ii=Bi=Ar=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qt(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Kt[n.type]:s==="textarea"}function ai(n,s,o,u){ni?ri?ri.push(u):ri=[u]:ni=u,s=Oh(s,"onChange"),0<s.length&&(o=new Wa("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Jt=null,Dr=null;function zl(n){hE(n,0)}function Yc(n){var s=br(n);if(Dl(s))return n}function V_(n,s){if(n==="change")return s}var M_=!1;if(fr){var Ed;if(fr){var Td="oninput"in document;if(!Td){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),Td=typeof O_.oninput=="function"}Ed=Td}else Ed=!1;M_=Ed&&(!document.documentMode||9<document.documentMode)}function P_(){Jt&&(Jt.detachEvent("onpropertychange",k_),Dr=Jt=null)}function k_(n){if(n.propertyName==="value"&&Yc(Dr)){var s=[];ai(s,Dr,n,$n(n)),Pc(zl,s)}}function yA(n,s,o){n==="focusin"?(P_(),Jt=s,Dr=o,Jt.attachEvent("onpropertychange",k_)):n==="focusout"&&P_()}function vA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yc(Dr)}function EA(n,s){if(n==="click")return Yc(s)}function TA(n,s){if(n==="input"||n==="change")return Yc(s)}function bA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var kn=typeof Object.is=="function"?Object.is:bA;function ql(n,s){if(kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Gr.call(s,f)||!kn(n[f],s[f]))return!1}return!0}function L_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function U_(n,s){var o=L_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=L_(o)}}function B_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?B_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function z_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=zs(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=zs(n.document)}return s}function bd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var wA=fr&&"documentMode"in document&&11>=document.documentMode,so=null,wd=null,Fl=null,Sd=!1;function q_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Sd||so==null||so!==zs(u)||(u=so,"selectionStart"in u&&bd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Fl&&ql(Fl,u)||(Fl=u,u=Oh(wd,"onSelect"),0<u.length&&(s=new Wa("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=so)))}function Ws(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ao={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Ad={},F_={};fr&&(F_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Zs(n){if(Ad[n])return Ad[n];if(!ao[n])return n;var s=ao[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in F_)return Ad[n]=s[o];return n}var j_=Zs("animationend"),H_=Zs("animationiteration"),G_=Zs("animationstart"),SA=Zs("transitionrun"),AA=Zs("transitionstart"),RA=Zs("transitioncancel"),K_=Zs("transitionend"),Q_=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function dr(n,s){Q_.set(n,s),hr(s,[n])}var $_=new WeakMap;function Wn(n,s){if(typeof n=="object"&&n!==null){var o=$_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:$a(s)},$_.set(n,s),s)}return{value:n,source:s,stack:$a(s)}}var Zn=[],oo=0,Id=0;function Xc(){for(var n=oo,s=Id=oo=0;s<n;){var o=Zn[s];Zn[s++]=null;var u=Zn[s];Zn[s++]=null;var f=Zn[s];Zn[s++]=null;var g=Zn[s];if(Zn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&Y_(o,f,g)}}function Wc(n,s,o,u){Zn[oo++]=n,Zn[oo++]=s,Zn[oo++]=o,Zn[oo++]=u,Id|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function xd(n,s,o,u){return Wc(n,s,o,u),Zc(n)}function lo(n,s){return Wc(n,null,null,s),Zc(n)}function Y_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-on(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),g):null}function Zc(n){if(50<du)throw du=0,Om=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var uo={};function IA(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(n,s,o,u){return new IA(n,s,o,u)}function Cd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oi(n,s){var o=n.alternate;return o===null?(o=Ln(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function X_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Jc(n,s,o,u,f,g){var E=0;if(u=n,typeof n=="function")Cd(n)&&(E=1);else if(typeof n=="string")E=CR(n,o,be.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Ln(31,o,s,f),n.elementType=R,n.lanes=g,n;case M:return Js(o.children,f,g,s);case z:E=8,f|=24;break;case U:return n=Ln(12,o,s,f|2),n.elementType=U,n.lanes=g,n;case oe:return n=Ln(13,o,s,f),n.elementType=oe,n.lanes=g,n;case pe:return n=Ln(19,o,s,f),n.elementType=pe,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:case K:E=10;break e;case J:E=9;break e;case ue:E=11;break e;case I:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Ln(E,o,s,f),s.elementType=n,s.type=u,s.lanes=g,s}function Js(n,s,o,u){return n=Ln(7,n,u,s),n.lanes=o,n}function Dd(n,s,o){return n=Ln(6,n,null,s),n.lanes=o,n}function Nd(n,s,o){return s=Ln(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var co=[],ho=0,eh=null,th=0,Jn=[],er=0,ea=null,li=1,ui="";function ta(n,s){co[ho++]=th,co[ho++]=eh,eh=n,th=s}function W_(n,s,o){Jn[er++]=li,Jn[er++]=ui,Jn[er++]=ea,ea=n;var u=li;n=ui;var f=32-on(u)-1;u&=~(1<<f),o+=1;var g=32-on(s)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,li=1<<32-on(s)+f|o<<f|u,ui=g+n}else li=1<<g|o<<f|u,ui=n}function Vd(n){n.return!==null&&(ta(n,1),W_(n,1,0))}function Md(n){for(;n===eh;)eh=co[--ho],co[ho]=null,th=co[--ho],co[ho]=null;for(;n===ea;)ea=Jn[--er],Jn[er]=null,ui=Jn[--er],Jn[er]=null,li=Jn[--er],Jn[er]=null}var vn=null,St=null,$e=!1,na=null,Nr=!1,Od=Error(i(519));function ra(n){var s=Error(i(418,""));throw Gl(Wn(s,n)),Od}function Z_(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Bt]=n,s[Ot]=u,o){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(o=0;o<gu.length;o++)Le(gu[o],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),qs(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ya(s);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Fs(s,u.value,u.defaultValue,u.children),Ya(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||gE(s.textContent,o)?(u.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),u.onScroll!=null&&Le("scroll",s),u.onScrollEnd!=null&&Le("scrollend",s),u.onClick!=null&&(s.onclick=Ph),s=!0):s=!1,s||ra(n)}function J_(n){for(vn=n.return;vn;)switch(vn.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:vn=vn.return}}function jl(n){if(n!==vn)return!1;if(!$e)return J_(n),$e=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Xm(n.type,n.memoizedProps)),o=!o),o&&St&&ra(n),J_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){St=gr(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}St=null}}else s===27?(s=St,ts(n.type)?(n=eg,eg=null,St=n):St=s):St=vn?gr(n.stateNode.nextSibling):null;return!0}function Hl(){St=vn=null,$e=!1}function ey(){var n=na;return n!==null&&(Cn===null?Cn=n:Cn.push.apply(Cn,n),na=null),n}function Gl(n){na===null?na=[n]:na.push(n)}var Pd=te(null),ia=null,ci=null;function zi(n,s,o){le(Pd,s._currentValue),s._currentValue=o}function hi(n){n._currentValue=Pd.current,ce(Pd)}function kd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Ld(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=f;for(var N=0;N<s.length;N++)if(w.context===s[N]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),kd(g.return,o,n),u||(E=null);break e}g=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),kd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Kl(n,s,o,u){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=f.type;kn(f.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(f===Mt.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Tu):n=[Tu])}f=f.return}n!==null&&Ld(s,n,o,u),s.flags|=262144}function nh(n){for(n=n.firstContext;n!==null;){if(!kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function sa(n){ia=n,ci=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return ty(ia,n)}function rh(n,s){return ia===null&&sa(n),ty(n,s)}function ty(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ci===null){if(n===null)throw Error(i(308));ci=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ci=ci.next=s;return o}var xA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},CA=r.unstable_scheduleCallback,DA=r.unstable_NormalPriority,Ft={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new xA,data:new Map,refCount:0}}function Ql(n){n.refCount--,n.refCount===0&&CA(DA,function(){n.controller.abort()})}var $l=null,Bd=0,fo=0,mo=null;function NA(n,s){if($l===null){var o=$l=[];Bd=0,fo=qm(),mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Bd++,s.then(ny,ny),s}function ny(){if(--Bd===0&&$l!==null){mo!==null&&(mo.status="fulfilled");var n=$l;$l=null,fo=0,mo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function VA(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var ry=X.S;X.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&NA(n,s),ry!==null&&ry(n,s)};var aa=te(null);function zd(){var n=aa.current;return n!==null?n:ut.pooledCache}function ih(n,s){s===null?le(aa,aa.current):le(aa,s.pool)}function iy(){var n=zd();return n===null?null:{parent:Ft._currentValue,pool:n}}var Yl=Error(i(460)),sy=Error(i(474)),sh=Error(i(542)),qd={then:function(){}};function ay(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ah(){}function oy(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ah,ah),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,uy(n),n;default:if(typeof s.status=="string")s.then(ah,ah);else{if(n=ut,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,uy(n),n}throw Xl=s,Yl}}var Xl=null;function ly(){if(Xl===null)throw Error(i(459));var n=Xl;return Xl=null,n}function uy(n){if(n===Yl||n===sh)throw Error(i(483))}var qi=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ji(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Zc(n),Y_(n,null,o),s}return Wc(n,u,s,o),Zc(n)}function Wl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Al(n,o)}}function Hd(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Gd=!1;function Zl(){if(Gd){var n=mo;if(n!==null)throw n}}function Jl(n,s,o,u){Gd=!1;var f=n.updateQueue;qi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var N=w,H=N.next;N.next=null,E===null?g=H:E.next=H,E=N;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==E&&(w===null?ee.firstBaseUpdate=H:w.next=H,ee.lastBaseUpdate=N))}if(g!==null){var ie=f.baseState;E=0,ee=H=N=null,w=g;do{var Q=w.lane&-536870913,$=Q!==w.lane;if($?(He&Q)===Q:(u&Q)===Q){Q!==0&&Q===fo&&(Gd=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Re=n,we=w;Q=s;var st=o;switch(we.tag){case 1:if(Re=we.payload,typeof Re=="function"){ie=Re.call(st,ie,Q);break e}ie=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=we.payload,Q=typeof Re=="function"?Re.call(st,ie,Q):Re,Q==null)break e;ie=y({},ie,Q);break e;case 2:qi=!0}}Q=w.callback,Q!==null&&(n.flags|=64,$&&(n.flags|=8192),$=f.callbacks,$===null?f.callbacks=[Q]:$.push(Q))}else $={lane:Q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(H=ee=$,N=ie):ee=ee.next=$,E|=Q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;$=w,w=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);ee===null&&(N=ie),f.baseState=N,f.firstBaseUpdate=H,f.lastBaseUpdate=ee,g===null&&(f.shared.lanes=0),Wi|=E,n.lanes=E,n.memoizedState=ie}}function cy(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function hy(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)cy(o[n],s)}var go=te(null),oh=te(0);function fy(n,s){n=yi,le(oh,n),le(go,s),yi=n|s.baseLanes}function Kd(){le(oh,yi),le(go,go.current)}function Qd(){yi=oh.current,ce(go),ce(oh)}var Hi=0,Me=null,rt=null,kt=null,lh=!1,po=!1,oa=!1,uh=0,eu=0,_o=null,MA=0;function xt(){throw Error(i(321))}function $d(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!kn(n[o],s[o]))return!1;return!0}function Yd(n,s,o,u,f,g){return Hi=g,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?Yy:Xy,oa=!1,g=o(u,f),oa=!1,po&&(g=my(s,o,u,f)),dy(n),g}function dy(n){X.H=gh;var s=rt!==null&&rt.next!==null;if(Hi=0,kt=rt=Me=null,lh=!1,eu=0,_o=null,s)throw Error(i(300));n===null||Qt||(n=n.dependencies,n!==null&&nh(n)&&(Qt=!0))}function my(n,s,o,u){Me=n;var f=0;do{if(po&&(_o=null),eu=0,po=!1,25<=f)throw Error(i(301));if(f+=1,kt=rt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=zA,g=s(o,u)}while(po);return g}function OA(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?tu(s):s,n=n.useState()[0],(rt!==null?rt.memoizedState:null)!==n&&(Me.flags|=1024),s}function Xd(){var n=uh!==0;return uh=0,n}function Wd(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Zd(n){if(lh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}lh=!1}Hi=0,kt=rt=Me=null,po=!1,eu=uh=0,_o=null}function In(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Me.memoizedState=kt=n:kt=kt.next=n,kt}function Lt(){if(rt===null){var n=Me.alternate;n=n!==null?n.memoizedState:null}else n=rt.next;var s=kt===null?Me.memoizedState:kt.next;if(s!==null)kt=s,rt=n;else{if(n===null)throw Me.alternate===null?Error(i(467)):Error(i(310));rt=n,n={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},kt===null?Me.memoizedState=kt=n:kt=kt.next=n}return kt}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(n){var s=eu;return eu+=1,_o===null&&(_o=[]),n=oy(_o,n,s),s=Me,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Yy:Xy),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return tu(n);if(n.$$typeof===K)return ln(n)}throw Error(i(438,String(n)))}function em(n){var s=null,o=Me.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Jd(),Me.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=O;return s.index++,o}function fi(n,s){return typeof s=="function"?s(n):s}function hh(n){var s=Lt();return tm(s,rt,n)}function tm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}s.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var w=E=null,N=null,H=s,ee=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?(He&ie)===ie:(Hi&ie)===ie){var Q=H.revertLane;if(Q===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===fo&&(ee=!0);else if((Hi&Q)===Q){H=H.next,Q===fo&&(ee=!0);continue}else ie={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(w=N=ie,E=g):N=N.next=ie,Me.lanes|=Q,Wi|=Q;ie=H.action,oa&&o(g,ie),g=H.hasEagerState?H.eagerState:o(g,ie)}else Q={lane:ie,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(w=N=Q,E=g):N=N.next=Q,Me.lanes|=ie,Wi|=ie;H=H.next}while(H!==null&&H!==s);if(N===null?E=g:N.next=w,!kn(g,n.memoizedState)&&(Qt=!0,ee&&(o=mo,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=N,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function nm(n){var s=Lt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);kn(g,s.memoizedState)||(Qt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function gy(n,s,o){var u=Me,f=Lt(),g=$e;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!kn((rt||f).memoizedState,o);E&&(f.memoizedState=o,Qt=!0),f=f.queue;var w=yy.bind(null,u,f,n);if(nu(2048,8,w,[n]),f.getSnapshot!==s||E||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,yo(9,fh(),_y.bind(null,u,f,o,s),null),ut===null)throw Error(i(349));g||(Hi&124)!==0||py(u,s,o)}return o}function py(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Me.updateQueue,s===null?(s=Jd(),Me.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function _y(n,s,o,u){s.value=o,s.getSnapshot=u,vy(s)&&Ey(n)}function yy(n,s,o){return o(function(){vy(s)&&Ey(n)})}function vy(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!kn(n,o)}catch{return!0}}function Ey(n){var s=lo(n,2);s!==null&&Fn(s,n,2)}function rm(n){var s=In();if(typeof n=="function"){var o=n;if(n=o(),oa){On(!0);try{o()}finally{On(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},s}function Ty(n,s,o,u){return n.baseState=o,tm(n,rt,typeof u=="function"?u:fi)}function PA(n,s,o,u,f){if(mh(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};X.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,by(s,g)):(g.next=o.next,s.pending=o.next=g)}}function by(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var g=X.T,E={};X.T=E;try{var w=o(f,u),N=X.S;N!==null&&N(E,w),wy(n,s,w)}catch(H){im(n,s,H)}finally{X.T=g}}else try{g=o(f,u),wy(n,s,g)}catch(H){im(n,s,H)}}function wy(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Sy(n,s,u)},function(u){return im(n,s,u)}):Sy(n,s,o)}function Sy(n,s,o){s.status="fulfilled",s.value=o,Ay(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,by(n,o)))}function im(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Ay(s),s=s.next;while(s!==u)}n.action=null}function Ay(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Ry(n,s){return s}function Iy(n,s){if($e){var o=ut.formState;if(o!==null){e:{var u=Me;if($e){if(St){t:{for(var f=St,g=Nr;f.nodeType!==8;){if(!g){f=null;break t}if(f=gr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){St=gr(f.nextSibling),u=f.data==="F!";break e}}ra(u)}u=!1}u&&(s=o[0])}}return o=In(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ry,lastRenderedState:s},o.queue=u,o=Ky.bind(null,Me,u),u.dispatch=o,u=rm(!1),g=um.bind(null,Me,!1,u.queue),u=In(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=PA.bind(null,Me,f,g,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function xy(n){var s=Lt();return Cy(s,rt,n)}function Cy(n,s,o){if(s=tm(n,s,Ry)[0],n=hh(fi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=tu(s)}catch(E){throw E===Yl?sh:E}else u=s;s=Lt();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(Me.flags|=2048,yo(9,fh(),kA.bind(null,f,o),null)),[u,g,n]}function kA(n,s){n.action=s}function Dy(n){var s=Lt(),o=rt;if(o!==null)return Cy(s,o,n);Lt(),s=s.memoizedState,o=Lt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function yo(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=Jd(),Me.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function fh(){return{destroy:void 0,resource:void 0}}function Ny(){return Lt().memoizedState}function dh(n,s,o,u){var f=In();u=u===void 0?null:u,Me.flags|=n,f.memoizedState=yo(1|s,fh(),o,u)}function nu(n,s,o,u){var f=Lt();u=u===void 0?null:u;var g=f.memoizedState.inst;rt!==null&&u!==null&&$d(u,rt.memoizedState.deps)?f.memoizedState=yo(s,g,o,u):(Me.flags|=n,f.memoizedState=yo(1|s,g,o,u))}function Vy(n,s){dh(8390656,8,n,s)}function My(n,s){nu(2048,8,n,s)}function Oy(n,s){return nu(4,2,n,s)}function Py(n,s){return nu(4,4,n,s)}function ky(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ly(n,s,o){o=o!=null?o.concat([n]):null,nu(4,4,ky.bind(null,s,n),o)}function sm(){}function Uy(n,s){var o=Lt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&$d(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function By(n,s){var o=Lt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&$d(s,u[1]))return u[0];if(u=n(),oa){On(!0);try{n()}finally{On(!1)}}return o.memoizedState=[u,s],u}function am(n,s,o){return o===void 0||(Hi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=Fv(),Me.lanes|=n,Wi|=n,o)}function zy(n,s,o,u){return kn(o,s)?o:go.current!==null?(n=am(n,o,u),kn(n,s)||(Qt=!0),n):(Hi&42)===0?(Qt=!0,n.memoizedState=o):(n=Fv(),Me.lanes|=n,Wi|=n,s)}function qy(n,s,o,u,f){var g=re.p;re.p=g!==0&&8>g?g:8;var E=X.T,w={};X.T=w,um(n,!1,s,o);try{var N=f(),H=X.S;if(H!==null&&H(w,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=VA(N,u);ru(n,s,ee,qn(n))}else ru(n,s,u,qn(n))}catch(ie){ru(n,s,{then:function(){},status:"rejected",reason:ie},qn())}finally{re.p=g,X.T=E}}function LA(){}function om(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=Fy(n).queue;qy(n,f,s,fe,o===null?LA:function(){return jy(n),o(u)})}function Fy(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:fe},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function jy(n){var s=Fy(n).next.queue;ru(n,s,{},qn())}function lm(){return ln(Tu)}function Hy(){return Lt().memoizedState}function Gy(){return Lt().memoizedState}function UA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=qn();n=Fi(o);var u=ji(s,n,o);u!==null&&(Fn(u,s,o),Wl(u,s,o)),s={cache:Ud()},n.payload=s;return}s=s.return}}function BA(n,s,o){var u=qn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},mh(n)?Qy(s,o):(o=xd(n,s,o,u),o!==null&&(Fn(o,n,u),$y(o,s,u)))}function Ky(n,s,o){var u=qn();ru(n,s,o,u)}function ru(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(mh(n))Qy(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,w=g(E,o);if(f.hasEagerState=!0,f.eagerState=w,kn(w,E))return Wc(n,s,f,0),ut===null&&Xc(),!1}catch{}finally{}if(o=xd(n,s,f,u),o!==null)return Fn(o,n,u),$y(o,s,u),!0}return!1}function um(n,s,o,u){if(u={lane:2,revertLane:qm(),action:u,hasEagerState:!1,eagerState:null,next:null},mh(n)){if(s)throw Error(i(479))}else s=xd(n,o,u,2),s!==null&&Fn(s,n,2)}function mh(n){var s=n.alternate;return n===Me||s!==null&&s===Me}function Qy(n,s){po=lh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function $y(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Al(n,o)}}var gh={readContext:ln,use:ch,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},Yy={readContext:ln,use:ch,useCallback:function(n,s){return In().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:Vy,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,dh(4194308,4,ky.bind(null,s,n),o)},useLayoutEffect:function(n,s){return dh(4194308,4,n,s)},useInsertionEffect:function(n,s){dh(4,2,n,s)},useMemo:function(n,s){var o=In();s=s===void 0?null:s;var u=n();if(oa){On(!0);try{n()}finally{On(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=In();if(o!==void 0){var f=o(s);if(oa){On(!0);try{o(s)}finally{On(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=BA.bind(null,Me,n),[u.memoizedState,n]},useRef:function(n){var s=In();return n={current:n},s.memoizedState=n},useState:function(n){n=rm(n);var s=n.queue,o=Ky.bind(null,Me,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:sm,useDeferredValue:function(n,s){var o=In();return am(o,n,s)},useTransition:function(){var n=rm(!1);return n=qy.bind(null,Me,n.queue,!0,!1),In().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Me,f=In();if($e){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ut===null)throw Error(i(349));(He&124)!==0||py(u,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,Vy(yy.bind(null,u,g,n),[n]),u.flags|=2048,yo(9,fh(),_y.bind(null,u,g,o,s),null),o},useId:function(){var n=In(),s=ut.identifierPrefix;if($e){var o=ui,u=li;o=(u&~(1<<32-on(u)-1)).toString(32)+o,s=""+s+"R"+o,o=uh++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=MA++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:lm,useFormState:Iy,useActionState:Iy,useOptimistic:function(n){var s=In();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=um.bind(null,Me,!0,o),o.dispatch=s,[n,s]},useMemoCache:em,useCacheRefresh:function(){return In().memoizedState=UA.bind(null,Me)}},Xy={readContext:ln,use:ch,useCallback:Uy,useContext:ln,useEffect:My,useImperativeHandle:Ly,useInsertionEffect:Oy,useLayoutEffect:Py,useMemo:By,useReducer:hh,useRef:Ny,useState:function(){return hh(fi)},useDebugValue:sm,useDeferredValue:function(n,s){var o=Lt();return zy(o,rt.memoizedState,n,s)},useTransition:function(){var n=hh(fi)[0],s=Lt().memoizedState;return[typeof n=="boolean"?n:tu(n),s]},useSyncExternalStore:gy,useId:Hy,useHostTransitionStatus:lm,useFormState:xy,useActionState:xy,useOptimistic:function(n,s){var o=Lt();return Ty(o,rt,n,s)},useMemoCache:em,useCacheRefresh:Gy},zA={readContext:ln,use:ch,useCallback:Uy,useContext:ln,useEffect:My,useImperativeHandle:Ly,useInsertionEffect:Oy,useLayoutEffect:Py,useMemo:By,useReducer:nm,useRef:Ny,useState:function(){return nm(fi)},useDebugValue:sm,useDeferredValue:function(n,s){var o=Lt();return rt===null?am(o,n,s):zy(o,rt.memoizedState,n,s)},useTransition:function(){var n=nm(fi)[0],s=Lt().memoizedState;return[typeof n=="boolean"?n:tu(n),s]},useSyncExternalStore:gy,useId:Hy,useHostTransitionStatus:lm,useFormState:Dy,useActionState:Dy,useOptimistic:function(n,s){var o=Lt();return rt!==null?Ty(o,rt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:em,useCacheRefresh:Gy},vo=null,iu=0;function ph(n){var s=iu;return iu+=1,vo===null&&(vo=[]),oy(vo,n,s)}function su(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function _h(n,s){throw s.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Wy(n){var s=n._init;return s(n._payload)}function Zy(n){function s(B,L){if(n){var j=B.deletions;j===null?(B.deletions=[L],B.flags|=16):j.push(L)}}function o(B,L){if(!n)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function u(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function f(B,L){return B=oi(B,L),B.index=0,B.sibling=null,B}function g(B,L,j){return B.index=j,n?(j=B.alternate,j!==null?(j=j.index,j<L?(B.flags|=67108866,L):j):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function E(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function w(B,L,j,ne){return L===null||L.tag!==6?(L=Dd(j,B.mode,ne),L.return=B,L):(L=f(L,j),L.return=B,L)}function N(B,L,j,ne){var _e=j.type;return _e===M?ee(B,L,j.props.children,ne,j.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Wy(_e)===L.type)?(L=f(L,j.props),su(L,j),L.return=B,L):(L=Jc(j.type,j.key,j.props,null,B.mode,ne),su(L,j),L.return=B,L)}function H(B,L,j,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==j.containerInfo||L.stateNode.implementation!==j.implementation?(L=Nd(j,B.mode,ne),L.return=B,L):(L=f(L,j.children||[]),L.return=B,L)}function ee(B,L,j,ne,_e){return L===null||L.tag!==7?(L=Js(j,B.mode,ne,_e),L.return=B,L):(L=f(L,j),L.return=B,L)}function ie(B,L,j){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Dd(""+L,B.mode,j),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return j=Jc(L.type,L.key,L.props,null,B.mode,j),su(j,L),j.return=B,j;case D:return L=Nd(L,B.mode,j),L.return=B,L;case S:var ne=L._init;return L=ne(L._payload),ie(B,L,j)}if(xe(L)||k(L))return L=Js(L,B.mode,j,null),L.return=B,L;if(typeof L.then=="function")return ie(B,ph(L),j);if(L.$$typeof===K)return ie(B,rh(B,L),j);_h(B,L)}return null}function Q(B,L,j,ne){var _e=L!==null?L.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return _e!==null?null:w(B,L,""+j,ne);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return j.key===_e?N(B,L,j,ne):null;case D:return j.key===_e?H(B,L,j,ne):null;case S:return _e=j._init,j=_e(j._payload),Q(B,L,j,ne)}if(xe(j)||k(j))return _e!==null?null:ee(B,L,j,ne,null);if(typeof j.then=="function")return Q(B,L,ph(j),ne);if(j.$$typeof===K)return Q(B,L,rh(B,j),ne);_h(B,j)}return null}function $(B,L,j,ne,_e){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(j)||null,w(L,B,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return B=B.get(ne.key===null?j:ne.key)||null,N(L,B,ne,_e);case D:return B=B.get(ne.key===null?j:ne.key)||null,H(L,B,ne,_e);case S:var Oe=ne._init;return ne=Oe(ne._payload),$(B,L,j,ne,_e)}if(xe(ne)||k(ne))return B=B.get(j)||null,ee(L,B,ne,_e,null);if(typeof ne.then=="function")return $(B,L,j,ph(ne),_e);if(ne.$$typeof===K)return $(B,L,j,rh(L,ne),_e);_h(L,ne)}return null}function Re(B,L,j,ne){for(var _e=null,Oe=null,Te=L,Se=L=0,Yt=null;Te!==null&&Se<j.length;Se++){Te.index>Se?(Yt=Te,Te=null):Yt=Te.sibling;var Ke=Q(B,Te,j[Se],ne);if(Ke===null){Te===null&&(Te=Yt);break}n&&Te&&Ke.alternate===null&&s(B,Te),L=g(Ke,L,Se),Oe===null?_e=Ke:Oe.sibling=Ke,Oe=Ke,Te=Yt}if(Se===j.length)return o(B,Te),$e&&ta(B,Se),_e;if(Te===null){for(;Se<j.length;Se++)Te=ie(B,j[Se],ne),Te!==null&&(L=g(Te,L,Se),Oe===null?_e=Te:Oe.sibling=Te,Oe=Te);return $e&&ta(B,Se),_e}for(Te=u(Te);Se<j.length;Se++)Yt=$(Te,B,Se,j[Se],ne),Yt!==null&&(n&&Yt.alternate!==null&&Te.delete(Yt.key===null?Se:Yt.key),L=g(Yt,L,Se),Oe===null?_e=Yt:Oe.sibling=Yt,Oe=Yt);return n&&Te.forEach(function(as){return s(B,as)}),$e&&ta(B,Se),_e}function we(B,L,j,ne){if(j==null)throw Error(i(151));for(var _e=null,Oe=null,Te=L,Se=L=0,Yt=null,Ke=j.next();Te!==null&&!Ke.done;Se++,Ke=j.next()){Te.index>Se?(Yt=Te,Te=null):Yt=Te.sibling;var as=Q(B,Te,Ke.value,ne);if(as===null){Te===null&&(Te=Yt);break}n&&Te&&as.alternate===null&&s(B,Te),L=g(as,L,Se),Oe===null?_e=as:Oe.sibling=as,Oe=as,Te=Yt}if(Ke.done)return o(B,Te),$e&&ta(B,Se),_e;if(Te===null){for(;!Ke.done;Se++,Ke=j.next())Ke=ie(B,Ke.value,ne),Ke!==null&&(L=g(Ke,L,Se),Oe===null?_e=Ke:Oe.sibling=Ke,Oe=Ke);return $e&&ta(B,Se),_e}for(Te=u(Te);!Ke.done;Se++,Ke=j.next())Ke=$(Te,B,Se,Ke.value,ne),Ke!==null&&(n&&Ke.alternate!==null&&Te.delete(Ke.key===null?Se:Ke.key),L=g(Ke,L,Se),Oe===null?_e=Ke:Oe.sibling=Ke,Oe=Ke);return n&&Te.forEach(function(qR){return s(B,qR)}),$e&&ta(B,Se),_e}function st(B,L,j,ne){if(typeof j=="object"&&j!==null&&j.type===M&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case b:e:{for(var _e=j.key;L!==null;){if(L.key===_e){if(_e=j.type,_e===M){if(L.tag===7){o(B,L.sibling),ne=f(L,j.props.children),ne.return=B,B=ne;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===S&&Wy(_e)===L.type){o(B,L.sibling),ne=f(L,j.props),su(ne,j),ne.return=B,B=ne;break e}o(B,L);break}else s(B,L);L=L.sibling}j.type===M?(ne=Js(j.props.children,B.mode,ne,j.key),ne.return=B,B=ne):(ne=Jc(j.type,j.key,j.props,null,B.mode,ne),su(ne,j),ne.return=B,B=ne)}return E(B);case D:e:{for(_e=j.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===j.containerInfo&&L.stateNode.implementation===j.implementation){o(B,L.sibling),ne=f(L,j.children||[]),ne.return=B,B=ne;break e}else{o(B,L);break}else s(B,L);L=L.sibling}ne=Nd(j,B.mode,ne),ne.return=B,B=ne}return E(B);case S:return _e=j._init,j=_e(j._payload),st(B,L,j,ne)}if(xe(j))return Re(B,L,j,ne);if(k(j)){if(_e=k(j),typeof _e!="function")throw Error(i(150));return j=_e.call(j),we(B,L,j,ne)}if(typeof j.then=="function")return st(B,L,ph(j),ne);if(j.$$typeof===K)return st(B,L,rh(B,j),ne);_h(B,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,L!==null&&L.tag===6?(o(B,L.sibling),ne=f(L,j),ne.return=B,B=ne):(o(B,L),ne=Dd(j,B.mode,ne),ne.return=B,B=ne),E(B)):o(B,L)}return function(B,L,j,ne){try{iu=0;var _e=st(B,L,j,ne);return vo=null,_e}catch(Te){if(Te===Yl||Te===sh)throw Te;var Oe=Ln(29,Te,null,B.mode);return Oe.lanes=ne,Oe.return=B,Oe}finally{}}}var Eo=Zy(!0),Jy=Zy(!1),tr=te(null),Vr=null;function Gi(n){var s=n.alternate;le(jt,jt.current&1),le(tr,n),Vr===null&&(s===null||go.current!==null||s.memoizedState!==null)&&(Vr=n)}function ev(n){if(n.tag===22){if(le(jt,jt.current),le(tr,n),Vr===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Vr=n)}}else Ki()}function Ki(){le(jt,jt.current),le(tr,tr.current)}function di(n){ce(tr),Vr===n&&(Vr=null),ce(jt)}var jt=te(0);function yh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Jm(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function cm(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var hm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=qn(),f=Fi(u);f.payload=s,o!=null&&(f.callback=o),s=ji(n,f,u),s!==null&&(Fn(s,n,u),Wl(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=qn(),f=Fi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=ji(n,f,u),s!==null&&(Fn(s,n,u),Wl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=qn(),u=Fi(o);u.tag=2,s!=null&&(u.callback=s),s=ji(n,u,o),s!==null&&(Fn(s,n,o),Wl(s,n,o))}};function tv(n,s,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!ql(o,u)||!ql(f,g):!0}function nv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&hm.enqueueReplaceState(s,s.state,null)}function la(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var vh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function rv(n){vh(n)}function iv(n){console.error(n)}function sv(n){vh(n)}function Eh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function av(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function fm(n,s,o){return o=Fi(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(n,s)},o}function ov(n){return n=Fi(n),n.tag=3,n}function lv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){av(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){av(s,o,u),typeof f!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function qA(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Kl(s,o,f,!0),o=tr.current,o!==null){switch(o.tag){case 13:return Vr===null?km():o.alternate===null&&At===0&&(At=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Um(n,u,f)),!1;case 22:return o.flags|=65536,u===qd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Um(n,u,f)),!1}throw Error(i(435,o.tag))}return Um(n,u,f),km(),!1}if($e)return s=tr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Od&&(n=Error(i(422),{cause:u}),Gl(Wn(n,o)))):(u!==Od&&(s=Error(i(423),{cause:u}),Gl(Wn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Wn(u,o),f=fm(n.stateNode,u,f),Hd(n,f),At!==4&&(At=2)),!1;var g=Error(i(520),{cause:u});if(g=Wn(g,o),fu===null?fu=[g]:fu.push(g),At!==4&&(At=2),s===null)return!0;u=Wn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=fm(o.stateNode,u,n),Hd(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Zi===null||!Zi.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=ov(f),lv(f,n,o,u),Hd(o,f),!1}o=o.return}while(o!==null);return!1}var uv=Error(i(461)),Qt=!1;function en(n,s,o,u){s.child=n===null?Jy(s,null,o,u):Eo(s,n.child,o,u)}function cv(n,s,o,u,f){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var w in u)w!=="ref"&&(E[w]=u[w])}else E=u;return sa(s),u=Yd(n,s,o,E,g,f),w=Xd(),n!==null&&!Qt?(Wd(n,s,f),mi(n,s,f)):($e&&w&&Vd(s),s.flags|=1,en(n,s,u,f),s.child)}function hv(n,s,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!Cd(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,fv(n,s,g,u,f)):(n=Jc(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!Em(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:ql,o(E,u)&&n.ref===s.ref)return mi(n,s,f)}return s.flags|=1,n=oi(g,u),n.ref=s.ref,n.return=s,s.child=n}function fv(n,s,o,u,f){if(n!==null){var g=n.memoizedProps;if(ql(g,u)&&n.ref===s.ref)if(Qt=!1,s.pendingProps=u=g,Em(n,f))(n.flags&131072)!==0&&(Qt=!0);else return s.lanes=n.lanes,mi(n,s,f)}return dm(n,s,o,u,f)}function dv(n,s,o){var u=s.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=s.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return mv(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ih(s,g!==null?g.cachePool:null),g!==null?fy(s,g):Kd(),ev(s);else return s.lanes=s.childLanes=536870912,mv(n,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(ih(s,g.cachePool),fy(s,g),Ki(),s.memoizedState=null):(n!==null&&ih(s,null),Kd(),Ki());return en(n,s,f,o),s.child}function mv(n,s,o,u){var f=zd();return f=f===null?null:{parent:Ft._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&ih(s,null),Kd(),ev(s),n!==null&&Kl(n,s,u,!0),null}function Th(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function dm(n,s,o,u,f){return sa(s),o=Yd(n,s,o,u,void 0,f),u=Xd(),n!==null&&!Qt?(Wd(n,s,f),mi(n,s,f)):($e&&u&&Vd(s),s.flags|=1,en(n,s,o,f),s.child)}function gv(n,s,o,u,f,g){return sa(s),s.updateQueue=null,o=my(s,u,o,f),dy(n),u=Xd(),n!==null&&!Qt?(Wd(n,s,g),mi(n,s,g)):($e&&u&&Vd(s),s.flags|=1,en(n,s,o,g),s.child)}function pv(n,s,o,u,f){if(sa(s),s.stateNode===null){var g=uo,E=o.contextType;typeof E=="object"&&E!==null&&(g=ln(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Fd(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?ln(E):uo,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(cm(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&hm.enqueueReplaceState(g,g.state,null),Jl(s,u,g,f),Zl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var w=s.memoizedProps,N=la(o,w);g.props=N;var H=g.context,ee=o.contextType;E=uo,typeof ee=="object"&&ee!==null&&(E=ln(ee));var ie=o.getDerivedStateFromProps;ee=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,ee||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||H!==E)&&nv(s,g,u,E),qi=!1;var Q=s.memoizedState;g.state=Q,Jl(s,u,g,f),Zl(),H=s.memoizedState,w||Q!==H||qi?(typeof ie=="function"&&(cm(s,o,ie,u),H=s.memoizedState),(N=qi||tv(s,o,N,u,Q,H,E))?(ee||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),g.props=u,g.state=H,g.context=E,u=N):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,jd(n,s),E=s.memoizedProps,ee=la(o,E),g.props=ee,ie=s.pendingProps,Q=g.context,H=o.contextType,N=uo,typeof H=="object"&&H!==null&&(N=ln(H)),w=o.getDerivedStateFromProps,(H=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ie||Q!==N)&&nv(s,g,u,N),qi=!1,Q=s.memoizedState,g.state=Q,Jl(s,u,g,f),Zl();var $=s.memoizedState;E!==ie||Q!==$||qi||n!==null&&n.dependencies!==null&&nh(n.dependencies)?(typeof w=="function"&&(cm(s,o,w,u),$=s.memoizedState),(ee=qi||tv(s,o,ee,u,Q,$,N)||n!==null&&n.dependencies!==null&&nh(n.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,$,N),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,$,N)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=$),g.props=u,g.state=$,g.context=N,u=ee):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,Th(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Eo(s,n.child,null,f),s.child=Eo(s,null,o,f)):en(n,s,o,f),s.memoizedState=g.state,n=s.child):n=mi(n,s,f),n}function _v(n,s,o,u){return Hl(),s.flags|=256,en(n,s,o,u),s.child}var mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gm(n){return{baseLanes:n,cachePool:iy()}}function pm(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=nr),n}function yv(n,s,o){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(jt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if($e){if(f?Gi(s):Ki(),$e){var w=St,N;if(N=w){e:{for(N=w,w=Nr;N.nodeType!==8;){if(!w){w=null;break e}if(N=gr(N.nextSibling),N===null){w=null;break e}}w=N}w!==null?(s.memoizedState={dehydrated:w,treeContext:ea!==null?{id:li,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},N=Ln(18,null,null,0),N.stateNode=w,N.return=s,s.child=N,vn=s,St=null,N=!0):N=!1}N||ra(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Jm(w)?s.lanes=32:s.lanes=536870912,null;di(s)}return w=u.children,u=u.fallback,f?(Ki(),f=s.mode,w=bh({mode:"hidden",children:w},f),u=Js(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,f=s.child,f.memoizedState=gm(o),f.childLanes=pm(n,E,o),s.memoizedState=mm,u):(Gi(s),_m(s,w))}if(N=n.memoizedState,N!==null&&(w=N.dehydrated,w!==null)){if(g)s.flags&256?(Gi(s),s.flags&=-257,s=ym(n,s,o)):s.memoizedState!==null?(Ki(),s.child=n.child,s.flags|=128,s=null):(Ki(),f=u.fallback,w=s.mode,u=bh({mode:"visible",children:u.children},w),f=Js(f,w,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Eo(s,n.child,null,o),u=s.child,u.memoizedState=gm(o),u.childLanes=pm(n,E,o),s.memoizedState=mm,s=f);else if(Gi(s),Jm(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(i(419)),u.stack="",u.digest=E,Gl({value:u,source:null,stack:null}),s=ym(n,s,o)}else if(Qt||Kl(n,s,o,!1),E=(o&n.childLanes)!==0,Qt||E){if(E=ut,E!==null&&(u=o&-o,u=(u&42)!==0?1:Mi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==N.retryLane))throw N.retryLane=u,lo(n,u),Fn(E,n,u),uv;w.data==="$?"||km(),s=ym(n,s,o)}else w.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,St=gr(w.nextSibling),vn=s,$e=!0,na=null,Nr=!1,n!==null&&(Jn[er++]=li,Jn[er++]=ui,Jn[er++]=ea,li=n.id,ui=n.overflow,ea=s),s=_m(s,u.children),s.flags|=4096);return s}return f?(Ki(),f=u.fallback,w=s.mode,N=n.child,H=N.sibling,u=oi(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,H!==null?f=oi(H,f):(f=Js(f,w,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,w=n.child.memoizedState,w===null?w=gm(o):(N=w.cachePool,N!==null?(H=Ft._currentValue,N=N.parent!==H?{parent:H,pool:H}:N):N=iy(),w={baseLanes:w.baseLanes|o,cachePool:N}),f.memoizedState=w,f.childLanes=pm(n,E,o),s.memoizedState=mm,u):(Gi(s),o=n.child,n=o.sibling,o=oi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function _m(n,s){return s=bh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function bh(n,s){return n=Ln(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function ym(n,s,o){return Eo(s,n.child,null,o),n=_m(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function vv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),kd(n.return,s,o)}function vm(n,s,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function Ev(n,s,o){var u=s.pendingProps,f=u.revealOrder,g=u.tail;if(en(n,s,u.children,o),u=jt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vv(n,o,s);else if(n.tag===19)vv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(le(jt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&yh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),vm(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&yh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}vm(s,!0,o,null,g);break;case"together":vm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function mi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Wi|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Kl(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=oi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=oi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Em(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&nh(n)))}function FA(n,s,o){switch(s.tag){case 3:tt(s,s.stateNode.containerInfo),zi(s,Ft,n.memoizedState.cache),Hl();break;case 27:case 5:vr(s);break;case 4:tt(s,s.stateNode.containerInfo);break;case 10:zi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Gi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?yv(n,s,o):(Gi(s),n=mi(n,s,o),n!==null?n.sibling:null);Gi(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Kl(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Ev(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(jt,jt.current),u)break;return null;case 22:case 23:return s.lanes=0,dv(n,s,o);case 24:zi(s,Ft,n.memoizedState.cache)}return mi(n,s,o)}function Tv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Qt=!0;else{if(!Em(n,o)&&(s.flags&128)===0)return Qt=!1,FA(n,s,o);Qt=(n.flags&131072)!==0}else Qt=!1,$e&&(s.flags&1048576)!==0&&W_(s,th,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Cd(u)?(n=la(u,n),s.tag=1,s=pv(null,s,u,n,o)):(s.tag=0,s=dm(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===ue){s.tag=11,s=cv(null,s,u,n,o);break e}else if(f===I){s.tag=14,s=hv(null,s,u,n,o);break e}}throw s=ze(u)||u,Error(i(306,s,""))}}return s;case 0:return dm(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=la(u,s.pendingProps),pv(n,s,u,f,o);case 3:e:{if(tt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,jd(n,s),Jl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,zi(s,Ft,u),u!==g.cache&&Ld(s,[Ft],o,!0),Zl(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=_v(n,s,u,o);break e}else if(u!==f){f=Wn(Error(i(424)),s),Gl(f),s=_v(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(St=gr(n.firstChild),vn=s,$e=!0,na=null,Nr=!0,o=Jy(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Hl(),u===f){s=mi(n,s,o);break e}en(n,s,u,o)}s=s.child}return s;case 26:return Th(n,s),n===null?(o=AE(s.type,null,s.pendingProps,null))?s.memoizedState=o:$e||(o=s.type,n=s.pendingProps,u=kh(Ae.current).createElement(o),u[Bt]=s,u[Ot]=n,nn(u,o,n),It(u),s.stateNode=u):s.memoizedState=AE(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return vr(s),n===null&&$e&&(u=s.stateNode=bE(s.type,s.pendingProps,Ae.current),vn=s,Nr=!0,f=St,ts(s.type)?(eg=f,St=gr(u.firstChild)):St=f),en(n,s,s.pendingProps.children,o),Th(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&$e&&((f=u=St)&&(u=pR(u,s.type,s.pendingProps,Nr),u!==null?(s.stateNode=u,vn=s,St=gr(u.firstChild),Nr=!1,f=!0):f=!1),f||ra(s)),vr(s),f=s.type,g=s.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,Xm(f,g)?u=null:E!==null&&Xm(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Yd(n,s,OA,null,null,o),Tu._currentValue=f),Th(n,s),en(n,s,u,o),s.child;case 6:return n===null&&$e&&((n=o=St)&&(o=_R(o,s.pendingProps,Nr),o!==null?(s.stateNode=o,vn=s,St=null,n=!0):n=!1),n||ra(s)),null;case 13:return yv(n,s,o);case 4:return tt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Eo(s,null,u,o):en(n,s,u,o),s.child;case 11:return cv(n,s,s.type,s.pendingProps,o);case 7:return en(n,s,s.pendingProps,o),s.child;case 8:return en(n,s,s.pendingProps.children,o),s.child;case 12:return en(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,zi(s,s.type,u.value),en(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,sa(s),f=ln(f),u=u(f),s.flags|=1,en(n,s,u,o),s.child;case 14:return hv(n,s,s.type,s.pendingProps,o);case 15:return fv(n,s,s.type,s.pendingProps,o);case 19:return Ev(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=bh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=oi(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return dv(n,s,o);case 24:return sa(s),u=ln(Ft),n===null?(f=zd(),f===null&&(f=ut,g=Ud(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:u,cache:f},Fd(s),zi(s,Ft,f)):((n.lanes&o)!==0&&(jd(n,s),Jl(s,null,null,o),Zl()),f=n.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),zi(s,Ft,u)):(u=g.cache,zi(s,Ft,u),u!==f.cache&&Ld(s,[Ft],o,!0))),en(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function gi(n){n.flags|=4}function bv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!DE(s)){if(s=tr.current,s!==null&&((He&4194048)===He?Vr!==null:(He&62914560)!==He&&(He&536870912)===0||s!==Vr))throw Xl=qd,sy;n.flags|=8192}}function wh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?wl():536870912,n.lanes|=s,So|=s)}function au(n,s){if(!$e)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Et(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function jA(n,s,o){var u=s.pendingProps;switch(Md(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),hi(Ft),Hn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(jl(s)?gi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ey())),Et(s),null;case 26:return o=s.memoizedState,n===null?(gi(s),o!==null?(Et(s),bv(s,o)):(Et(s),s.flags&=-16777217)):o?o!==n.memoizedState?(gi(s),Et(s),bv(s,o)):(Et(s),s.flags&=-16777217):(n.memoizedProps!==u&&gi(s),Et(s),s.flags&=-16777217),null;case 27:ur(s),o=Ae.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&gi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Et(s),null}n=be.current,jl(s)?Z_(s):(n=bE(f,u,o),s.stateNode=n,gi(s))}return Et(s),null;case 5:if(ur(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&gi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Et(s),null}if(n=be.current,jl(s))Z_(s);else{switch(f=kh(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[Bt]=s,n[Ot]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(nn(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&gi(s)}}return Et(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&gi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ae.current,jl(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=vn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Bt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||gE(n.nodeValue,o)),n||ra(s)}else n=kh(n).createTextNode(u),n[Bt]=s,s.stateNode=n}return Et(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=jl(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Bt]=s}else Hl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),f=!1}else f=ey(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(di(s),s):(di(s),null)}if(di(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),wh(s,s.updateQueue),Et(s),null;case 4:return Hn(),n===null&&Gm(s.stateNode.containerInfo),Et(s),null;case 10:return hi(s.type),Et(s),null;case 19:if(ce(jt),f=s.memoizedState,f===null)return Et(s),null;if(u=(s.flags&128)!==0,g=f.rendering,g===null)if(u)au(f,!1);else{if(At!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=yh(n),g!==null){for(s.flags|=128,au(f,!1),n=g.updateQueue,s.updateQueue=n,wh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)X_(o,n),o=o.sibling;return le(jt,jt.current&1|2),s.child}n=n.sibling}f.tail!==null&&mn()>Rh&&(s.flags|=128,u=!0,au(f,!1),s.lanes=4194304)}else{if(!u)if(n=yh(g),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,wh(s,n),au(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!$e)return Et(s),null}else 2*mn()-f.renderingStartTime>Rh&&o!==536870912&&(s.flags|=128,u=!0,au(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(n=f.last,n!==null?n.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=mn(),s.sibling=null,n=jt.current,le(jt,u?n&1|2:n&1),s):(Et(s),null);case 22:case 23:return di(s),Qd(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),o=s.updateQueue,o!==null&&wh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ce(aa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),hi(Ft),Et(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function HA(n,s){switch(Md(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return hi(Ft),Hn(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return ur(s),null;case 13:if(di(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Hl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ce(jt),null;case 4:return Hn(),null;case 10:return hi(s.type),null;case 22:case 23:return di(s),Qd(),n!==null&&ce(aa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return hi(Ft),null;case 25:return null;default:return null}}function wv(n,s){switch(Md(s),s.tag){case 3:hi(Ft),Hn();break;case 26:case 27:case 5:ur(s);break;case 4:Hn();break;case 13:di(s);break;case 19:ce(jt);break;case 10:hi(s.type);break;case 22:case 23:di(s),Qd(),n!==null&&ce(aa);break;case 24:hi(Ft)}}function ou(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(w){lt(s,s.return,w)}}function Qi(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=s;var N=o,H=w;try{H()}catch(ee){lt(f,N,ee)}}}u=u.next}while(u!==g)}}catch(ee){lt(s,s.return,ee)}}function Sv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{hy(s,o)}catch(u){lt(n,n.return,u)}}}function Av(n,s,o){o.props=la(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){lt(n,s,u)}}function lu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){lt(n,s,f)}}function Mr(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){lt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){lt(n,s,f)}else o.current=null}function Rv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){lt(n,n.return,f)}}function Tm(n,s,o){try{var u=n.stateNode;hR(u,n.type,o,s),u[Ot]=s}catch(f){lt(n,n.return,f)}}function Iv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ts(n.type)||n.tag===4}function bm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Iv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ts(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wm(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Ph));else if(u!==4&&(u===27&&ts(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(wm(n,s,o),n=n.sibling;n!==null;)wm(n,s,o),n=n.sibling}function Sh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&ts(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Sh(n,s,o),n=n.sibling;n!==null;)Sh(n,s,o),n=n.sibling}function xv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,u,o),s[Bt]=n,s[Ot]=o}catch(g){lt(n,n.return,g)}}var pi=!1,Ct=!1,Sm=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,$t=null;function GA(n,s){if(n=n.containerInfo,$m=Fh,n=z_(n),bd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,w=-1,N=-1,H=0,ee=0,ie=n,Q=null;t:for(;;){for(var $;ie!==o||f!==0&&ie.nodeType!==3||(w=E+f),ie!==g||u!==0&&ie.nodeType!==3||(N=E+u),ie.nodeType===3&&(E+=ie.nodeValue.length),($=ie.firstChild)!==null;)Q=ie,ie=$;for(;;){if(ie===n)break t;if(Q===o&&++H===f&&(w=E),Q===g&&++ee===u&&(N=E),($=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=$}o=w===-1||N===-1?null:{start:w,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ym={focusedElem:n,selectionRange:o},Fh=!1,$t=s;$t!==null;)if(s=$t,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,$t=n;else for(;$t!==null;){switch(s=$t,g=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Re=la(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(Re,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){lt(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Zm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,$t=n;break}$t=s.return}}function Dv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:$i(n,o),u&4&&ou(5,o);break;case 1:if($i(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){lt(o,o.return,E)}else{var f=la(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){lt(o,o.return,E)}}u&64&&Sv(o),u&512&&lu(o,o.return);break;case 3:if($i(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{hy(n,s)}catch(E){lt(o,o.return,E)}}break;case 27:s===null&&u&4&&xv(o);case 26:case 5:$i(n,o),s===null&&u&4&&Rv(o),u&512&&lu(o,o.return);break;case 12:$i(n,o);break;case 13:$i(n,o),u&4&&Mv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=eR.bind(null,o),yR(n,o))));break;case 22:if(u=o.memoizedState!==null||pi,!u){s=s!==null&&s.memoizedState!==null||Ct,f=pi;var g=Ct;pi=u,(Ct=s)&&!g?Yi(n,o,(o.subtreeFlags&8772)!==0):$i(n,o),pi=f,Ct=g}break;case 30:break;default:$i(n,o)}}function Nv(n){var s=n.alternate;s!==null&&(n.alternate=null,Nv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&ki(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var mt=null,xn=!1;function _i(n,s,o){for(o=o.child;o!==null;)Vv(n,s,o),o=o.sibling}function Vv(n,s,o){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(wt,o)}catch{}switch(o.tag){case 26:Ct||Mr(o,s),_i(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||Mr(o,s);var u=mt,f=xn;ts(o.type)&&(mt=o.stateNode,xn=!1),_i(n,s,o),_u(o.stateNode),mt=u,xn=f;break;case 5:Ct||Mr(o,s);case 6:if(u=mt,f=xn,mt=null,_i(n,s,o),mt=u,xn=f,mt!==null)if(xn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(o.stateNode)}catch(g){lt(o,s,g)}else try{mt.removeChild(o.stateNode)}catch(g){lt(o,s,g)}break;case 18:mt!==null&&(xn?(n=mt,EE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Au(n)):EE(mt,o.stateNode));break;case 4:u=mt,f=xn,mt=o.stateNode.containerInfo,xn=!0,_i(n,s,o),mt=u,xn=f;break;case 0:case 11:case 14:case 15:Ct||Qi(2,o,s),Ct||Qi(4,o,s),_i(n,s,o);break;case 1:Ct||(Mr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Av(o,s,u)),_i(n,s,o);break;case 21:_i(n,s,o);break;case 22:Ct=(u=Ct)||o.memoizedState!==null,_i(n,s,o),Ct=u;break;default:_i(n,s,o)}}function Mv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Au(n)}catch(o){lt(s,s.return,o)}}function KA(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Cv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Cv),s;default:throw Error(i(435,n.tag))}}function Am(n,s){var o=KA(n);s.forEach(function(u){var f=tR.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function Un(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(ts(w.type)){mt=w.stateNode,xn=!1;break e}break;case 5:mt=w.stateNode,xn=!1;break e;case 3:case 4:mt=w.stateNode.containerInfo,xn=!0;break e}w=w.return}if(mt===null)throw Error(i(160));Vv(g,E,f),mt=null,xn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ov(s,n),s=s.sibling}var mr=null;function Ov(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Un(s,n),Bn(n),u&4&&(Qi(3,n,n.return),ou(3,n),Qi(5,n,n.return));break;case 1:Un(s,n),Bn(n),u&512&&(Ct||o===null||Mr(o,o.return)),u&64&&pi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=mr;if(Un(s,n),Bn(n),u&512&&(Ct||o===null||Mr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ls]||g[Bt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),nn(g,u,o),g[Bt]=n,It(g),u=g;break e;case"link":var E=xE("link","href",f).get(u+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(g=E[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}g=f.createElement(u),nn(g,u,o),f.head.appendChild(g);break;case"meta":if(E=xE("meta","content",f).get(u+(o.content||""))){for(w=0;w<E.length;w++)if(g=E[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}g=f.createElement(u),nn(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[Bt]=n,It(g),u=g}n.stateNode=u}else CE(f,n.type,n.stateNode);else n.stateNode=IE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?CE(f,n.type,n.stateNode):IE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Tm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Un(s,n),Bn(n),u&512&&(Ct||o===null||Mr(o,o.return)),o!==null&&u&4&&Tm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Un(s,n),Bn(n),u&512&&(Ct||o===null||Mr(o,o.return)),n.flags&32){f=n.stateNode;try{Qn(f,"")}catch($){lt(n,n.return,$)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Tm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Sm=!0);break;case 6:if(Un(s,n),Bn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch($){lt(n,n.return,$)}}break;case 3:if(Bh=null,f=mr,mr=Lh(s.containerInfo),Un(s,n),mr=f,Bn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Au(s.containerInfo)}catch($){lt(n,n.return,$)}Sm&&(Sm=!1,Pv(n));break;case 4:u=mr,mr=Lh(n.stateNode.containerInfo),Un(s,n),Bn(n),mr=u;break;case 12:Un(s,n),Bn(n);break;case 13:Un(s,n),Bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Nm=mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Am(n,u)));break;case 22:f=n.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,H=pi,ee=Ct;if(pi=H||f,Ct=ee||N,Un(s,n),Ct=ee,pi=H,Bn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||N||pi||Ct||ua(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){N=o=s;try{if(g=N.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=N.stateNode;var ie=N.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;w.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch($){lt(N,N.return,$)}}}else if(s.tag===6){if(o===null){N=s;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch($){lt(N,N.return,$)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Am(n,o))));break;case 19:Un(s,n),Bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Am(n,u)));break;case 30:break;case 21:break;default:Un(s,n),Bn(n)}}function Bn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Iv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=bm(n);Sh(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Qn(E,""),o.flags&=-33);var w=bm(n);Sh(n,w,E);break;case 3:case 4:var N=o.stateNode.containerInfo,H=bm(n);wm(n,H,N);break;default:throw Error(i(161))}}catch(ee){lt(n,n.return,ee)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Pv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Pv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function $i(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Dv(n,s.alternate,s),s=s.sibling}function ua(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Qi(4,s,s.return),ua(s);break;case 1:Mr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Av(s,s.return,o),ua(s);break;case 27:_u(s.stateNode);case 26:case 5:Mr(s,s.return),ua(s);break;case 22:s.memoizedState===null&&ua(s);break;case 30:ua(s);break;default:ua(s)}n=n.sibling}}function Yi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:Yi(f,g,o),ou(4,g);break;case 1:if(Yi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){lt(u,u.return,H)}if(u=g,f=u.updateQueue,f!==null){var w=u.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)cy(N[f],w)}catch(H){lt(u,u.return,H)}}o&&E&64&&Sv(g),lu(g,g.return);break;case 27:xv(g);case 26:case 5:Yi(f,g,o),o&&u===null&&E&4&&Rv(g),lu(g,g.return);break;case 12:Yi(f,g,o);break;case 13:Yi(f,g,o),o&&E&4&&Mv(f,g);break;case 22:g.memoizedState===null&&Yi(f,g,o),lu(g,g.return);break;case 30:break;default:Yi(f,g,o)}s=s.sibling}}function Rm(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Ql(o))}function Im(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ql(n))}function Or(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kv(n,s,o,u),s=s.sibling}function kv(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Or(n,s,o,u),f&2048&&ou(9,s);break;case 1:Or(n,s,o,u);break;case 3:Or(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ql(n)));break;case 12:if(f&2048){Or(n,s,o,u),n=s.stateNode;try{var g=s.memoizedProps,E=g.id,w=g.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){lt(s,s.return,N)}}else Or(n,s,o,u);break;case 13:Or(n,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?Or(n,s,o,u):uu(n,s):g._visibility&2?Or(n,s,o,u):(g._visibility|=2,To(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Rm(E,s);break;case 24:Or(n,s,o,u),f&2048&&Im(s.alternate,s);break;default:Or(n,s,o,u)}}function To(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=n,E=s,w=o,N=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:To(g,E,w,N,f),ou(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?To(g,E,w,N,f):uu(g,E):(ee._visibility|=2,To(g,E,w,N,f)),f&&H&2048&&Rm(E.alternate,E);break;case 24:To(g,E,w,N,f),f&&H&2048&&Im(E.alternate,E);break;default:To(g,E,w,N,f)}s=s.sibling}}function uu(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:uu(o,u),f&2048&&Rm(u.alternate,u);break;case 24:uu(o,u),f&2048&&Im(u.alternate,u);break;default:uu(o,u)}s=s.sibling}}var cu=8192;function bo(n){if(n.subtreeFlags&cu)for(n=n.child;n!==null;)Lv(n),n=n.sibling}function Lv(n){switch(n.tag){case 26:bo(n),n.flags&cu&&n.memoizedState!==null&&NR(mr,n.memoizedState,n.memoizedProps);break;case 5:bo(n);break;case 3:case 4:var s=mr;mr=Lh(n.stateNode.containerInfo),bo(n),mr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=cu,cu=16777216,bo(n),cu=s):bo(n));break;default:bo(n)}}function Uv(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function hu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,zv(u,n)}Uv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Bv(n),n=n.sibling}function Bv(n){switch(n.tag){case 0:case 11:case 15:hu(n),n.flags&2048&&Qi(9,n,n.return);break;case 3:hu(n);break;case 12:hu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ah(n)):hu(n);break;default:hu(n)}}function Ah(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];$t=u,zv(u,n)}Uv(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Qi(8,s,s.return),Ah(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ah(s));break;default:Ah(s)}n=n.sibling}}function zv(n,s){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:Qi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ql(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var f=u.sibling,g=u.return;if(Nv(u),u===o){$t=null;break e}if(f!==null){f.return=g,$t=f;break e}$t=g}}}var QA={getCacheForType:function(n){var s=ln(Ft),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},$A=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ut=null,ke=null,He=0,Je=0,zn=null,Xi=!1,wo=!1,xm=!1,yi=0,At=0,Wi=0,ca=0,Cm=0,nr=0,So=0,fu=null,Cn=null,Dm=!1,Nm=0,Rh=1/0,Ih=null,Zi=null,tn=0,Ji=null,Ao=null,Ro=0,Vm=0,Mm=null,qv=null,du=0,Om=null;function qn(){if((Ze&2)!==0&&He!==0)return He&-He;if(X.T!==null){var n=fo;return n!==0?n:qm()}return Oi()}function Fv(){nr===0&&(nr=(He&536870912)===0||$e?bl():536870912);var n=tr.current;return n!==null&&(n.flags|=32),nr}function Fn(n,s,o){(n===ut&&(Je===2||Je===9)||n.cancelPendingCommit!==null)&&(Io(n,0),es(n,He,nr,!1)),Xr(n,o),((Ze&2)===0||n!==ut)&&(n===ut&&((Ze&2)===0&&(ca|=o),At===4&&es(n,He,nr,!1)),Pr(n))}function jv(n,s,o){if((Ze&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||ks(n,s),f=u?WA(n,s):Lm(n,s,!0),g=u;do{if(f===0){wo&&!u&&es(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!YA(o)){f=Lm(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=n;f=fu;var N=w.current.memoizedState.isDehydrated;if(N&&(Io(w,E).flags|=256),E=Lm(w,E,!1),E!==2){if(xm&&!N){w.errorRecoveryDisabledLanes|=g,ca|=g,f=4;break e}g=Cn,Cn=f,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Io(n,0),es(n,s,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:es(u,s,nr,!Xi);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Nm+300-mn(),10<f)){if(es(u,s,nr,!Xi),ja(u,0,!0)!==0)break e;u.timeoutHandle=yE(Hv.bind(null,u,o,Cn,Ih,Dm,s,nr,ca,So,Xi,g,2,-0,0),f);break e}Hv(u,o,Cn,Ih,Dm,s,nr,ca,So,Xi,g,0,-0,0)}}break}while(!0);Pr(n)}function Hv(n,s,o,u,f,g,E,w,N,H,ee,ie,Q,$){if(n.timeoutHandle=-1,ie=s.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Eu={stylesheets:null,count:0,unsuspend:DR},Lv(s),ie=VR(),ie!==null)){n.cancelPendingCommit=ie(Wv.bind(null,n,s,g,o,u,f,E,w,N,ee,1,Q,$)),es(n,g,E,!H);return}Wv(n,s,g,o,u,f,E,w,N)}function YA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!kn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function es(n,s,o,u){s&=~Cm,s&=~ca,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var g=31-on(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&Er(n,o,s)}function xh(){return(Ze&6)===0?(mu(0),!1):!0}function Pm(){if(ke!==null){if(Je===0)var n=ke.return;else n=ke,ci=ia=null,Zd(n),vo=null,iu=0,n=ke;for(;n!==null;)wv(n.alternate,n),n=n.return;ke=null}}function Io(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,dR(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Pm(),ut=n,ke=o=oi(n.current,null),He=s,Je=0,zn=null,Xi=!1,wo=ks(n,s),xm=!1,So=nr=Cm=ca=Wi=At=0,Cn=fu=null,Dm=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-on(u),g=1<<f;s|=n[f],u&=~g}return yi=s,Xc(),o}function Gv(n,s){Me=null,X.H=gh,s===Yl||s===sh?(s=ly(),Je=3):s===sy?(s=ly(),Je=4):Je=s===uv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zn=s,ke===null&&(At=1,Eh(n,Wn(s,n.current)))}function Kv(){var n=X.H;return X.H=gh,n===null?gh:n}function Qv(){var n=X.A;return X.A=QA,n}function km(){At=4,Xi||(He&4194048)!==He&&tr.current!==null||(wo=!0),(Wi&134217727)===0&&(ca&134217727)===0||ut===null||es(ut,He,nr,!1)}function Lm(n,s,o){var u=Ze;Ze|=2;var f=Kv(),g=Qv();(ut!==n||He!==s)&&(Ih=null,Io(n,s)),s=!1;var E=At;e:do try{if(Je!==0&&ke!==null){var w=ke,N=zn;switch(Je){case 8:Pm(),E=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(s=!0);var H=Je;if(Je=0,zn=null,xo(n,w,N,H),o&&wo){E=0;break e}break;default:H=Je,Je=0,zn=null,xo(n,w,N,H)}}XA(),E=At;break}catch(ee){Gv(n,ee)}while(!0);return s&&n.shellSuspendCounter++,ci=ia=null,Ze=u,X.H=f,X.A=g,ke===null&&(ut=null,He=0,Xc()),E}function XA(){for(;ke!==null;)$v(ke)}function WA(n,s){var o=Ze;Ze|=2;var u=Kv(),f=Qv();ut!==n||He!==s?(Ih=null,Rh=mn()+500,Io(n,s)):wo=ks(n,s);e:do try{if(Je!==0&&ke!==null){s=ke;var g=zn;t:switch(Je){case 1:Je=0,zn=null,xo(n,s,g,1);break;case 2:case 9:if(ay(g)){Je=0,zn=null,Yv(s);break}s=function(){Je!==2&&Je!==9||ut!==n||(Je=7),Pr(n)},g.then(s,s);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:ay(g)?(Je=0,zn=null,Yv(s)):(Je=0,zn=null,xo(n,s,g,7));break;case 5:var E=null;switch(ke.tag){case 26:E=ke.memoizedState;case 5:case 27:var w=ke;if(!E||DE(E)){Je=0,zn=null;var N=w.sibling;if(N!==null)ke=N;else{var H=w.return;H!==null?(ke=H,Ch(H)):ke=null}break t}}Je=0,zn=null,xo(n,s,g,5);break;case 6:Je=0,zn=null,xo(n,s,g,6);break;case 8:Pm(),At=6;break e;default:throw Error(i(462))}}ZA();break}catch(ee){Gv(n,ee)}while(!0);return ci=ia=null,X.H=u,X.A=f,Ze=o,ke!==null?0:(ut=null,He=0,Xc(),At)}function ZA(){for(;ke!==null&&!Vs();)$v(ke)}function $v(n){var s=Tv(n.alternate,n,yi);n.memoizedProps=n.pendingProps,s===null?Ch(n):ke=s}function Yv(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=gv(o,s,s.pendingProps,s.type,void 0,He);break;case 11:s=gv(o,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Zd(s);default:wv(o,s),s=ke=X_(s,yi),s=Tv(o,s,yi)}n.memoizedProps=n.pendingProps,s===null?Ch(n):ke=s}function xo(n,s,o,u){ci=ia=null,Zd(s),vo=null,iu=0;var f=s.return;try{if(qA(n,f,s,o,He)){At=1,Eh(n,Wn(o,n.current)),ke=null;return}}catch(g){if(f!==null)throw ke=f,g;At=1,Eh(n,Wn(o,n.current)),ke=null;return}s.flags&32768?($e||u===1?n=!0:wo||(He&536870912)!==0?n=!1:(Xi=n=!0,(u===2||u===9||u===3||u===6)&&(u=tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xv(s,n)):Ch(s)}function Ch(n){var s=n;do{if((s.flags&32768)!==0){Xv(s,Xi);return}n=s.return;var o=jA(s.alternate,s,yi);if(o!==null){ke=o;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=n}while(s!==null);At===0&&(At=5)}function Xv(n,s){do{var o=HA(n.alternate,n);if(o!==null){o.flags&=32767,ke=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){ke=n;return}ke=n=o}while(n!==null);At=6,ke=null}function Wv(n,s,o,u,f,g,E,w,N){n.cancelPendingCommit=null;do Dh();while(tn!==0);if((Ze&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Id,Sl(n,o,g,E,w,N),n===ut&&(ke=ut=null,He=0),Ao=s,Ji=n,Ro=o,Vm=g,Mm=f,qv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,nR(Ye,function(){return nE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=re.p,re.p=2,E=Ze,Ze|=4;try{GA(n,s,o)}finally{Ze=E,re.p=f,X.T=u}}tn=1,Zv(),Jv(),eE()}}function Zv(){if(tn===1){tn=0;var n=Ji,s=Ao,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=re.p;re.p=2;var f=Ze;Ze|=4;try{Ov(s,n);var g=Ym,E=z_(n.containerInfo),w=g.focusedElem,N=g.selectionRange;if(E!==w&&w&&w.ownerDocument&&B_(w.ownerDocument.documentElement,w)){if(N!==null&&bd(w)){var H=N.start,ee=N.end;if(ee===void 0&&(ee=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(ee,w.value.length);else{var ie=w.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var $=Q.getSelection(),Re=w.textContent.length,we=Math.min(N.start,Re),st=N.end===void 0?we:Math.min(N.end,Re);!$.extend&&we>st&&(E=st,st=we,we=E);var B=U_(w,we),L=U_(w,st);if(B&&L&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==L.node||$.focusOffset!==L.offset)){var j=ie.createRange();j.setStart(B.node,B.offset),$.removeAllRanges(),we>st?($.addRange(j),$.extend(L.node,L.offset)):(j.setEnd(L.node,L.offset),$.addRange(j))}}}}for(ie=[],$=w;$=$.parentNode;)$.nodeType===1&&ie.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ie.length;w++){var ne=ie[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Fh=!!$m,Ym=$m=null}finally{Ze=f,re.p=u,X.T=o}}n.current=s,tn=2}}function Jv(){if(tn===2){tn=0;var n=Ji,s=Ao,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=re.p;re.p=2;var f=Ze;Ze|=4;try{Dv(n,s.alternate,s)}finally{Ze=f,re.p=u,X.T=o}}tn=3}}function eE(){if(tn===4||tn===3){tn=0,qa();var n=Ji,s=Ao,o=Ro,u=qv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,Ao=Ji=null,tE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Zi=null),Ha(o),s=s.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=re.p,re.p=2,X.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var w=u[E];g(w.value,{componentStack:w.stack})}}finally{X.T=s,re.p=f}}(Ro&3)!==0&&Dh(),Pr(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Om?du++:(du=0,Om=n):du=0,mu(0)}}function tE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ql(s)))}function Dh(n){return Zv(),Jv(),eE(),nE()}function nE(){if(tn!==5)return!1;var n=Ji,s=Vm;Vm=0;var o=Ha(Ro),u=X.T,f=re.p;try{re.p=32>o?32:o,X.T=null,o=Mm,Mm=null;var g=Ji,E=Ro;if(tn=0,Ao=Ji=null,Ro=0,(Ze&6)!==0)throw Error(i(331));var w=Ze;if(Ze|=4,Bv(g.current),kv(g,g.current,E,o),Ze=w,mu(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{re.p=f,X.T=u,tE(n,s)}}function rE(n,s,o){s=Wn(o,s),s=fm(n.stateNode,s,2),n=ji(n,s,2),n!==null&&(Xr(n,2),Pr(n))}function lt(n,s,o){if(n.tag===3)rE(n,n,o);else for(;s!==null;){if(s.tag===3){rE(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zi===null||!Zi.has(u))){n=Wn(o,n),o=ov(2),u=ji(s,o,2),u!==null&&(lv(o,u,s,n),Xr(u,2),Pr(u));break}}s=s.return}}function Um(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new $A;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(xm=!0,f.add(o),n=JA.bind(null,n,s,o),s.then(n,n))}function JA(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ut===n&&(He&o)===o&&(At===4||At===3&&(He&62914560)===He&&300>mn()-Nm?(Ze&2)===0&&Io(n,0):Cm|=o,So===He&&(So=0)),Pr(n)}function iE(n,s){s===0&&(s=wl()),n=lo(n,s),n!==null&&(Xr(n,s),Pr(n))}function eR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),iE(n,o)}function tR(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),iE(n,o)}function nR(n,s){return Kr(n,s)}var Nh=null,Co=null,Bm=!1,Vh=!1,zm=!1,ha=0;function Pr(n){n!==Co&&n.next===null&&(Co===null?Nh=Co=n:Co=Co.next=n),Vh=!0,Bm||(Bm=!0,iR())}function mu(n,s){if(!zm&&Vh){zm=!0;do for(var o=!1,u=Nh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-on(42|n)+1)-1,g&=f&~(E&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,lE(u,g))}else g=He,g=ja(u,u===ut?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||ks(u,g)||(o=!0,lE(u,g));u=u.next}while(o);zm=!1}}function rR(){sE()}function sE(){Vh=Bm=!1;var n=0;ha!==0&&(fR()&&(n=ha),ha=0);for(var s=mn(),o=null,u=Nh;u!==null;){var f=u.next,g=aE(u,s);g===0?(u.next=null,o===null?Nh=f:o.next=f,f===null&&(Co=o)):(o=u,(n!==0||(g&3)!==0)&&(Vh=!0)),u=f}mu(n)}function aE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-on(g),w=1<<E,N=f[E];N===-1?((w&o)===0||(w&u)!==0)&&(f[E]=Tl(w,s)):N<=s&&(n.expiredLanes|=w),g&=~w}if(s=ut,o=He,o=ja(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Je===2||Je===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Qr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ks(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Qr(u),Ha(o)){case 2:case 8:o=Pe;break;case 32:o=Ye;break;case 268435456:o=Gn;break;default:o=Ye}return u=oE.bind(null,n),o=Kr(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Qr(u),n.callbackPriority=2,n.callbackNode=null,2}function oE(n,s){if(tn!==0&&tn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Dh()&&n.callbackNode!==o)return null;var u=He;return u=ja(n,n===ut?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(jv(n,u,s),aE(n,mn()),n.callbackNode!=null&&n.callbackNode===o?oE.bind(null,n):null)}function lE(n,s){if(Dh())return null;jv(n,s,!0)}function iR(){mR(function(){(Ze&6)!==0?Kr(Ne,rR):sE()})}function qm(){return ha===0&&(ha=bl()),ha}function uE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Xa(""+n)}function cE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function sR(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var g=uE((f[Ot]||null).action),E=u.submitter;E&&(s=(s=E[Ot]||null)?uE(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var w=new Wa("action","action",null,u,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ha!==0){var N=E?cE(f,E):new FormData(f);om(o,{pending:!0,data:N,method:f.method,action:g},null,N)}}else typeof g=="function"&&(w.preventDefault(),N=E?cE(f,E):new FormData(f),om(o,{pending:!0,data:N,method:f.method,action:g},g,N))},currentTarget:f}]})}}for(var Fm=0;Fm<Rd.length;Fm++){var jm=Rd[Fm],aR=jm.toLowerCase(),oR=jm[0].toUpperCase()+jm.slice(1);dr(aR,"on"+oR)}dr(j_,"onAnimationEnd"),dr(H_,"onAnimationIteration"),dr(G_,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(SA,"onTransitionRun"),dr(AA,"onTransitionStart"),dr(RA,"onTransitionCancel"),dr(K_,"onTransitionEnd"),Zr("onMouseEnter",["mouseout","mouseover"]),Zr("onMouseLeave",["mouseout","mouseover"]),Zr("onPointerEnter",["pointerout","pointerover"]),Zr("onPointerLeave",["pointerout","pointerover"]),hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hr("onBeforeInput",["compositionend","keypress","textInput","paste"]),hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function hE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var w=u[E],N=w.instance,H=w.currentTarget;if(w=w.listener,N!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=H;try{g(f)}catch(ee){vh(ee)}f.currentTarget=null,g=N}else for(E=0;E<u.length;E++){if(w=u[E],N=w.instance,H=w.currentTarget,w=w.listener,N!==g&&f.isPropagationStopped())break e;g=w,f.currentTarget=H;try{g(f)}catch(ee){vh(ee)}f.currentTarget=null,g=N}}}}function Le(n,s){var o=s[Rl];o===void 0&&(o=s[Rl]=new Set);var u=n+"__bubble";o.has(u)||(fE(s,n,2,!1),o.add(u))}function Hm(n,s,o){var u=0;s&&(u|=4),fE(o,n,u,s)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function Gm(n){if(!n[Mh]){n[Mh]=!0,Il.forEach(function(o){o!=="selectionchange"&&(lR.has(o)||Hm(o,!1,n),Hm(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Mh]||(s[Mh]=!0,Hm("selectionchange",!1,s))}}function fE(n,s,o,u){switch(kE(s)){case 2:var f=PR;break;case 8:f=kR;break;default:f=sg}o=f.bind(null,s,o,n),f=void 0,!Yn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Km(n,s,o,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var w=u.stateNode.containerInfo;if(w===f)break;if(E===4)for(E=u.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;w!==null;){if(E=Wr(w),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){u=g=E;continue e}w=w.parentNode}}u=u.return}Pc(function(){var H=g,ee=$n(o),ie=[];e:{var Q=Q_.get(n);if(Q!==void 0){var $=Wa,Re=n;switch(n){case"keypress":if(Rr(o)===0)break e;case"keydown":case"keyup":$=ro;break;case"focusin":Re="focus",$=eo;break;case"focusout":Re="blur",$=eo;break;case"beforeblur":case"afterblur":$=eo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=jc;break;case j_:case H_:case G_:$=to;break;case K_:$=Gc;break;case"scroll":case"scrollend":$=kc;break;case"wheel":$=io;break;case"copy":case"cut":case"paste":$=no;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Bl;break;case"toggle":case"beforetoggle":$=Qc}var we=(s&4)!==0,st=!we&&(n==="scroll"||n==="scrollend"),B=we?Q!==null?Q+"Capture":null:Q;we=[];for(var L=H,j;L!==null;){var ne=L;if(j=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||j===null||B===null||(ne=Hs(L,B),ne!=null&&we.push(pu(L,ne,j))),st)break;L=L.return}0<we.length&&(Q=new $(Q,Re,null,o,ee),ie.push({event:Q,listeners:we}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",Q&&o!==ti&&(Re=o.relatedTarget||o.fromElement)&&(Wr(Re)||Re[Kn]))break e;if(($||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,$?(Re=o.relatedTarget||o.toElement,$=H,Re=Re?Wr(Re):null,Re!==null&&(st=l(Re),we=Re.tag,Re!==st||we!==5&&we!==27&&we!==6)&&(Re=null)):($=null,Re=H),$!==Re)){if(we=Xn,ne="onMouseLeave",B="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(we=Bl,ne="onPointerLeave",B="onPointerEnter",L="pointer"),st=$==null?Q:br($),j=Re==null?Q:br(Re),Q=new we(ne,L+"leave",$,o,ee),Q.target=st,Q.relatedTarget=j,ne=null,Wr(ee)===H&&(we=new we(B,L+"enter",Re,o,ee),we.target=j,we.relatedTarget=st,ne=we),st=ne,$&&Re)t:{for(we=$,B=Re,L=0,j=we;j;j=Do(j))L++;for(j=0,ne=B;ne;ne=Do(ne))j++;for(;0<L-j;)we=Do(we),L--;for(;0<j-L;)B=Do(B),j--;for(;L--;){if(we===B||B!==null&&we===B.alternate)break t;we=Do(we),B=Do(B)}we=null}else we=null;$!==null&&dE(ie,Q,$,we,!1),Re!==null&&st!==null&&dE(ie,st,Re,we,!0)}}e:{if(Q=H?br(H):window,$=Q.nodeName&&Q.nodeName.toLowerCase(),$==="select"||$==="input"&&Q.type==="file")var _e=V_;else if(qt(Q))if(M_)_e=TA;else{_e=vA;var Oe=yA}else $=Q.nodeName,!$||$.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?H&&Vl(H.elementType)&&(_e=V_):_e=EA;if(_e&&(_e=_e(n,H))){ai(ie,_e,o,ee);break e}Oe&&Oe(n,Q,H),n==="focusout"&&H&&Q.type==="number"&&H.memoizedProps.value!=null&&Ui(Q,"number",Q.value)}switch(Oe=H?br(H):window,n){case"focusin":(qt(Oe)||Oe.contentEditable==="true")&&(so=Oe,wd=H,Fl=null);break;case"focusout":Fl=wd=so=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,q_(ie,o,ee);break;case"selectionchange":if(wA)break;case"keydown":case"keyup":q_(ie,o,ee)}var Te;if(Cr)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Fe?Z(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(v&&o.locale!=="ko"&&(Fe||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Fe&&(Te=Ol()):(Ar=ee,Bi="value"in Ar?Ar.value:Ar.textContent,Fe=!0)),Oe=Oh(H,Se),0<Oe.length&&(Se=new Ll(Se,n,null,o,ee),ie.push({event:Se,listeners:Oe}),Te?Se.data=Te:(Te=he(o),Te!==null&&(Se.data=Te)))),(Te=_?zt(n,o):je(n,o))&&(Se=Oh(H,"onBeforeInput"),0<Se.length&&(Oe=new Ll("onBeforeInput","beforeinput",null,o,ee),ie.push({event:Oe,listeners:Se}),Oe.data=Te)),sR(ie,n,H,o,ee)}hE(ie,s)})}function pu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Oh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Hs(n,o),f!=null&&u.unshift(pu(n,f,g)),f=Hs(n,s),f!=null&&u.push(pu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function Do(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function dE(n,s,o,u,f){for(var g=s._reactName,E=[];o!==null&&o!==u;){var w=o,N=w.alternate,H=w.stateNode;if(w=w.tag,N!==null&&N===u)break;w!==5&&w!==26&&w!==27||H===null||(N=H,f?(H=Hs(o,g),H!=null&&E.unshift(pu(o,H,N))):f||(H=Hs(o,g),H!=null&&E.push(pu(o,H,N)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var uR=/\r\n?/g,cR=/\u0000|\uFFFD/g;function mE(n){return(typeof n=="string"?n:""+n).replace(uR,`
`).replace(cR,"")}function gE(n,s){return s=mE(s),mE(n)===s}function Ph(){}function it(n,s,o,u,f,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Qn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Qn(n,""+u);break;case"className":wr(n,"class",u);break;case"tabIndex":wr(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(n,o,u);break;case"style":Nl(n,u,g);break;case"data":if(s!=="object"){wr(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&it(n,s,"name",f.name,f,null),it(n,s,"formEncType",f.formEncType,f,null),it(n,s,"formMethod",f.formMethod,f,null),it(n,s,"formTarget",f.formTarget,f,null)):(it(n,s,"encType",f.encType,f,null),it(n,s,"method",f.method,f,null),it(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Xa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Ph);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Xa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Li(n,"popover",u);break;case"xlinkActuate":Zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Li(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pd.get(o)||o,Li(n,o,u))}}function Qm(n,s,o,u,f,g){switch(o){case"style":Nl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Qn(n,u):(typeof u=="number"||typeof u=="bigint")&&Qn(n,""+u);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Ph);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ga.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[Ot]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Li(n,o,u)}}}function nn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(n,s,g,E,o,null)}}f&&it(n,s,"srcSet",o.srcSet,o,null),u&&it(n,s,"src",o.src,o,null);return;case"input":Le("invalid",n);var w=g=E=f=null,N=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var ee=o[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":E=ee;break;case"checked":N=ee;break;case"defaultChecked":H=ee;break;case"value":g=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:it(n,s,u,ee,o,null)}}qs(n,g,w,N,H,E,f,!1),Ya(n);return;case"select":Le("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":E=w;break;case"multiple":u=w;default:it(n,s,f,w,o,null)}s=g,o=E,n.multiple=!!u,s!=null?ei(n,!!u,s,!1):o!=null&&ei(n,!!u,o,!0);return;case"textarea":Le("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":u=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:it(n,s,E,w,o,null)}Fs(n,u,f,g),Ya(n);return;case"option":for(N in o)if(o.hasOwnProperty(N)&&(u=o[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:it(n,s,N,u,o,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(u=0;u<gu.length;u++)Le(gu[u],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(n,s,H,u,o,null)}return;default:if(Vl(s)){for(ee in o)o.hasOwnProperty(ee)&&(u=o[ee],u!==void 0&&Qm(n,s,ee,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&it(n,s,w,u,o,null))}function hR(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,w=null,N=null,H=null,ee=null;for($ in o){var ie=o[$];if(o.hasOwnProperty($)&&ie!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=ie;default:u.hasOwnProperty($)||it(n,s,$,null,u,ie)}}for(var Q in u){var $=u[Q];if(ie=o[Q],u.hasOwnProperty(Q)&&($!=null||ie!=null))switch(Q){case"type":g=$;break;case"name":f=$;break;case"checked":H=$;break;case"defaultChecked":ee=$;break;case"value":E=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$!==ie&&it(n,s,Q,$,u,ie)}}Pn(n,E,w,N,H,ee,g,f);return;case"select":$=E=w=Q=null;for(g in o)if(N=o[g],o.hasOwnProperty(g)&&N!=null)switch(g){case"value":break;case"multiple":$=N;default:u.hasOwnProperty(g)||it(n,s,g,null,u,N)}for(f in u)if(g=u[f],N=o[f],u.hasOwnProperty(f)&&(g!=null||N!=null))switch(f){case"value":Q=g;break;case"defaultValue":w=g;break;case"multiple":E=g;default:g!==N&&it(n,s,f,g,u,N)}s=w,o=E,u=$,Q!=null?ei(n,!!o,Q,!1):!!u!=!!o&&(s!=null?ei(n,!!o,s,!0):ei(n,!!o,o?[]:"",!1));return;case"textarea":$=Q=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:it(n,s,w,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":Q=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&it(n,s,E,f,u,g)}nt(n,Q,$);return;case"option":for(var Re in o)if(Q=o[Re],o.hasOwnProperty(Re)&&Q!=null&&!u.hasOwnProperty(Re))switch(Re){case"selected":n.selected=!1;break;default:it(n,s,Re,null,u,Q)}for(N in u)if(Q=u[N],$=o[N],u.hasOwnProperty(N)&&Q!==$&&(Q!=null||$!=null))switch(N){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:it(n,s,N,Q,u,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)Q=o[we],o.hasOwnProperty(we)&&Q!=null&&!u.hasOwnProperty(we)&&it(n,s,we,null,u,Q);for(H in u)if(Q=u[H],$=o[H],u.hasOwnProperty(H)&&Q!==$&&(Q!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:it(n,s,H,Q,u,$)}return;default:if(Vl(s)){for(var st in o)Q=o[st],o.hasOwnProperty(st)&&Q!==void 0&&!u.hasOwnProperty(st)&&Qm(n,s,st,void 0,u,Q);for(ee in u)Q=u[ee],$=o[ee],!u.hasOwnProperty(ee)||Q===$||Q===void 0&&$===void 0||Qm(n,s,ee,Q,u,$);return}}for(var B in o)Q=o[B],o.hasOwnProperty(B)&&Q!=null&&!u.hasOwnProperty(B)&&it(n,s,B,null,u,Q);for(ie in u)Q=u[ie],$=o[ie],!u.hasOwnProperty(ie)||Q===$||Q==null&&$==null||it(n,s,ie,Q,u,$)}var $m=null,Ym=null;function kh(n){return n.nodeType===9?n:n.ownerDocument}function pE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _E(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Xm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wm=null;function fR(){var n=window.event;return n&&n.type==="popstate"?n===Wm?!1:(Wm=n,!0):(Wm=null,!1)}var yE=typeof setTimeout=="function"?setTimeout:void 0,dR=typeof clearTimeout=="function"?clearTimeout:void 0,vE=typeof Promise=="function"?Promise:void 0,mR=typeof queueMicrotask=="function"?queueMicrotask:typeof vE<"u"?function(n){return vE.resolve(null).then(n).catch(gR)}:yE;function gR(n){setTimeout(function(){throw n})}function ts(n){return n==="head"}function EE(n,s){var o=s,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&_u(E.documentElement),o&2&&_u(E.body),o&4)for(o=E.head,_u(o),E=o.firstChild;E;){var w=E.nextSibling,N=E.nodeName;E[Ls]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=w}}if(f===0){n.removeChild(g),Au(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Au(s)}function Zm(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zm(o),ki(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function pR(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ls])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=gr(n.nextSibling),n===null)break}return null}function _R(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=gr(n.nextSibling),n===null))return null;return n}function Jm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function yR(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function gr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var eg=null;function TE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function bE(n,s,o){switch(s=kh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function _u(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);ki(n)}var rr=new Map,wE=new Set;function Lh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var vi=re.d;re.d={f:vR,r:ER,D:TR,C:bR,L:wR,m:SR,X:RR,S:AR,M:IR};function vR(){var n=vi.f(),s=xh();return n||s}function ER(n){var s=Tr(n);s!==null&&s.tag===5&&s.type==="form"?jy(s):vi.r(n)}var No=typeof document>"u"?null:document;function SE(n,s,o){var u=No;if(u&&typeof s=="string"&&s){var f=Pt(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),wE.has(f)||(wE.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),nn(s,"link",n),It(s),u.head.appendChild(s)))}}function TR(n){vi.D(n),SE("dns-prefetch",n,null)}function bR(n,s){vi.C(n,s),SE("preconnect",n,s)}function wR(n,s,o){vi.L(n,s,o);var u=No;if(u&&n&&s){var f='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pt(o.imageSizes)+'"]')):f+='[href="'+Pt(n)+'"]';var g=f;switch(s){case"style":g=Vo(n);break;case"script":g=Mo(n)}rr.has(g)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),rr.set(g,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(yu(g))||s==="script"&&u.querySelector(vu(g))||(s=u.createElement("link"),nn(s,"link",n),It(s),u.head.appendChild(s)))}}function SR(n,s){vi.m(n,s);var o=No;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pt(u)+'"][href="'+Pt(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Mo(n)}if(!rr.has(g)&&(n=y({rel:"modulepreload",href:n},s),rr.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(vu(g)))return}u=o.createElement("link"),nn(u,"link",n),It(u),o.head.appendChild(u)}}}function AR(n,s,o){vi.S(n,s,o);var u=No;if(u&&n){var f=pn(u).hoistableStyles,g=Vo(n);s=s||"default";var E=f.get(g);if(!E){var w={loading:0,preload:null};if(E=u.querySelector(yu(g)))w.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=rr.get(g))&&tg(n,o);var N=E=u.createElement("link");It(N),nn(N,"link",n),N._p=new Promise(function(H,ee){N.onload=H,N.onerror=ee}),N.addEventListener("load",function(){w.loading|=1}),N.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Uh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(g,E)}}}function RR(n,s){vi.X(n,s);var o=No;if(o&&n){var u=pn(o).hoistableScripts,f=Mo(n),g=u.get(f);g||(g=o.querySelector(vu(f)),g||(n=y({src:n,async:!0},s),(s=rr.get(f))&&ng(n,s),g=o.createElement("script"),It(g),nn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function IR(n,s){vi.M(n,s);var o=No;if(o&&n){var u=pn(o).hoistableScripts,f=Mo(n),g=u.get(f);g||(g=o.querySelector(vu(f)),g||(n=y({src:n,async:!0,type:"module"},s),(s=rr.get(f))&&ng(n,s),g=o.createElement("script"),It(g),nn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function AE(n,s,o,u){var f=(f=Ae.current)?Lh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Vo(o.href),o=pn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Vo(o.href);var g=pn(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(yu(n)))&&!g._p&&(E.instance=g,E.state.loading=5),rr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},rr.set(n,o),g||xR(f,n,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Mo(o),o=pn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Vo(n){return'href="'+Pt(n)+'"'}function yu(n){return'link[rel="stylesheet"]['+n+"]"}function RE(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function xR(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",o),It(s),n.head.appendChild(s))}function Mo(n){return'[src="'+Pt(n)+'"]'}function vu(n){return"script[async]"+n}function IE(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Pt(o.href)+'"]');if(u)return s.instance=u,It(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),It(u),nn(u,"style",f),Uh(u,o.precedence,n),s.instance=u;case"stylesheet":f=Vo(o.href);var g=n.querySelector(yu(f));if(g)return s.state.loading|=4,s.instance=g,It(g),g;u=RE(o),(f=rr.get(f))&&tg(u,f),g=(n.ownerDocument||n).createElement("link"),It(g);var E=g;return E._p=new Promise(function(w,N){E.onload=w,E.onerror=N}),nn(g,"link",u),s.state.loading|=4,Uh(g,o.precedence,n),s.instance=g;case"script":return g=Mo(o.src),(f=n.querySelector(vu(g)))?(s.instance=f,It(f),f):(u=o,(f=rr.get(g))&&(u=y({},o),ng(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),It(f),nn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Uh(u,o.precedence,n));return s.instance}function Uh(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var w=u[E];if(w.dataset.precedence===s)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function tg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function ng(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Bh=null;function xE(n,s,o){if(Bh===null){var u=new Map,f=Bh=new Map;f.set(o,u)}else f=Bh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Ls]||g[Bt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=n+E;var w=u.get(E);w?w.push(g):u.set(E,[g])}}return u}function CE(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function CR(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function DE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Eu=null;function DR(){}function NR(n,s,o){if(Eu===null)throw Error(i(475));var u=Eu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Vo(o.href),g=n.querySelector(yu(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=zh.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=g,It(g);return}g=n.ownerDocument||n,o=RE(o),(f=rr.get(f))&&tg(o,f),g=g.createElement("link"),It(g);var E=g;E._p=new Promise(function(w,N){E.onload=w,E.onerror=N}),nn(g,"link",o),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=zh.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function VR(){if(Eu===null)throw Error(i(475));var n=Eu;return n.stylesheets&&n.count===0&&rg(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&rg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function zh(){if(this.count--,this.count===0){if(this.stylesheets)rg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var qh=null;function rg(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,qh=new Map,s.forEach(MR,n),qh=null,zh.call(n))}function MR(n,s){if(!(s.state.loading&4)){var o=qh.get(n);if(o)var u=o.get(null);else{o=new Map,qh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=zh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var Tu={$$typeof:K,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function OR(n,s,o,u,f,g,E,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function NE(n,s,o,u,f,g,E,w,N,H,ee,ie){return n=new OR(n,s,o,E,w,N,H,ie),s=1,g===!0&&(s|=24),g=Ln(3,null,null,s),n.current=g,g.stateNode=n,s=Ud(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},Fd(g),n}function VE(n){return n?(n=uo,n):uo}function ME(n,s,o,u,f,g){f=VE(f),u.context===null?u.context=f:u.pendingContext=f,u=Fi(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ji(n,u,s),o!==null&&(Fn(o,n,s),Wl(o,n,s))}function OE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function ig(n,s){OE(n,s),(n=n.alternate)&&OE(n,s)}function PE(n){if(n.tag===13){var s=lo(n,67108864);s!==null&&Fn(s,n,67108864),ig(n,67108864)}}var Fh=!0;function PR(n,s,o,u){var f=X.T;X.T=null;var g=re.p;try{re.p=2,sg(n,s,o,u)}finally{re.p=g,X.T=f}}function kR(n,s,o,u){var f=X.T;X.T=null;var g=re.p;try{re.p=8,sg(n,s,o,u)}finally{re.p=g,X.T=f}}function sg(n,s,o,u){if(Fh){var f=ag(u);if(f===null)Km(n,s,u,jh,o),LE(n,u);else if(UR(f,n,s,o,u))u.stopPropagation();else if(LE(n,u),s&4&&-1<LR.indexOf(n)){for(;f!==null;){var g=Tr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=cr(g.pendingLanes);if(E!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var N=1<<31-on(E);w.entanglements[1]|=N,E&=~N}Pr(g),(Ze&6)===0&&(Rh=mn()+500,mu(0))}}break;case 13:w=lo(g,2),w!==null&&Fn(w,g,2),xh(),ig(g,2)}if(g=ag(u),g===null&&Km(n,s,u,jh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else Km(n,s,u,null,o)}}function ag(n){return n=$n(n),og(n)}var jh=null;function og(n){if(jh=null,n=Wr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return jh=n,null}function kE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fa()){case Ne:return 2;case Pe:return 8;case Ye:case gn:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var lg=!1,ns=null,rs=null,is=null,bu=new Map,wu=new Map,ss=[],LR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LE(n,s){switch(n){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":bu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(s.pointerId)}}function Su(n,s,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Tr(s),s!==null&&PE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function UR(n,s,o,u,f){switch(s){case"focusin":return ns=Su(ns,n,s,o,u,f),!0;case"dragenter":return rs=Su(rs,n,s,o,u,f),!0;case"mouseover":return is=Su(is,n,s,o,u,f),!0;case"pointerover":var g=f.pointerId;return bu.set(g,Su(bu.get(g)||null,n,s,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,wu.set(g,Su(wu.get(g)||null,n,s,o,u,f)),!0}return!1}function UE(n){var s=Wr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,xc(n.priority,function(){if(o.tag===13){var u=qn();u=Mi(u);var f=lo(o,u);f!==null&&Fn(f,o,u),ig(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=ag(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ti=u,o.target.dispatchEvent(u),ti=null}else return s=Tr(o),s!==null&&PE(s),n.blockedOn=o,!1;s.shift()}return!0}function BE(n,s,o){Hh(n)&&o.delete(s)}function BR(){lg=!1,ns!==null&&Hh(ns)&&(ns=null),rs!==null&&Hh(rs)&&(rs=null),is!==null&&Hh(is)&&(is=null),bu.forEach(BE),wu.forEach(BE)}function Gh(n,s){n.blockedOn===s&&(n.blockedOn=null,lg||(lg=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,BR)))}var Kh=null;function zE(n){Kh!==n&&(Kh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Kh===n&&(Kh=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(og(u||o)===null)continue;break}var g=Tr(o);g!==null&&(n.splice(s,3),s-=3,om(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Au(n){function s(N){return Gh(N,n)}ns!==null&&Gh(ns,n),rs!==null&&Gh(rs,n),is!==null&&Gh(is,n),bu.forEach(s),wu.forEach(s);for(var o=0;o<ss.length;o++){var u=ss[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ss.length&&(o=ss[0],o.blockedOn===null);)UE(o),o.blockedOn===null&&ss.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Ot]||null;if(typeof g=="function")E||zE(o);else if(E){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Ot]||null)w=E.formAction;else if(og(f)!==null)continue}else w=E.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),zE(o)}}}function ug(n){this._internalRoot=n}Qh.prototype.render=ug.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=qn();ME(o,u,n,s,null,null)},Qh.prototype.unmount=ug.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ME(n.current,2,null,n,null,null),xh(),s[Kn]=null}};function Qh(n){this._internalRoot=n}Qh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Oi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ss.length&&s!==0&&s<ss[o].priority;o++);ss.splice(o,0,n),o===0&&UE(n)}};var qE=e.version;if(qE!=="19.1.0")throw Error(i(527,qE,"19.1.0"));re.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=m(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var zR={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{wt=$h.inject(zR),We=$h}catch{}}return Ru.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=rv,g=iv,E=sv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=NE(n,1,!1,null,null,o,u,f,g,E,w,null),n[Kn]=s.current,Gm(n),new ug(s)},Ru.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",g=rv,E=iv,w=sv,N=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(N=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=NE(n,1,!0,s,o??null,u,f,g,E,w,N,H),s.context=VE(null),o=s.current,u=qn(),u=Mi(u),f=Fi(u),f.callback=null,ji(o,f,u),o=u,s.current.lanes=o,Xr(s,o),Pr(s),n[Kn]=s.current,Gm(n),new Qh(s)},Ru.version="19.1.0",Ru}var YE;function $R(){if(YE)return hg.exports;YE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hg.exports=QR(),hg.exports}var YR=$R();const XR=BT(YR);var Iu={},XE;function WR(){if(XE)return Iu;XE=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.parse=c,Iu.serialize=p;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,D){const M=new l,z=b.length;if(z<2)return M;const U=(D==null?void 0:D.decode)||y;let Y=0;do{const J=b.indexOf("=",Y);if(J===-1)break;const K=b.indexOf(";",Y),ue=K===-1?z:K;if(J>ue){Y=b.lastIndexOf(";",J-1)+1;continue}const oe=d(b,Y,J),pe=m(b,J,oe),I=b.slice(oe,pe);if(M[I]===void 0){let S=d(b,J+1,ue),R=m(b,ue,S);const O=U(b.slice(S,R));M[I]=O}Y=ue+1}while(Y<z);return M}function d(b,D,M){do{const z=b.charCodeAt(D);if(z!==32&&z!==9)return D}while(++D<M);return M}function m(b,D,M){for(;D>M;){const z=b.charCodeAt(--D);if(z!==32&&z!==9)return D+1}return M}function p(b,D,M){const z=(M==null?void 0:M.encode)||encodeURIComponent;if(!r.test(b))throw new TypeError(`argument name is invalid: ${b}`);const U=z(D);if(!e.test(U))throw new TypeError(`argument val is invalid: ${D}`);let Y=b+"="+U;if(!M)return Y;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);Y+="; Max-Age="+M.maxAge}if(M.domain){if(!t.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);Y+="; Domain="+M.domain}if(M.path){if(!i.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);Y+="; Path="+M.path}if(M.expires){if(!T(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);Y+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(Y+="; HttpOnly"),M.secure&&(Y+="; Secure"),M.partitioned&&(Y+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return Y}function y(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function T(b){return a.call(b)==="[object Date]"}return Iu}WR();var WE="popstate";function ZR(r={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=Pa(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vg("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");d=p===-1?m:m.slice(0,p)}return d+"#"+(typeof l=="string"?l:Ku(l))}function i(a,l){lr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return eI(e,t,i,r)}function yt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function lr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JR(){return Math.random().toString(36).substring(2,10)}function ZE(r,e){return{usr:r.state,key:r.key,idx:e}}function Vg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Pa(e):e,state:t,key:e&&e.key||i||JR()}}function Ku({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Pa(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function eI(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=y(),Y=U==null?null:U-p;p=U,m&&m({action:d,location:z.location,delta:Y})}function b(U,Y){d="PUSH";let J=Vg(z.location,U,Y);t&&t(J,U),p=y()+1;let K=ZE(J,p),ue=z.createHref(J);try{c.pushState(K,"",ue)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;a.location.assign(ue)}l&&m&&m({action:d,location:z.location,delta:1})}function D(U,Y){d="REPLACE";let J=Vg(z.location,U,Y);t&&t(J,U),p=y();let K=ZE(J,p),ue=z.createHref(J);c.replaceState(K,"",ue),l&&m&&m({action:d,location:z.location,delta:0})}function M(U){return tI(U)}let z={get action(){return d},get location(){return r(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(WE,T),m=U,()=>{a.removeEventListener(WE,T),m=null}},createHref(U){return e(a,U)},createURL:M,encodeLocation(U){let Y=M(U);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:b,replace:D,go(U){return c.go(U)}};return z}function tI(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Ku(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function zT(r,e,t="/"){return nI(r,e,t,!1)}function nI(r,e,t,i){let a=typeof e=="string"?Pa(e):e,l=Si(a.pathname||"/",t);if(l==null)return null;let c=qT(r);rI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=mI(l);d=fI(c[m],p,i)}return d}function qT(r,e=[],t=[],i=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(yt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=bi([i,m.relativePath]),y=t.concat(m);l.children&&l.children.length>0&&(yt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),qT(l.children,e,y,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:cI(p,l.index),routesMeta:y})};return r.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,c);else for(let m of FT(l.path))a(l,c,m)}),e}function FT(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=FT(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>r.startsWith("/")&&m===""?"/":m)}function rI(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:hI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var iI=/^:[\w-]+$/,sI=3,aI=2,oI=1,lI=10,uI=-2,JE=r=>r==="*";function cI(r,e){let t=r.split("/"),i=t.length;return t.some(JE)&&(i+=uI),e&&(i+=aI),t.filter(a=>!JE(a)).reduce((a,l)=>a+(iI.test(l)?sI:l===""?oI:lI),i)}function hI(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function fI(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",T=pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!T&&p&&t&&!i[i.length-1].route.index&&(T=pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:bi([l,T.pathname]),pathnameBase:yI(bi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=bi([l,T.pathnameBase]))}return c}function pf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=dI(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:T},b)=>{if(y==="*"){let M=d[b]||"";c=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const D=d[b];return T&&!D?p[y]=void 0:p[y]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:r}}function dI(r,e=!1,t=!0){lr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function mI(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Si(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function gI(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?Pa(r):r;return{pathname:t?t.startsWith("/")?t:pI(t,e):e,search:vI(i),hash:EI(a)}}function pI(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function gg(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _I(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cp(r){let e=_I(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function hp(r,e,t,i=!1){let a;typeof r=="string"?a=Pa(r):(a={...r},yt(!a.pathname||!a.pathname.includes("?"),gg("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),gg("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),gg("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=gI(a,d),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var bi=r=>r.join("/").replace(/\/\/+/g,"/"),yI=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),vI=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,EI=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function TI(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var jT=["POST","PUT","PATCH","DELETE"];new Set(jT);var bI=["GET",...jT];new Set(bI);var ul=q.createContext(null);ul.displayName="DataRouter";var Pf=q.createContext(null);Pf.displayName="DataRouterState";var HT=q.createContext({isTransitioning:!1});HT.displayName="ViewTransition";var wI=q.createContext(new Map);wI.displayName="Fetchers";var SI=q.createContext(null);SI.displayName="Await";var _r=q.createContext(null);_r.displayName="Navigation";var cc=q.createContext(null);cc.displayName="Location";var yr=q.createContext({outlet:null,matches:[],isDataRoute:!1});yr.displayName="Route";var fp=q.createContext(null);fp.displayName="RouteError";function AI(r,{relative:e}={}){yt(cl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=q.useContext(_r),{hash:a,pathname:l,search:c}=fc(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:bi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function cl(){return q.useContext(cc)!=null}function As(){return yt(cl(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(cc).location}var GT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KT(r){q.useContext(_r).static||q.useLayoutEffect(r)}function hc(){let{isDataRoute:r}=q.useContext(yr);return r?BI():RI()}function RI(){yt(cl(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(ul),{basename:e,navigator:t}=q.useContext(_r),{matches:i}=q.useContext(yr),{pathname:a}=As(),l=JSON.stringify(cp(i)),c=q.useRef(!1);return KT(()=>{c.current=!0}),q.useCallback((m,p={})=>{if(lr(c.current,GT),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=hp(m,JSON.parse(l),a,p.relative==="path");r==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:bi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,r])}q.createContext(null);function II(){let{matches:r}=q.useContext(yr),e=r[r.length-1];return e?e.params:{}}function fc(r,{relative:e}={}){let{matches:t}=q.useContext(yr),{pathname:i}=As(),a=JSON.stringify(cp(t));return q.useMemo(()=>hp(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function xI(r,e){return QT(r,e)}function QT(r,e,t,i){var Y;yt(cl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(_r),{matches:l}=q.useContext(yr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let J=y&&y.path||"";$T(m,!y||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let T=As(),b;if(e){let J=typeof e=="string"?Pa(e):e;yt(p==="/"||((Y=J.pathname)==null?void 0:Y.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${J.pathname}" was given in the \`location\` prop.`),b=J}else b=T;let D=b.pathname||"/",M=D;if(p!=="/"){let J=p.replace(/^\//,"").split("/");M="/"+D.replace(/^\//,"").split("/").slice(J.length).join("/")}let z=zT(r,{pathname:M});lr(y||z!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),lr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=MI(z&&z.map(J=>Object.assign({},J,{params:Object.assign({},d,J.params),pathname:bi([p,a.encodeLocation?a.encodeLocation(J.pathname).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?p:bi([p,a.encodeLocation?a.encodeLocation(J.pathnameBase).pathname:J.pathnameBase])})),l,t,i);return e&&U?q.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},U):U}function CI(){let r=UI(),e=TI(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:a},t):null,c)}var DI=q.createElement(CI,null),NI=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(yr.Provider,{value:this.props.routeContext},q.createElement(fp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VI({routeContext:r,match:e,children:t}){let i=q.useContext(ul);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(yr.Provider,{value:r},t)}function MI(r,e=[],t=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,l=t==null?void 0:t.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);yt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:y,errors:T}=t,b=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||b){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let T,b=!1,D=null,M=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,D=p.route.errorElement||DI,c&&(d<0&&y===0?($T("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,M=null):d===y&&(b=!0,M=p.route.hydrateFallbackElement||null)));let z=e.concat(a.slice(0,y+1)),U=()=>{let Y;return T?Y=D:b?Y=M:p.route.Component?Y=q.createElement(p.route.Component,null):p.route.element?Y=p.route.element:Y=m,q.createElement(VI,{match:p,routeContext:{outlet:m,matches:z,isDataRoute:t!=null},children:Y})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?q.createElement(NI,{location:t.location,revalidation:t.revalidation,component:D,error:T,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):U()},null)}function dp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OI(r){let e=q.useContext(ul);return yt(e,dp(r)),e}function PI(r){let e=q.useContext(Pf);return yt(e,dp(r)),e}function kI(r){let e=q.useContext(yr);return yt(e,dp(r)),e}function mp(r){let e=kI(r),t=e.matches[e.matches.length-1];return yt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function LI(){return mp("useRouteId")}function UI(){var i;let r=q.useContext(fp),e=PI("useRouteError"),t=mp("useRouteError");return r!==void 0?r:(i=e.errors)==null?void 0:i[t]}function BI(){let{router:r}=OI("useNavigate"),e=mp("useNavigate"),t=q.useRef(!1);return KT(()=>{t.current=!0}),q.useCallback(async(a,l={})=>{lr(t.current,GT),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var e0={};function $T(r,e,t){!e&&!e0[r]&&(e0[r]=!0,lr(!1,t))}q.memo(zI);function zI({routes:r,future:e,state:t}){return QT(r,void 0,t,e)}function qI({to:r,replace:e,state:t,relative:i}){yt(cl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=q.useContext(_r);lr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(yr),{pathname:c}=As(),d=hc(),m=hp(r,cp(l),c,i==="path"),p=JSON.stringify(m);return q.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:i})},[d,p,i,e,t]),null}function Bo(r){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FI({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){yt(!cl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=Pa(t));let{pathname:m="/",search:p="",hash:y="",state:T=null,key:b="default"}=t,D=q.useMemo(()=>{let M=Si(m,c);return M==null?null:{location:{pathname:M,search:p,hash:y,state:T,key:b},navigationType:i}},[c,m,p,y,T,b,i]);return lr(D!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:q.createElement(_r.Provider,{value:d},q.createElement(cc.Provider,{children:e,value:D}))}function jI({children:r,location:e}){return xI(Mg(r),e)}function Mg(r,e=[]){let t=[];return q.Children.forEach(r,(i,a)=>{if(!q.isValidElement(i))return;let l=[...e,a];if(i.type===q.Fragment){t.push.apply(t,Mg(i.props.children,l));return}yt(i.type===Bo,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Mg(i.props.children,l)),t.push(c)}),t}var af="get",of="application/x-www-form-urlencoded";function kf(r){return r!=null&&typeof r.tagName=="string"}function HI(r){return kf(r)&&r.tagName.toLowerCase()==="button"}function GI(r){return kf(r)&&r.tagName.toLowerCase()==="form"}function KI(r){return kf(r)&&r.tagName.toLowerCase()==="input"}function QI(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function $I(r,e){return r.button===0&&(!e||e==="_self")&&!QI(r)}var Yh=null;function YI(){if(Yh===null)try{new FormData(document.createElement("form"),0),Yh=!1}catch{Yh=!0}return Yh}var XI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pg(r){return r!=null&&!XI.has(r)?(lr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):r}function WI(r,e){let t,i,a,l,c;if(GI(r)){let d=r.getAttribute("action");i=d?Si(d,e):null,t=r.getAttribute("method")||af,a=pg(r.getAttribute("enctype"))||of,l=new FormData(r)}else if(HI(r)||KI(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||d.getAttribute("action");if(i=m?Si(m,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||af,a=pg(r.getAttribute("formenctype"))||pg(d.getAttribute("enctype"))||of,l=new FormData(d,r),!YI()){let{name:p,type:y,value:T}=r;if(y==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(kf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=af,i=null,a=of,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function gp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function ZI(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JI(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function e1(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await ZI(l,t);return c.links?c.links():[]}return[]}));return i1(i.flat(1).filter(JI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function t0(r,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{var T;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function t1(r,e,{includeHydrateFallback:t}={}){return n1(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function n1(r){return[...new Set(r)]}function r1(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function i1(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(r1(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var s1=new Set([100,101,204,205]);function a1(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&Si(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function YT(){let r=q.useContext(ul);return gp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function o1(){let r=q.useContext(Pf);return gp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var pp=q.createContext(void 0);pp.displayName="FrameworkContext";function XT(){let r=q.useContext(pp);return gp(r,"You must render this element inside a <HydratedRouter> element"),r}function l1(r,e){let t=q.useContext(pp),[i,a]=q.useState(!1),[l,c]=q.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:T}=e,b=q.useRef(null);q.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let z=Y=>{Y.forEach(J=>{c(J.isIntersecting)})},U=new IntersectionObserver(z,{threshold:.5});return b.current&&U.observe(b.current),()=>{U.disconnect()}}},[r]),q.useEffect(()=>{if(i){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[i]);let D=()=>{a(!0)},M=()=>{a(!1),c(!1)};return t?r!=="intent"?[l,b,{}]:[l,b,{onFocus:xu(d,D),onBlur:xu(m,M),onMouseEnter:xu(p,D),onMouseLeave:xu(y,M),onTouchStart:xu(T,D)}]:[!1,b,{}]}function xu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function u1({page:r,...e}){let{router:t}=YT(),i=q.useMemo(()=>zT(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?q.createElement(h1,{page:r,matches:i,...e}):null}function c1(r){let{manifest:e,routeModules:t}=XT(),[i,a]=q.useState([]);return q.useEffect(()=>{let l=!1;return e1(r,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[r,e,t]),i}function h1({page:r,matches:e,...t}){let i=As(),{manifest:a,routeModules:l}=XT(),{basename:c}=YT(),{loaderData:d,matches:m}=o1(),p=q.useMemo(()=>t0(r,e,m,a,i,"data"),[r,e,m,a,i]),y=q.useMemo(()=>t0(r,e,m,a,i,"assets"),[r,e,m,a,i]),T=q.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let M=new Set,z=!1;if(e.forEach(Y=>{var K;let J=a.routes[Y.route.id];!J||!J.hasLoader||(!p.some(ue=>ue.route.id===Y.route.id)&&Y.route.id in d&&((K=l[Y.route.id])!=null&&K.shouldRevalidate)||J.hasClientLoader?z=!0:M.add(Y.route.id))}),M.size===0)return[];let U=a1(r,c);return z&&M.size>0&&U.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[U.pathname+U.search]},[c,d,i,a,p,e,r,l]),b=q.useMemo(()=>t1(y,a),[y,a]),D=c1(y);return q.createElement(q.Fragment,null,T.map(M=>q.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),b.map(M=>q.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),D.map(({key:M,link:z})=>q.createElement("link",{key:M,...z})))}function f1(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WT&&(window.__reactRouterVersion="7.6.1")}catch{}function d1({basename:r,children:e,window:t}){let i=q.useRef();i.current==null&&(i.current=ZR({window:t,v5Compat:!0}));let a=i.current,[l,c]=q.useState({action:a.action,location:a.location}),d=q.useCallback(m=>{q.startTransition(()=>c(m))},[c]);return q.useLayoutEffect(()=>a.listen(d),[a,d]),q.createElement(FI,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:a})}var ZT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JT=q.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:y,viewTransition:T,...b},D){let{basename:M}=q.useContext(_r),z=typeof p=="string"&&ZT.test(p),U,Y=!1;if(typeof p=="string"&&z&&(U=p,WT))try{let R=new URL(window.location.href),O=p.startsWith("//")?new URL(R.protocol+p):new URL(p),P=Si(O.pathname,M);O.origin===R.origin&&P!=null?p=P+O.search+O.hash:Y=!0}catch{lr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let J=AI(p,{relative:a}),[K,ue,oe]=l1(i,b),pe=_1(p,{replace:c,state:d,target:m,preventScrollReset:y,relative:a,viewTransition:T});function I(R){e&&e(R),R.defaultPrevented||pe(R)}let S=q.createElement("a",{...b,...oe,href:U||J,onClick:Y||l?e:I,ref:f1(D,ue),target:m,"data-discover":!z&&t==="render"?"true":void 0});return K&&!z?q.createElement(q.Fragment,null,S,q.createElement(u1,{page:J})):S});JT.displayName="Link";var m1=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},y){let T=fc(c,{relative:p.relative}),b=As(),D=q.useContext(Pf),{navigator:M,basename:z}=q.useContext(_r),U=D!=null&&b1(T)&&d===!0,Y=M.encodeLocation?M.encodeLocation(T).pathname:T.pathname,J=b.pathname,K=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;t||(J=J.toLowerCase(),K=K?K.toLowerCase():null,Y=Y.toLowerCase()),K&&z&&(K=Si(K,z)||K);const ue=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let oe=J===Y||!a&&J.startsWith(Y)&&J.charAt(ue)==="/",pe=K!=null&&(K===Y||!a&&K.startsWith(Y)&&K.charAt(Y.length)==="/"),I={isActive:oe,isPending:pe,isTransitioning:U},S=oe?e:void 0,R;typeof i=="function"?R=i(I):R=[i,oe?"active":null,pe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(I):l;return q.createElement(JT,{...p,"aria-current":S,className:R,ref:y,style:O,to:c,viewTransition:d},typeof m=="function"?m(I):m)});m1.displayName="NavLink";var g1=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=af,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:T,...b},D)=>{let M=E1(),z=T1(d,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",Y=typeof d=="string"&&ZT.test(d),J=K=>{if(m&&m(K),K.defaultPrevented)return;K.preventDefault();let ue=K.nativeEvent.submitter,oe=(ue==null?void 0:ue.getAttribute("formmethod"))||c;M(ue||K.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:T})};return q.createElement("form",{ref:D,method:U,action:z,onSubmit:i?m:J,...b,"data-discover":!Y&&r==="render"?"true":void 0})});g1.displayName="Form";function p1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eb(r){let e=q.useContext(ul);return yt(e,p1(r)),e}function _1(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=hc(),m=As(),p=fc(r,{relative:l});return q.useCallback(y=>{if($I(y,e)){y.preventDefault();let T=t!==void 0?t:Ku(m)===Ku(p);d(r,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,i,e,r,a,l,c])}var y1=0,v1=()=>`__${String(++y1)}__`;function E1(){let{router:r}=eb("useSubmit"),{basename:e}=q.useContext(_r),t=LI();return q.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=WI(i,e);if(a.navigate===!1){let y=a.fetcherKey||v1();await r.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await r.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function T1(r,{relative:e}={}){let{basename:t}=q.useContext(_r),i=q.useContext(yr);yt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...fc(r||".",{relative:e})},c=As();if(r==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let y=d.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:bi([t,l.pathname])),Ku(l)}function b1(r,e={}){let t=q.useContext(HT);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=eb("useViewTransitionState"),a=fc(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Si(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Si(t.nextLocation.pathname,i)||t.nextLocation.pathname;return pf(a.pathname,c)!=null||pf(a.pathname,l)!=null}[...s1];var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},w1=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,m=a+2<r.length,p=m?r[a+2]:0,y=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,D=p&63;m||(D=64,c||(b=64)),i.push(t[y],t[T],t[b],t[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):w1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new S1;const b=l<<2|d>>4;if(i.push(b),p!==64){const D=d<<4&240|p>>2;if(i.push(D),T!==64){const M=p<<6&192|T;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class S1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A1=function(r){const e=tb(r);return nb.encodeByteArray(e,!0)},_f=function(r){return A1(r).replace(/\./g,"")},R1=function(r){try{return nb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yf(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!I1(t)||(r[t]=yf(r[t],e[t]));return r}function I1(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=()=>rb().__FIREBASE_DEFAULTS__,C1=()=>{if(typeof process>"u"||typeof n0>"u")return;const r=n0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},D1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&R1(r[1]);return e&&JSON.parse(e)},ib=()=>{try{return x1()||C1()||D1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sb=()=>{var r;return(r=ib())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[_f(JSON.stringify(t)),_f(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V1(){var r;const e=(r=ib())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1(){return typeof window<"u"||ob()}function ob(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function lb(){return!V1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ub(){try{return typeof indexedDB=="object"}catch{return!1}}function O1(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="FirebaseError";class Rs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=P1,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lf.prototype.create)}}class Lf{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?k1(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Rs(a,d,i)}}function k1(r,e){return r.replace(L1,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const L1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Qu(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(i0(l)&&i0(c)){if(!Qu(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function i0(r){return r!==null&&typeof r=="object"}function U1(r,e){const t=new B1(r,e);return t.subscribe.bind(t)}class B1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");z1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=_g),a.error===void 0&&(a.error=_g),a.complete===void 0&&(a.complete=_g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function _g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(r){return r&&r._delegate?r._delegate:r}class Ai{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new N1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j1(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:F1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F1(r){return r===da?void 0:r}function j1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=[];var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const hb={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},H1=qe.INFO,G1={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},K1=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=G1[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=H1,this._logHandler=K1,this._userLogHandler=null,_p.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}function Q1(r){_p.forEach(e=>{e.setLogLevel(r)})}function $1(r,e){for(const t of _p){let i=null;e&&e.level&&(i=hb[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(i??a.logLevel)&&r({level:qe[l].toLowerCase(),message:d,args:c,type:a.name})}}}const Y1=(r,e)=>e.some(t=>r instanceof t);let s0,a0;function X1(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W1(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Og=new WeakMap,db=new WeakMap,yg=new WeakMap,vp=new WeakMap;function Z1(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(ds(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&fb.set(t,r)}).catch(()=>{}),vp.set(e,r),e}function J1(r){if(Og.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Og.set(r,e)}let Pg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Og.get(r);if(e==="objectStoreNames")return r.objectStoreNames||db.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ds(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ex(r){Pg=r(Pg)}function tx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(vg(this),e,...t);return db.set(i,e.sort?e.sort():[e]),ds(i)}:W1().includes(r)?function(...e){return r.apply(vg(this),e),ds(fb.get(this))}:function(...e){return ds(r.apply(vg(this),e))}}function nx(r){return typeof r=="function"?tx(r):(r instanceof IDBTransaction&&J1(r),Y1(r,X1())?new Proxy(r,Pg):r)}function ds(r){if(r instanceof IDBRequest)return Z1(r);if(yg.has(r))return yg.get(r);const e=nx(r);return e!==r&&(yg.set(r,e),vp.set(e,r)),e}const vg=r=>vp.get(r);function rx(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=ds(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ds(c.result),m.oldVersion,m.newVersion,ds(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const ix=["get","getKey","getAll","getAllKeys","count"],sx=["put","add","delete","clear"],Eg=new Map;function o0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Eg.get(e))return Eg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=sx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||ix.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Eg.set(e,l),l}ex(r=>({...r,get:(e,t,i)=>o0(e,t)||r.get(e,t,i),has:(e,t)=>!!o0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ox(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ox(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",kg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new yp("@firebase/app"),lx="@firebase/app-compat",ux="@firebase/analytics-compat",cx="@firebase/analytics",hx="@firebase/app-check-compat",fx="@firebase/app-check",dx="@firebase/auth",mx="@firebase/auth-compat",gx="@firebase/database",px="@firebase/data-connect",_x="@firebase/database-compat",yx="@firebase/functions",vx="@firebase/functions-compat",Ex="@firebase/installations",Tx="@firebase/installations-compat",bx="@firebase/messaging",wx="@firebase/messaging-compat",Sx="@firebase/performance",Ax="@firebase/performance-compat",Rx="@firebase/remote-config",Ix="@firebase/remote-config-compat",xx="@firebase/storage",Cx="@firebase/storage-compat",Dx="@firebase/firestore",Nx="@firebase/vertexai-preview",Vx="@firebase/firestore-compat",Mx="firebase",Ox="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]",Px={[Ef]:"fire-core",[lx]:"fire-core-compat",[cx]:"fire-analytics",[ux]:"fire-analytics-compat",[fx]:"fire-app-check",[hx]:"fire-app-check-compat",[dx]:"fire-auth",[mx]:"fire-auth-compat",[gx]:"fire-rtdb",[px]:"fire-data-connect",[_x]:"fire-rtdb-compat",[yx]:"fire-fn",[vx]:"fire-fn-compat",[Ex]:"fire-iid",[Tx]:"fire-iid-compat",[bx]:"fire-fcm",[wx]:"fire-fcm-compat",[Sx]:"fire-perf",[Ax]:"fire-perf-compat",[Rx]:"fire-rc",[Ix]:"fire-rc-compat",[xx]:"fire-gcs",[Cx]:"fire-gcs-compat",[Dx]:"fire-fst",[Vx]:"fire-fst-compat",[Nx]:"fire-vertex","fire-js":"fire-js",[Mx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Map,$o=new Map,Yo=new Map;function $u(r,e){try{r.container.addComponent(e)}catch(t){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function mb(r,e){r.container.addOrOverwriteComponent(e)}function Sa(r){const e=r.name;if(Yo.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Yo.set(e,r);for(const t of ps.values())$u(t,r);for(const t of $o.values())$u(t,r);return!0}function gb(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function kx(r,e,t=gs){gb(r,e).clearInstance(t)}function pb(r){return r.options!==void 0}function Lx(r){return r.settings!==void 0}function Ux(){Yo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Lf("app","Firebase",Bx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends _b{constructor(e,t,i,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,c={name:i,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:l},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,pr(Ef,kg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Tp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw or.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=Ox;function Ep(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gs,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw or.create("bad-app-name",{appName:String(a)});if(t||(t=sb()),!t)throw or.create("no-options");const l=ps.get(a);if(l){if(Qu(t,l.options)&&Qu(i,l.config))return l;throw or.create("duplicate-app",{appName:a})}const c=new cb(a);for(const m of Yo.values())c.addComponent(m);const d=new _b(t,i,c);return ps.set(a,d),d}function qx(r,e){if(M1()&&!ob())throw or.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;pb(r)?t=r.options:t=r;const i=Object.assign(Object.assign({},e),t);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const a=p=>[...p].reduce((y,T)=>Math.imul(31,y)+T.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw or.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(i)),c=$o.get(l);if(c)return c.incRefCount(e.releaseOnDeref),c;const d=new cb(l);for(const p of Yo.values())d.addComponent(p);const m=new zx(t,e,l,d);return $o.set(l,m),m}function Fx(r=gs){const e=ps.get(r);if(!e&&r===gs&&sb())return Ep();if(!e)throw or.create("no-app",{appName:r});return e}function jx(){return Array.from(ps.values())}async function Tp(r){let e=!1;const t=r.name;ps.has(t)?(e=!0,ps.delete(t)):$o.has(t)&&r.decRefCount()<=0&&($o.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(i=>i.delete())),r.isDeleted=!0)}function pr(r,e,t){var i;let a=(i=Px[r])!==null&&i!==void 0?i:r;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(d.join(" "));return}Sa(new Ai(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}function yb(r,e){if(r!==null&&typeof r!="function")throw or.create("invalid-log-argument");$1(r,e)}function vb(r){Q1(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="firebase-heartbeat-database",Gx=1,Yu="firebase-heartbeat-store";let Tg=null;function Eb(){return Tg||(Tg=rx(Hx,Gx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(r=>{throw or.create("idb-open",{originalErrorMessage:r.message})})),Tg}async function Kx(r){try{const t=(await Eb()).transaction(Yu),i=await t.objectStore(Yu).get(Tb(r));return await t.done,i}catch(e){if(e instanceof Rs)Ri.warn(e.message);else{const t=or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(t.message)}}}async function l0(r,e){try{const i=(await Eb()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,Tb(r)),await i.done}catch(t){if(t instanceof Rs)Ri.warn(t.message);else{const i=or.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ri.warn(i.message)}}}function Tb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=1024,$x=30*24*60*60*1e3;class Yx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wx(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=u0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=$x}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=u0(),{heartbeatsToSend:i,unsentEntries:a}=Xx(this._heartbeatsCache.heartbeats),l=_f(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ri.warn(t),""}}}function u0(){return new Date().toISOString().substring(0,10)}function Xx(r,e=Qx){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),c0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),c0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Wx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ub()?O1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Kx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return l0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return l0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function c0(r){return _f(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(r){Sa(new Ai("platform-logger",e=>new ax(e),"PRIVATE")),Sa(new Ai("heartbeat",e=>new Yx(e),"PRIVATE")),pr(Ef,kg,r),pr(Ef,kg,"esm2017"),pr("fire-js","")}Zx("");const Jx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rs,SDK_VERSION:Uf,_DEFAULT_ENTRY_NAME:gs,_addComponent:$u,_addOrOverwriteComponent:mb,_apps:ps,_clearComponents:Ux,_components:Yo,_getProvider:gb,_isFirebaseApp:pb,_isFirebaseServerApp:Lx,_registerComponent:Sa,_removeServiceInstance:kx,_serverApps:$o,deleteApp:Tp,getApp:Fx,getApps:jx,initializeApp:Ep,initializeServerApp:qx,onLog:yb,registerVersion:pr,setLogLevel:vb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t){this._delegate=e,this.firebase=t,$u(e,new Ai("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Tp(this._delegate)))}_getService(e,t=gs){var i;this._delegate.checkDestroyed();const a=this._delegate.container.getProvider(e);return!a.isInitialized()&&((i=a.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&a.initialize(),a.getImmediate({identifier:t})}_removeServiceInstance(e,t=gs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){$u(this._delegate,e)}_addOrOverwriteComponent(e){mb(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},h0=new Lf("app-compat","Firebase",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(r){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:pr,setLogLevel:vb,onLog:yb,apps:null,SDK_VERSION:Uf,INTERNAL:{registerComponent:d,removeApp:i,useAsService:m,modularAPIs:Jx}};t.default=t,Object.defineProperty(t,"apps",{get:c});function i(p){delete e[p]}function a(p){if(p=p||gs,!r0(e,p))throw h0.create("no-app",{appName:p});return e[p]}a.App=r;function l(p,y={}){const T=Ep(p,y);if(r0(e,T.name))return e[T.name];const b=new r(T,t);return e[T.name]=b,b}function c(){return Object.keys(e).map(p=>e[p])}function d(p){const y=p.name,T=y.replace("-compat","");if(Sa(p)&&p.type==="PUBLIC"){const b=(D=a())=>{if(typeof D[T]!="function")throw h0.create("invalid-app-argument",{appName:y});return D[T]()};p.serviceProps!==void 0&&yf(b,p.serviceProps),t[T]=b,r.prototype[T]=function(...D){return this._getService.bind(this,y).apply(this,p.multipleInstances?D:[])}}return p.type==="PUBLIC"?t[T]:null}function m(p,y){return y==="serverAuth"?null:y}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){const r=n2(e2);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:bb,extendNamespace:e,createSubscribe:U1,ErrorFactory:Lf,deepExtend:yf});function e(t){yf(r,t)}return r}const r2=bb();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new yp("@firebase/app-compat"),i2="@firebase/app-compat",s2="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(r){pr(i2,s2,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=rb();if(r.firebase!==void 0){f0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&f0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ir=r2;a2();var o2="firebase",l2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.registerVersion(o2,l2,"app-compat");var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ba,wb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function R(){}R.prototype=S.prototype,I.D=S.prototype,I.prototype=new R,I.prototype.constructor=I,I.C=function(O,P,k){for(var C=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)C[ze-2]=arguments[ze];return S.prototype[P].apply(O,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,S,R){R||(R=0);var O=Array(16);if(typeof S=="string")for(var P=0;16>P;++P)O[P]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(P=0;16>P;++P)O[P]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=I.g[0],R=I.g[1],P=I.g[2];var k=I.g[3],C=S+(k^R&(P^k))+O[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+O[1]+3905402710&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+O[2]+606105819&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+O[3]+3250441966&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+O[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+O[5]+1200080426&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+O[6]+2821735955&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+O[7]+4249261313&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+O[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+O[9]+2336552879&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+O[10]+4294925233&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+O[11]+2304563134&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(k^R&(P^k))+O[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=k+(P^S&(R^P))+O[13]+4254626195&4294967295,k=S+(C<<12&4294967295|C>>>20),C=P+(R^k&(S^R))+O[14]+2792965006&4294967295,P=k+(C<<17&4294967295|C>>>15),C=R+(S^P&(k^S))+O[15]+1236535329&4294967295,R=P+(C<<22&4294967295|C>>>10),C=S+(P^k&(R^P))+O[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+O[6]+3225465664&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+O[11]+643717713&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+O[0]+3921069994&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+O[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+O[10]+38016083&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+O[15]+3634488961&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+O[4]+3889429448&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+O[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+O[14]+3275163606&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+O[3]+4107603335&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+O[8]+1163531501&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(P^k&(R^P))+O[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=k+(R^P&(S^R))+O[2]+4243563512&4294967295,k=S+(C<<9&4294967295|C>>>23),C=P+(S^R&(k^S))+O[7]+1735328473&4294967295,P=k+(C<<14&4294967295|C>>>18),C=R+(k^S&(P^k))+O[12]+2368359562&4294967295,R=P+(C<<20&4294967295|C>>>12),C=S+(R^P^k)+O[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+O[8]+2272392833&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+O[11]+1839030562&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+O[14]+4259657740&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+O[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+O[4]+1272893353&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+O[7]+4139469664&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+O[10]+3200236656&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+O[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+O[0]+3936430074&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+O[3]+3572445317&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+O[6]+76029189&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(R^P^k)+O[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=k+(S^R^P)+O[12]+3873151461&4294967295,k=S+(C<<11&4294967295|C>>>21),C=P+(k^S^R)+O[15]+530742520&4294967295,P=k+(C<<16&4294967295|C>>>16),C=R+(P^k^S)+O[2]+3299628645&4294967295,R=P+(C<<23&4294967295|C>>>9),C=S+(P^(R|~k))+O[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+O[7]+1126891415&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+O[14]+2878612391&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+O[5]+4237533241&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+O[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+O[3]+2399980690&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+O[10]+4293915773&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+O[1]+2240044497&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+O[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+O[15]+4264355552&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+O[6]+2734768916&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+O[13]+1309151649&4294967295,R=P+(C<<21&4294967295|C>>>11),C=S+(P^(R|~k))+O[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=k+(R^(S|~P))+O[11]+3174756917&4294967295,k=S+(C<<10&4294967295|C>>>22),C=P+(S^(k|~R))+O[2]+718787259&4294967295,P=k+(C<<15&4294967295|C>>>17),C=R+(k^(P|~S))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+k&4294967295}i.prototype.u=function(I,S){S===void 0&&(S=I.length);for(var R=S-this.blockSize,O=this.B,P=this.h,k=0;k<S;){if(P==0)for(;k<=R;)a(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<S;)if(O[P++]=I.charCodeAt(k++),P==this.blockSize){a(this,O),P=0;break}}else for(;k<S;)if(O[P++]=I[k++],P==this.blockSize){a(this,O),P=0;break}}this.h=P,this.o+=S},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;var R=8*this.o;for(S=I.length-8;S<I.length;++S)I[S]=R&255,R/=256;for(this.u(I),I=Array(16),S=R=0;4>S;++S)for(var O=0;32>O;O+=8)I[R++]=this.g[S]>>>O&255;return I};function l(I,S){var R=d;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=S(I)}function c(I,S){this.h=S;for(var R=[],O=!0,P=I.length-1;0<=P;P--){var k=I[P]|0;O&&k==S||(R[P]=k,O=!1)}this.g=R}var d={};function m(I){return-128<=I&&128>I?l(I,function(S){return new c([S|0],0>S?-1:0)}):new c([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return T;if(0>I)return U(p(-I));for(var S=[],R=1,O=0;I>=R;O++)S[O]=I/R|0,R*=4294967296;return new c(S,0)}function y(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return U(y(I.substring(1),S));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(S,8)),O=T,P=0;P<I.length;P+=8){var k=Math.min(8,I.length-P),C=parseInt(I.substring(P,P+k),S);8>k?(k=p(Math.pow(S,k)),O=O.j(k).add(p(C))):(O=O.j(R),O=O.add(p(C)))}return O}var T=m(0),b=m(1),D=m(16777216);r=c.prototype,r.m=function(){if(z(this))return-U(this).m();for(var I=0,S=1,R=0;R<this.g.length;R++){var O=this.i(R);I+=(0<=O?O:4294967296+O)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(M(this))return"0";if(z(this))return"-"+U(this).toString(I);for(var S=p(Math.pow(I,6)),R=this,O="";;){var P=ue(R,S).g;R=Y(R,P.j(S));var k=((0<R.g.length?R.g[0]:R.h)>>>0).toString(I);if(R=P,M(R))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function M(I){if(I.h!=0)return!1;for(var S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function z(I){return I.h==-1}r.l=function(I){return I=Y(this,I),z(I)?-1:M(I)?0:1};function U(I){for(var S=I.g.length,R=[],O=0;O<S;O++)R[O]=~I.g[O];return new c(R,~I.h).add(b)}r.abs=function(){return z(this)?U(this):this},r.add=function(I){for(var S=Math.max(this.g.length,I.g.length),R=[],O=0,P=0;P<=S;P++){var k=O+(this.i(P)&65535)+(I.i(P)&65535),C=(k>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);O=C>>>16,k&=65535,C&=65535,R[P]=C<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Y(I,S){return I.add(U(S))}r.j=function(I){if(M(this)||M(I))return T;if(z(this))return z(I)?U(this).j(U(I)):U(U(this).j(I));if(z(I))return U(this.j(U(I)));if(0>this.l(D)&&0>I.l(D))return p(this.m()*I.m());for(var S=this.g.length+I.g.length,R=[],O=0;O<2*S;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<I.g.length;P++){var k=this.i(O)>>>16,C=this.i(O)&65535,ze=I.i(P)>>>16,xe=I.i(P)&65535;R[2*O+2*P]+=C*xe,J(R,2*O+2*P),R[2*O+2*P+1]+=k*xe,J(R,2*O+2*P+1),R[2*O+2*P+1]+=C*ze,J(R,2*O+2*P+1),R[2*O+2*P+2]+=k*ze,J(R,2*O+2*P+2)}for(O=0;O<S;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=S;O<2*S;O++)R[O]=0;return new c(R,0)};function J(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function K(I,S){this.g=I,this.h=S}function ue(I,S){if(M(S))throw Error("division by zero");if(M(I))return new K(T,T);if(z(I))return S=ue(U(I),S),new K(U(S.g),U(S.h));if(z(S))return S=ue(I,U(S)),new K(U(S.g),S.h);if(30<I.g.length){if(z(I)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var R=b,O=S;0>=O.l(I);)R=oe(R),O=oe(O);var P=pe(R,1),k=pe(O,1);for(O=pe(O,2),R=pe(R,2);!M(O);){var C=k.add(O);0>=C.l(I)&&(P=P.add(R),k=C),O=pe(O,1),R=pe(R,1)}return S=Y(I,P.j(S)),new K(P,S)}for(P=T;0<=I.l(S);){for(R=Math.max(1,Math.floor(I.m()/S.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=p(R),C=k.j(S);z(C)||0<C.l(I);)R-=O,k=p(R),C=k.j(S);M(k)&&(k=b),P=P.add(k),I=Y(I,C)}return new K(P,I)}r.A=function(I){return ue(this,I).h},r.and=function(I){for(var S=Math.max(this.g.length,I.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)&I.i(O);return new c(R,this.h&I.h)},r.or=function(I){for(var S=Math.max(this.g.length,I.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)|I.i(O);return new c(R,this.h|I.h)},r.xor=function(I){for(var S=Math.max(this.g.length,I.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)^I.i(O);return new c(R,this.h^I.h)};function oe(I){for(var S=I.g.length+1,R=[],O=0;O<S;O++)R[O]=I.i(O)<<1|I.i(O-1)>>>31;return new c(R,I.h)}function pe(I,S){var R=S>>5;S%=32;for(var O=I.g.length-R,P=[],k=0;k<O;k++)P[k]=0<S?I.i(k+R)>>>S|I.i(k+R+1)<<32-S:I.i(k+R);return new c(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,ba=c}).apply(typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{});var Xh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sb,Pu,Ab,lf,Lg,Rb,Ib,xb;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,v){return h==Array.prototype||h==Object.prototype||(h[_]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xh=="object"&&Xh];for(var _=0;_<h.length;++_){var v=h[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var v=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in v))break e;v=v[F]}h=h[h.length-1],A=v[h],_=_(A),_!=A&&_!=null&&e(v,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var v=0,A=!1,F={next:function(){if(!A&&v<h.length){var Z=v++;return{value:_(Z,h[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,v){return h.call.apply(h.bind,arguments)}function T(h,_,v){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),h.apply(_,F)}}return function(){return h.apply(_,arguments)}}function b(h,_,v){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:T,b.apply(null,arguments)}function D(h,_){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function M(h,_){function v(){}v.prototype=_.prototype,h.aa=_.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(A,F,Z){for(var he=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)he[Fe-2]=arguments[Fe];return _.prototype[F].apply(A,he)}}function z(h){const _=h.length;if(0<_){const v=Array(_);for(let A=0;A<_;A++)v[A]=h[A];return v}return[]}function U(h,_){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(m(A)){const F=h.length||0,Z=A.length||0;h.length=F+Z;for(let he=0;he<Z;he++)h[F+he]=A[he]}else h.push(A)}}class Y{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function J(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function ue(h){return ue[" "](h),h}ue[" "]=function(){};var oe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function pe(h,_,v){for(const A in h)_.call(v,h[A],A,h)}function I(h,_){for(const v in h)_.call(void 0,h[v],v,h)}function S(h){const _={};for(const v in h)_[v]=h[v];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,_){let v,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(v in A)h[v]=A[v];for(let Z=0;Z<R.length;Z++)v=R[Z],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function P(h){var _=1;h=h.split(":");const v=[];for(;0<_&&h.length;)v.push(h.shift()),_--;return h.length&&v.push(h.join(":")),v}function k(h){d.setTimeout(()=>{throw h},0)}function C(){var h=ve;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ze{constructor(){this.h=this.g=null}add(_,v){const A=xe.get();A.set(_,v),this.h?this.h.next=A:this.g=A,this.h=A}}var xe=new Y(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,fe=!1,ve=new ze,V=()=>{const h=d.Promise.resolve(void 0);re=()=>{h.then(te)}};var te=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(v){k(v)}var _=xe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}fe=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,_),d.removeEventListener("test",v,_)}catch{}return h}();function Ie(h,_){if(le.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(oe){e:{try{ue(_.nodeName);var F=!0;break e}catch{}F=!1}F||(_=null)}}else v=="mouseover"?_=h.fromElement:v=="mouseout"&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ae[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}M(Ie,le);var Ae={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),tt=0;function Hn(h,_,v,A,F){this.listener=h,this.proxy=null,this.src=_,this.type=v,this.capture=!!A,this.ha=F,this.key=++tt,this.da=this.fa=!1}function vr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ur(h){this.src=h,this.g={},this.h=0}ur.prototype.add=function(h,_,v,A,F){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var he=Kr(h,_,A,F);return-1<he?(_=h[he],v||(_.fa=!1)):(_=new Hn(_,this.src,Z,!!A,F),_.fa=v,h.push(_)),_};function Gr(h,_){var v=_.type;if(v in h.g){var A=h.g[v],F=Array.prototype.indexOf.call(A,_,void 0),Z;(Z=0<=F)&&Array.prototype.splice.call(A,F,1),Z&&(vr(_),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Kr(h,_,v,A){for(var F=0;F<h.length;++F){var Z=h[F];if(!Z.da&&Z.listener==_&&Z.capture==!!v&&Z.ha==A)return F}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),Vs={};function qa(h,_,v,A,F){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)qa(h,_[Z],v,A,F);return null}return v=Rc(v),h&&h[Mt]?h.K(_,v,p(A)?!!A.capture:!1,F):mn(h,_,v,!1,A,F)}function mn(h,_,v,A,F,Z){if(!_)throw Error("Invalid event type");var he=p(F)?!!F.capture:!!F,Fe=Gn(h);if(Fe||(h[Qr]=Fe=new ur(h)),v=Fe.add(_,v,A,he,Z),v.proxy)return v;if(A=Fa(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)be||(F=he),F===void 0&&(F=!1),h.addEventListener(_.toString(),A,F);else if(h.attachEvent)h.attachEvent(Ye(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Fa(){function h(v){return _.call(h.src,h.listener,v)}const _=gn;return h}function Ne(h,_,v,A,F){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Ne(h,_[Z],v,A,F);else A=p(A)?!!A.capture:!!A,v=Rc(v),h&&h[Mt]?(h=h.i,_=String(_).toString(),_ in h.g&&(Z=h.g[_],v=Kr(Z,v,A,F),-1<v&&(vr(Z[v]),Array.prototype.splice.call(Z,v,1),Z.length==0&&(delete h.g[_],h.h--)))):h&&(h=Gn(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Kr(_,v,A,F)),(v=-1<h?_[h]:null)&&Pe(v))}function Pe(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Mt])Gr(_.i,h);else{var v=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(v,A,h.capture):_.detachEvent?_.detachEvent(Ye(v),A):_.addListener&&_.removeListener&&_.removeListener(A),(v=Gn(_))?(Gr(v,h),v.h==0&&(v.src=null,_[Qr]=null)):vr(h)}}}function Ye(h){return h in Vs?Vs[h]:Vs[h]="on"+h}function gn(h,_){if(h.da)h=!0;else{_=new Ie(_,this);var v=h.listener,A=h.ha||h.src;h.fa&&Pe(h),h=v.call(A,_)}return h}function Gn(h){return h=h[Qr],h instanceof ur?h:null}var $r="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rc(h){return typeof h=="function"?h:(h[$r]||(h[$r]=function(_){return h.handleEvent(_)}),h[$r])}function wt(){ce.call(this),this.i=new ur(this),this.M=this,this.F=null}M(wt,ce),wt.prototype[Mt]=!0,wt.prototype.removeEventListener=function(h,_,v,A){Ne(this,h,_,v,A)};function We(h,_){var v,A=h.F;if(A)for(v=[];A;A=A.F)v.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new le(_,h);else if(_ instanceof le)_.target=_.target||h;else{var F=_;_=new le(A,h),O(_,F)}if(F=!0,v)for(var Z=v.length-1;0<=Z;Z--){var he=_.g=v[Z];F=On(he,A,!0,_)&&F}if(he=_.g=h,F=On(he,A,!0,_)&&F,F=On(he,A,!1,_)&&F,v)for(Z=0;Z<v.length;Z++)he=_.g=v[Z],F=On(he,A,!1,_)&&F}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var v=h.g[_],A=0;A<v.length;A++)vr(v[A]);delete h.g[_],h.h--}}this.F=null},wt.prototype.K=function(h,_,v,A){return this.i.add(String(h),_,!1,v,A)},wt.prototype.L=function(h,_,v,A){return this.i.add(String(h),_,!0,v,A)};function On(h,_,v,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,Z=0;Z<_.length;++Z){var he=_[Z];if(he&&!he.da&&he.capture==v){var Fe=he.listener,zt=he.ha||he.src;he.fa&&Gr(h.i,he),F=Fe.call(zt,A)!==!1&&F}}return F&&!A.defaultPrevented}function on(h,_,v){if(typeof h=="function")v&&(h=b(h,v));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function Ic(h){h.g=on(()=>{h.g=null,h.i&&(h.i=!1,Ic(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class fd extends ce{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ic(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ms(h){ce.call(this),this.h=h,this.g={}}M(Ms,ce);var Os=[];function Ps(h){pe(h.g,function(_,v){this.g.hasOwnProperty(v)&&Pe(_)},h),h.g={}}Ms.prototype.N=function(){Ms.aa.N.call(this),Ps(this)},Ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=d.JSON.stringify,ja=d.JSON.parse,ks=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Tl(){}Tl.prototype.h=null;function bl(h){return h.h||(h.h=h.i())}function wl(){}var Yr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xr(){le.call(this,"d")}M(Xr,le);function Sl(){le.call(this,"c")}M(Sl,le);var Er={},Al=null;function Mi(){return Al=Al||new wt}Er.La="serverreachability";function Ha(h){le.call(this,Er.La,h)}M(Ha,le);function Oi(h){const _=Mi();We(_,new Ha(_))}Er.STAT_EVENT="statevent";function xc(h,_){le.call(this,Er.STAT_EVENT,h),this.stat=_}M(xc,le);function dt(h){const _=Mi();We(_,new xc(_,h))}Er.Ma="timingevent";function Bt(h,_){le.call(this,Er.Ma,h),this.size=_}M(Bt,le);function Ot(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Kn(){this.g=!0}Kn.prototype.xa=function(){this.g=!1};function Rl(h,_,v,A,F,Z){h.info(function(){if(h.g)if(Z)for(var he="",Fe=Z.split("&"),zt=0;zt<Fe.length;zt++){var je=Fe[zt].split("=");if(1<je.length){var Kt=je[0];je=je[1];var qt=Kt.split("_");he=2<=qt.length&&qt[1]=="type"?he+(Kt+"="+je+"&"):he+(Kt+"=redacted&")}}else he=null;else he=Z;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+_+`
`+v+`
`+he})}function dd(h,_,v,A,F,Z,he){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+_+`
`+v+`
`+Z+" "+he})}function Pi(h,_,v,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ls(h,v)+(A?" "+A:"")})}function Cc(h,_){h.info(function(){return"TIMEOUT: "+_})}Kn.prototype.info=function(){};function Ls(h,_){if(!h.g)return _;if(!_)return null;try{var v=JSON.parse(_);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var A=v[h];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var Z=F[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var he=1;he<F.length;he++)F[he]=""}}}}return cr(v)}catch{return _}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function br(){}M(br,Tl),br.prototype.g=function(){return new XMLHttpRequest},br.prototype.i=function(){return{}},Tr=new br;function pn(h,_,v,A){this.j=h,this.i=_,this.l=v,this.R=A||1,this.U=new Ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new It}function It(){this.i=null,this.g="",this.h=!1}var Il={},Ga={};function hr(h,_,v){h.L=1,h.v=Fs(Pn(_)),h.m=v,h.P=!0,Zr(h,null)}function Zr(h,_){h.F=Date.now(),Us(h),h.A=Pn(h.v);var v=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),Ml(v.i,"t",A),h.C=0,v=h.j.J,h.h=new It,h.g=Gc(h.j,v?_:null,!h.m),0<h.O&&(h.M=new fd(b(h.Y,h,h.g),h.O)),_=h.U,v=h.g,A=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(Os[0]=F.toString()),F=Os);for(var Z=0;Z<F.length;Z++){var he=qa(v,F[Z],A||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Oi(),Rl(h.i,h.u,h.A,h.l,h.R,h.m)}pn.prototype.ca=function(h){h=h.target;const _=this.M;_&&Xn(h)==3?_.j():this.Y(h)},pn.prototype.Y=function(h){try{if(h==this.g)e:{const qt=Xn(this.g);var _=this.g.Ba();const ai=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||Lc(this.g)))){this.J||qt!=4||_==7||(_==8||0>=ai?Oi(3):Oi(2)),Li(this);var v=this.g.Z();this.X=v;t:if(Dc(this)){var A=Lc(this.g);h="";var F=A.length,Z=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),wr(this);var he="";break t}this.h.i=new d.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(Z&&_==F-1)});A.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,dd(this.i,this.u,this.A,this.l,this.R,qt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,zt=this.g;if((Fe=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Fe)){var je=Fe;break t}}je=null}if(v=je)Pi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,v);else{this.o=!1,this.s=3,dt(12),Zt(this),wr(this);break e}}if(this.P){v=!0;let Jt;for(;!this.J&&this.C<he.length;)if(Jt=Nc(this,he),Jt==Ga){qt==4&&(this.s=4,dt(14),v=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Il){this.s=4,dt(15),Pi(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Pi(this.i,this.l,Jt,null),Bs(this,Jt);if(Dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||he.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)Pi(this.i,this.l,he,"[Invalid Chunked Response]"),Zt(this),wr(this);else if(0<he.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Xs(Kt),Kt.M=!0,dt(11))}}else Pi(this.i,this.l,he,null),Bs(this,he);qt==4&&Zt(this),this.o&&!this.J&&(qt==4?Fc(this.j,this):(this.o=!1,Us(this)))}else yd(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Zt(this),wr(this)}}}catch{}finally{}};function Dc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Nc(h,_){var v=h.C,A=_.indexOf(`
`,v);return A==-1?Ga:(v=Number(_.substring(v,A)),isNaN(v)?Il:(A+=1,A+v>_.length?Ga:(_=_.slice(A,A+v),h.C=A+v,_)))}pn.prototype.cancel=function(){this.J=!0,Zt(this)};function Us(h){h.S=Date.now()+h.I,Vc(h,h.I)}function Vc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(b(h.ba,h),_)}function Li(h){h.B&&(d.clearTimeout(h.B),h.B=null)}pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Cc(this.i,this.A),this.L!=2&&(Oi(),dt(17)),Zt(this),this.s=2,wr(this)):Vc(this,this.S-h)};function wr(h){h.j.G==0||h.J||Fc(h.j,h)}function Zt(h){Li(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Ps(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Bs(h,_){try{var v=h.j;if(v.G!=0&&(v.g==h||xl(v.h,h))){if(!h.K&&xl(v.h,h)&&v.G==3){try{var A=v.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)ro(v),to(v);else break e;Ul(v),dt(18)}}else v.za=F[1],0<v.za-v.T&&37500>F[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ot(b(v.Za,v),6e3));if(1>=Qa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else si(v,11)}else if((h.K||v.g==h)&&ro(v),!J(_))for(F=v.Da.g.parse(_),_=0;_<F.length;_++){let je=F[_];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Kt=je[3];Kt!=null&&(v.la=Kt,v.j.info("VER="+v.la));const qt=je[4];qt!=null&&(v.Aa=qt,v.j.info("SVER="+v.Aa));const ai=je[5];ai!=null&&typeof ai=="number"&&0<ai&&(A=1.5*ai,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Jt=h.g;if(Jt){const Dr=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var Z=A.h;Z.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&($a(Z,Z.h),Z.h=null))}if(A.D){const zl=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(A.ya=zl,nt(A.I,A.D,zl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var he=h;if(A.qa=Hc(A,A.J?A.ia:null,A.W),he.K){_n(A.h,he);var Fe=he,zt=A.L;zt&&(Fe.I=zt),Fe.B&&(Li(Fe),Us(Fe)),A.g=he}else zc(A);0<v.i.length&&no(v)}else je[0]!="stop"&&je[0]!="close"||si(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?si(v,7):kl(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}Oi(4)}catch{}}var Mc=class{constructor(h,_){this.g=h,this.map=_}};function Jr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Qa(h){return h.h?1:h.g?h.g.size:0}function xl(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function $a(h,_){h.g?h.g.add(_):h.h=_}function _n(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Jr.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Cl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const v of h.g.values())_=_.concat(v.D);return _}return z(h.i)}function md(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],v=h.length,A=0;A<v;A++)_.push(h[A]);return _}_=[],v=0;for(A in h)_[v++]=h[A];return _}function Ya(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var v=0;v<h;v++)_.push(v);return _}_=[],v=0;for(const A in h)_[v++]=A;return _}}}function Dl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var v=Ya(h),A=md(h),F=A.length,Z=0;Z<F;Z++)_.call(void 0,A[Z],v&&v[Z],h)}var zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(h,_){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var A=h[v].indexOf("="),F=null;if(0<=A){var Z=h[v].substring(0,A);F=h[v].substring(A+1)}else Z=h[v];_(Z,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,qs(this,h.j),this.o=h.o,this.g=h.g,Ui(this,h.s),this.l=h.l;var _=h.i,v=new ti;v.i=_.i,_.g&&(v.g=new Map(_.g),v.h=_.h),ei(this,v),this.m=h.m}else h&&(_=String(h).match(zs))?(this.h=!1,qs(this,_[1]||"",!0),this.o=Qn(_[2]||""),this.g=Qn(_[3]||"",!0),Ui(this,_[4]),this.l=Qn(_[5]||"",!0),ei(this,_[6]||"",!0),this.m=Qn(_[7]||"")):(this.h=!1,this.i=new ti(null,this.h))}Pt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(js(_,Nl,!0),":");var v=this.g;return(v||_=="file")&&(h.push("//"),(_=this.o)&&h.push(js(_,Nl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(js(v,v.charAt(0)=="/"?pd:Vl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",js(v,Xa)),h.join("")};function Pn(h){return new Pt(h)}function qs(h,_,v){h.j=v?Qn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ui(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ei(h,_,v){_ instanceof ti?(h.i=_,Pc(h.i,h.h)):(v||(_=js(_,_d)),h.i=new ti(_,h.h))}function nt(h,_,v){h.i.set(_,v)}function Fs(h){return nt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Qn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function js(h,_,v){return typeof h=="string"?(h=encodeURI(h).replace(_,Oc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Oc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Nl=/[#\/\?@]/g,Vl=/[#\?:]/g,pd=/[#\?]/g,_d=/[#\?@]/g,Xa=/#/g;function ti(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&gd(h.i,function(_,v){h.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}r=ti.prototype,r.add=function(h,_){$n(this),this.i=null,h=Sr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(_),this.h+=1,this};function ni(h,_){$n(h),_=Sr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ri(h,_){return $n(h),_=Sr(h,_),h.g.has(_)}r.forEach=function(h,_){$n(this),this.g.forEach(function(v,A){v.forEach(function(F){h.call(_,F,A,this)},this)},this)},r.na=function(){$n(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),v=[];for(let A=0;A<_.length;A++){const F=h[A];for(let Z=0;Z<F.length;Z++)v.push(_[A])}return v},r.V=function(h){$n(this);let _=[];if(typeof h=="string")ri(this,h)&&(_=_.concat(this.g.get(Sr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)_=_.concat(h[v])}return _},r.set=function(h,_){return $n(this),this.i=null,h=Sr(this,h),ri(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},r.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Ml(h,_,v){ni(h,_),0<v.length&&(h.i=null,h.g.set(Sr(h,_),z(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var v=0;v<_.length;v++){var A=_[v];const Z=encodeURIComponent(String(A)),he=this.V(A);for(A=0;A<he.length;A++){var F=Z;he[A]!==""&&(F+="="+encodeURIComponent(String(he[A]))),h.push(F)}}return this.i=h.join("&")};function Sr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Pc(h,_){_&&!h.j&&($n(h),h.i=null,h.g.forEach(function(v,A){var F=A.toLowerCase();A!=F&&(ni(this,A),Ml(this,F,v))},h)),h.j=_}function Hs(h,_){const v=new Kn;if(d.Image){const A=new Image;A.onload=D(Yn,v,"TestLoadImage: loaded",!0,_,A),A.onerror=D(Yn,v,"TestLoadImage: error",!1,_,A),A.onabort=D(Yn,v,"TestLoadImage: abort",!1,_,A),A.ontimeout=D(Yn,v,"TestLoadImage: timeout",!1,_,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function fr(h,_){const v=new Kn,A=new AbortController,F=setTimeout(()=>{A.abort(),Yn(v,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(Z=>{clearTimeout(F),Z.ok?Yn(v,"TestPingServer: ok",!0,_):Yn(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Yn(v,"TestPingServer: error",!1,_)})}function Yn(h,_,v,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(v)}catch{}}function Gs(){this.g=new ks}function Ar(h,_,v){const A=v||"";try{Dl(h,function(F,Z){let he=F;p(F)&&(he=cr(F)),_.push(A+Z+"="+encodeURIComponent(he))})}catch(F){throw _.push(A+"type="+encodeURIComponent("_badmap")),F}}function Bi(h){this.l=h.Ub||null,this.j=h.eb||!1}M(Bi,Tl),Bi.prototype.g=function(){return new ii(this.l,this.j)},Bi.prototype.i=function(h){return function(){return h}}({});function ii(h,_){wt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ii,wt),r=ii.prototype,r.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ir(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ol(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ol(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Rr(this):Ir(this),this.readyState==3&&Ol(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},r.Qa=function(h){this.g&&(this.response=h,Rr(this))},r.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ir(h)}r.setRequestHeader=function(h,_){this.u.append(h,_)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=_.next();return h.join(`\r
`)};function Ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pl(h){let _="";return pe(h,function(v,A){_+=A,_+=":",_+=v,_+=`\r
`}),_}function Gt(h,_,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Pl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):nt(h,_,v))}function Xe(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Xe,wt);var Wa=/^https?$/i,Ks=["POST","PUT"];r=Xe.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,_,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?bl(this.o):bl(Tr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){kc(this,Z);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)v.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())v.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Z=>Z.toLowerCase()=="content-type"),F=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Ks,_,void 0))||A||F||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,he]of v)this.g.setRequestHeader(Z,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qs(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){kc(this,Z)}};function kc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Za(h),xr(h)}function Za(h){h.A||(h.A=!0,We(h,"complete"),We(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,We(this,"complete"),We(this,"abort"),xr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xr(this,!0)),Xe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ja(this):this.bb())},r.bb=function(){Ja(this)};function Ja(h){if(h.h&&typeof c<"u"&&(!h.v[1]||Xn(h)!=4||h.Z()!=2)){if(h.u&&Xn(h)==4)on(h.Ea,0,h);else if(We(h,"readystatechange"),Xn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var A;if(A=he===0){var F=String(h.D).match(zs)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),A=!Wa.test(F?F.toLowerCase():"")}v=A}if(v)We(h,"complete"),We(h,"success");else{h.m=6;try{var Z=2<Xn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Za(h)}}finally{xr(h)}}}}function xr(h,_){if(h.g){Qs(h);const v=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||We(h,"ready");try{v.onreadystatechange=A}catch{}}}function Qs(h){h.I&&(d.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function Xn(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),ja(_)}};function Lc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function yd(h){const _={};h=(h.g&&2<=Xn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(J(h[A]))continue;var v=P(h[A]);const F=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Z=_[F]||[];_[F]=Z,Z.push(v)}I(_,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(h,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||_}function eo(h){this.Aa=0,this.i=[],this.j=new Kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,h),this.cb=$s("retryDelaySeedMs",1e4,h),this.Wa=$s("forwardChannelMaxRetries",2,h),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Jr(h&&h.concurrentRequestLimit),this.Da=new Gs,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=eo.prototype,r.la=8,r.G=1,r.connect=function(h,_,v,A){dt(0),this.W=h,this.H=_||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=Hc(this,null,this.W),no(this)};function kl(h){if(Uc(h),h.G==3){var _=h.U++,v=Pn(h.I);if(nt(v,"SID",h.K),nt(v,"RID",_),nt(v,"TYPE","terminate"),Ys(h,v),_=new pn(h,h.j,_),_.L=2,_.v=Fs(Pn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=_.v,v=!0),v||(_.g=Gc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Us(_)}jc(h)}function to(h){h.g&&(Xs(h),h.g.cancel(),h.g=null)}function Uc(h){to(h),h.u&&(d.clearTimeout(h.u),h.u=null),ro(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function no(h){if(!Ka(h.h)&&!h.s){h.s=!0;var _=h.Ga;re||V(),fe||(re(),fe=!0),ve.add(_,h),h.B=0}}function vd(h,_){return Qa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(b(h.Ga,h,_),Bl(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new pn(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=S(Z),O(Z,this.S)):Z=this.S),this.m!==null||this.O||(F.H=Z,Z=null),this.P)e:{for(var _=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=v;break e}if(_===4096||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=Bc(this,F,_),v=Pn(this.I),nt(v,"RID",h),nt(v,"CVER",22),this.D&&nt(v,"X-HTTP-Session-Id",this.D),Ys(this,v),Z&&(this.O?_="headers="+encodeURIComponent(String(Pl(Z)))+"&"+_:this.m&&Gt(v,this.m,Z)),$a(this.h,F),this.Ua&&nt(v,"TYPE","init"),this.P?(nt(v,"$req",_),nt(v,"SID","null"),F.T=!0,hr(F,v,null)):hr(F,v,_),this.G=2}}else this.G==3&&(h?Ll(this,h):this.i.length==0||Ka(this.h)||Ll(this))};function Ll(h,_){var v;_?v=_.l:v=h.U++;const A=Pn(h.I);nt(A,"SID",h.K),nt(A,"RID",v),nt(A,"AID",h.T),Ys(h,A),h.m&&h.o&&Gt(A,h.m,h.o),v=new pn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Bc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),$a(h.h,v),hr(v,A,_)}function Ys(h,_){h.H&&pe(h.H,function(v,A){nt(_,A,v)}),h.l&&Dl({},function(v,A){nt(_,A,v)})}function Bc(h,_,v){v=Math.min(h.i.length,v);var A=h.l?b(h.l.Na,h.l,h):null;e:{var F=h.i;let Z=-1;for(;;){const he=["count="+v];Z==-1?0<v?(Z=F[0].g,he.push("ofs="+Z)):Z=0:he.push("ofs="+Z);let Fe=!0;for(let zt=0;zt<v;zt++){let je=F[zt].g;const Kt=F[zt].map;if(je-=Z,0>je)Z=Math.max(0,F[zt].g-100),Fe=!1;else try{Ar(Kt,he,"req"+je+"_")}catch{A&&A(Kt)}}if(Fe){A=he.join("&");break e}}}return h=h.i.splice(0,v),_.D=h,A}function zc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;re||V(),fe||(re(),fe=!0),ve.add(_,h),h.v=0}}function Ul(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(b(h.Fa,h),Bl(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,qc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(b(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),to(this),qc(this))};function Xs(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function qc(h){h.g=new pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Pn(h.qa);nt(_,"RID","rpc"),nt(_,"SID",h.K),nt(_,"AID",h.T),nt(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&nt(_,"TO",h.ja),nt(_,"TYPE","xmlhttp"),Ys(h,_),h.m&&h.o&&Gt(_,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Fs(Pn(_)),v.m=null,v.P=!0,Zr(v,h)}r.Za=function(){this.C!=null&&(this.C=null,to(this),Ul(this),dt(19))};function ro(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Fc(h,_){var v=null;if(h.g==_){ro(h),Xs(h),h.g=null;var A=2}else if(xl(h.h,_))v=_.D,_n(h.h,_),A=1;else return;if(h.G!=0){if(_.o)if(A==1){v=_.m?_.m.length:0,_=Date.now()-_.F;var F=h.B;A=Mi(),We(A,new Bt(A,v)),no(h)}else zc(h);else if(F=_.s,F==3||F==0&&0<_.X||!(A==1&&vd(h,_)||A==2&&Ul(h)))switch(v&&0<v.length&&(_=h.h,_.i=_.i.concat(v)),F){case 1:si(h,5);break;case 4:si(h,10);break;case 3:si(h,6);break;default:si(h,2)}}}function Bl(h,_){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*_}function si(h,_){if(h.j.info("Error code "+_),_==2){var v=b(h.fb,h),A=h.Xa;const F=!A;A=new Pt(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qs(A,"https"),Fs(A),F?Hs(A.toString(),v):fr(A.toString(),v)}else dt(2);h.G=0,h.l&&h.l.sa(_),jc(h),Uc(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function jc(h){if(h.G=0,h.ka=[],h.l){const _=Cl(h.h);(_.length!=0||h.i.length!=0)&&(U(h.ka,_),U(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Hc(h,_,v){var A=v instanceof Pt?Pn(v):new Pt(v);if(A.g!="")_&&(A.g=_+"."+A.g),Ui(A,A.s);else{var F=d.location;A=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var Z=new Pt(null);A&&qs(Z,A),_&&(Z.g=_),F&&Ui(Z,F),v&&(Z.l=v),A=Z}return v=h.D,_=h.ya,v&&_&&nt(A,v,_),nt(A,"VER",h.la),Ys(h,A),A}function Gc(h,_,v){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Xe(new Bi({eb:v})):new Xe(h.pa),_.Ha(h.J),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kc(){}r=Kc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function io(){}io.prototype.g=function(h,_){return new yn(h,_)};function yn(h,_){wt.call(this),this.g=new eo(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!J(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!J(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Cr(this)}M(yn,wt),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){kl(this.g)},yn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=cr(h),h=v);_.i.push(new Mc(_.Ya++,h)),_.G==3&&no(_)},yn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,yn.aa.N.call(this)};function Qc(h){Xr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const v in _){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}M(Qc,Xr);function $c(){Sl.call(this),this.status=1}M($c,Sl);function Cr(h){this.g=h}M(Cr,Kc),Cr.prototype.ua=function(){We(this.g,"a")},Cr.prototype.ta=function(h){We(this.g,new Qc(h))},Cr.prototype.sa=function(h){We(this.g,new $c)},Cr.prototype.ra=function(){We(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,xb=function(){return new io},Ib=function(){return Mi()},Rb=Er,Lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,lf=ki,Wr.COMPLETE="complete",Ab=Wr,wl.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Pu=wl,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,Sb=Xe}).apply(typeof Xh<"u"?Xh:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new yp("@firebase/firestore");function zo(){return _s.logLevel}function u2(r){_s.setLogLevel(r)}function ae(r,...e){if(_s.logLevel<=qe.DEBUG){const t=e.map(bp);_s.debug(`Firestore (${hl}): ${r}`,...t)}}function Dt(r,...e){if(_s.logLevel<=qe.ERROR){const t=e.map(bp);_s.error(`Firestore (${hl}): ${r}`,...t)}}function Fr(r,...e){if(_s.logLevel<=qe.WARN){const t=e.map(bp);_s.warn(`Firestore (${hl}): ${r}`,...t)}}function bp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(r="Unexpected state"){const e=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: `+r;throw Dt(e),new Error(e)}function ye(r,e){r||ge()}function c2(r,e){r||ge()}function me(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wt.UNAUTHENTICATED))}shutdown(){}}class f2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class d2{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new an;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new an,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new an)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ye(typeof i.accessToken=="string"),new Cb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new Wt(e)}}class m2{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g2{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new m2(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ye(this.o===void 0);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?a(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string"),this.R=t.token,new p2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=y2(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%e.length))}return i}}function Ce(r,e){return r<e?-1:r>e?1:0}function Xo(r,e,t){return r.length===e.length&&r.every((i,a)=>t(i,e[a]))}function Nb(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new vt(0,0))}static max(){return new Ee(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t,i){t===void 0?t=0:t>e.length&&ge(),i===void 0?i=e.length-t:i>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=e.get(a),c=t.get(a);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ue extends Xu{construct(e,t,i){return new Ue(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Ue(t)}static emptyPath(){return new Ue([])}}const v2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Xu{construct(e,t,i){return new pt(e,t,i)}static isValidIdentifier(e){return v2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pt(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Ue.fromString(e))}static fromName(e){return new de(Ue.fromString(e).popFirst(5))}static empty(){return new de(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Ug(r){return r.fields.find(e=>e.kind===2)}function ma(r){return r.fields.filter(e=>e.kind!==2)}Tf.UNKNOWN_ID=-1;class uf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Wu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Wu(0,jn.min())}}function Vb(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new jn(a,de.empty(),e)}function Mb(r){return new jn(r.readTime,r.key,-1)}class jn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new jn(Ee.min(),de.empty(),-1)}static max(){return new jn(Ee.max(),de.empty(),-1)}}function wp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(r.documentKey,e.documentKey),t!==0?t:Ce(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(r){if(r.code!==W.FAILED_PRECONDITION||r.message!==Ob)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,i)=>{t(e)})}static reject(e){return new G((t,i)=>{i(e)})}static waitFor(e){return new G((t,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>i(m))}),c=!0,l===a&&t()})}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next(a=>a?G.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new G((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(y=>{c[p]=y,++d,d===l&&i(c)},y=>a(y))}})}static doWhile(e,t){return new G((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new an,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Bu(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{const a=Sp(i.target.error);this.V.reject(new Bu(e,a))}}static open(e,t,i,a){try{return new Bf(t,e.transaction(a,i))}catch(l){throw new Bu(t,l)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ae("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new T2(t)}}class Br{constructor(e,t,i){this.name=e,this.version=t,this.p=i,Br.S(vf())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ae("SimpleDb","Removing database:",e),ga(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ub())return!1;if(Br.v())return!0;const e=vf(),t=Br.S(e),i=0<t&&t<10,a=kb(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(ae("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Bu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new se(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new se(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Bu(e,c))},a.onupgradeneeded=l=>{ae("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.p.O(c,a.transaction,l.oldVersion,this.version).next(()=>{ae("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.M(e);const d=Bf.open(this.db,e,l?"readonly":"readwrite",i),m=a(d).next(p=>(d.g(),p)).catch(p=>(d.abort(p),G.reject(p))).toPromise();return m.catch(()=>{}),await d.m,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(ae("SimpleDb","Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kb(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class E2{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ga(this.B.delete())}}class Bu extends se{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xs(r){return r.name==="IndexedDbTransactionError"}class T2{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(ae("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ae("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ga(i)}add(e){return ae("SimpleDb","ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next(t=>(t===void 0&&(t=null),ae("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ae("SimpleDb","DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return ae("SimpleDb","COUNT",this.store.name),ga(this.store.count())}U(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new G((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(i),c=[];return this.W(l,(d,m)=>{c.push(m)}).next(()=>c)}}G(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new G((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}j(e,t){ae("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const a=this.cursor(i);return this.W(a,(l,c,d)=>d.delete())}J(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.W(a,t)}Y(e){const t=this.cursor({});return new G((i,a)=>{t.onerror=l=>{const c=Sp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}W(e,t){const i=[];return new G((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new E2(d),p=t(d.primaryKey,d.value,m);if(p instanceof G){const y=p.catch(T=>(m.done(),G.reject(T)));i.push(y)}m.isDone?a():m.K===null?d.continue():d.continue(m.K)}}).next(()=>G.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(r){return new G((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=Sp(i.target.error);t(a)}})}let g0=!1;function Sp(r){const e=Br.S(vf());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g0||(g0=!0,setTimeout(()=>{throw i},0)),i}}return r}class b2{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ae("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ae("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){xs(t)?ae("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Is(t)}await this.X(6e4)})}}class w2{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const i=new Set;let a=t,l=!0;return G.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!i.has(c))return ae("IndexBackfiller",`Processing collection: ${c}`),this.ne(e,c,a).next(d=>{a-=d,i.add(c)});l=!1})).next(()=>t-a)}ne(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.re(a,l)).next(d=>(ae("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}re(e,t){let i=e;return t.changes.forEach((a,l)=>{const c=Mb(l);wp(c,i)>0&&(i=c)}),new jn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Nn.oe=-1;function dc(r){return r==null}function Zu(r){return r===0&&1/r==-1/0}function Lb(r){return typeof r=="number"&&Number.isInteger(r)&&!Zu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=p0(e)),e=S2(r.get(t),e);return p0(e)}function S2(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function p0(r){return r+""}function Lr(r){const e=r.length;if(ye(e>=2),e===2)return ye(r.charAt(0)===""&&r.charAt(1)===""),Ue.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf("",l);switch((c<0||c>t)&&ge(),r.charAt(c+1)){case"":const d=r.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:ge()}l=c+2}return new Ue(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e){return[r,Sn(e)]}function Ub(r,e,t){return[r,Sn(e),t]}const A2={},R2=["prefixPath","collectionGroup","readTime","documentId"],I2=["prefixPath","collectionGroup","documentId"],x2=["collectionGroup","readTime","prefixPath","documentId"],C2=["canonicalId","targetId"],D2=["targetId","path"],N2=["path","targetId"],V2=["collectionId","parent"],M2=["indexId","uid"],O2=["uid","sequenceNumber"],P2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k2=["indexId","uid","orderedDocumentKey"],L2=["userId","collectionPath","documentId"],U2=["userId","collectionPath","largestBatchId"],B2=["userId","collectionGroup","largestBatchId"],Bb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],z2=[...Bb,"documentOverlays"],zb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qb=zb,Ap=[...qb,"indexConfiguration","indexState","indexEntries"],q2=Ap,F2=[...Ap,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Pb{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ht(r,e){const t=me(r);return Br.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ka(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Fb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wh(this.root,e,this.comparator,!0)}}class Wh{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??rn.RED,this.left=a??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new rn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,i,a,l){return this}insert(e,t,i){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v0(this.data.getIterator())}getIteratorFrom(e){return new v0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class v0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Oo(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new at(pt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jb("Invalid base64 string: "+l):l}}(e);return new Rt(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new Rt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const H2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(r){if(ye(!!r),typeof r=="string"){let e=0;const t=H2.exec(r);if(ye(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(r.seconds),nanos:gt(r.nanos)}}function gt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ys(r){return typeof r=="string"?Rt.fromBase64String(r):Rt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Rp(r){const e=r.mapValue.fields.__previous_value__;return zf(e)?Rp(e):e}function Ju(r){const e=Ii(r.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,t,i,a,l,c,d,m,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p}}class vs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hf={nullValue:"NULL_VALUE"};function Aa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?zf(r)?4:Hb(r)?9007199254740991:qf(r)?10:11:ge()}function jr(r,e){if(r===e)return!0;const t=Aa(r);if(t!==Aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ju(r).isEqual(Ju(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ii(a.timestampValue),d=Ii(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,l){return ys(a.bytesValue).isEqual(ys(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,l){return gt(a.geoPointValue.latitude)===gt(l.geoPointValue.latitude)&&gt(a.geoPointValue.longitude)===gt(l.geoPointValue.longitude)}(r,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return gt(a.integerValue)===gt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=gt(a.doubleValue),d=gt(l.doubleValue);return c===d?Zu(c)===Zu(d):isNaN(c)&&isNaN(d)}return!1}(r,e);case 9:return Xo(r.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(y0(c)!==y0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!jr(c[m],d[m])))return!1;return!0}(r,e);default:return ge()}}function ec(r,e){return(r.values||[]).find(t=>jr(t,e))!==void 0}function Es(r,e){if(r===e)return 0;const t=Aa(r),i=Aa(e);if(t!==i)return Ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(r.booleanValue,e.booleanValue);case 2:return function(l,c){const d=gt(l.integerValue||l.doubleValue),m=gt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(r,e);case 3:return E0(r.timestampValue,e.timestampValue);case 4:return E0(Ju(r),Ju(e));case 5:return Ce(r.stringValue,e.stringValue);case 6:return function(l,c){const d=ys(l),m=ys(c);return d.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=Ce(d[p],m[p]);if(y!==0)return y}return Ce(d.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ce(gt(l.latitude),gt(c.latitude));return d!==0?d:Ce(gt(l.longitude),gt(c.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return T0(r.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,y;const T=l.fields||{},b=c.fields||{},D=(d=T.value)===null||d===void 0?void 0:d.arrayValue,M=(m=b.value)===null||m===void 0?void 0:m.arrayValue,z=Ce(((p=D==null?void 0:D.values)===null||p===void 0?void 0:p.length)||0,((y=M==null?void 0:M.values)===null||y===void 0?void 0:y.length)||0);return z!==0?z:T0(D,M)}(r.mapValue,e.mapValue);case 11:return function(l,c){if(l===fs.mapValue&&c===fs.mapValue)return 0;if(l===fs.mapValue)return 1;if(c===fs.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let T=0;T<m.length&&T<y.length;++T){const b=Ce(m[T],y[T]);if(b!==0)return b;const D=Es(d[m[T]],p[y[T]]);if(D!==0)return D}return Ce(m.length,y.length)}(r.mapValue,e.mapValue);default:throw ge()}}function E0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ce(r,e);const t=Ii(r),i=Ii(e),a=Ce(t.seconds,i.seconds);return a!==0?a:Ce(t.nanos,i.nanos)}function T0(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Es(t[a],i[a]);if(l)return l}return Ce(t.length,i.length)}function Wo(r){return zg(r)}function zg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const i=Ii(t);return`time(${i.seconds},${i.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ys(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return de.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=zg(l);return i+"]"}(r.arrayValue):"mapValue"in r?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${zg(t.fields[c])}`;return a+"}"}(r.mapValue):ge()}function Ra(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function qg(r){return!!r&&"integerValue"in r}function tc(r){return!!r&&"arrayValue"in r}function b0(r){return!!r&&"nullValue"in r}function w0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ff(r){return!!r&&"mapValue"in r}function qf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function zu(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return ka(r.mapValue.fields,(t,i)=>e.mapValue.fields[t]=zu(i)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zu(r.arrayValue.values[t]);return e}return Object.assign({},r)}function Hb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Gb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function K2(r){return"nullValue"in r?hf:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ra(vs.empty(),de.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?qf(r)?Gb:{mapValue:{}}:ge()}function Q2(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ra(vs.empty(),de.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Gb:"mapValue"in r?qf(r)?{mapValue:{}}:fs:ge()}function S0(r,e){const t=Es(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function A0(r,e){const t=Es(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=pt.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=zu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];ff(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){ka(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new sn(zu(this.value))}}function Kb(r){const e=[];return ka(r.fields,(t,i)=>{const a=new pt([t]);if(ff(i)){const l=Kb(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new ht(e,0,Ee.min(),Ee.min(),Ee.min(),sn.empty(),0)}static newFoundDocument(e,t,i,a){return new ht(e,1,t,Ee.min(),i,a,0)}static newNoDocument(e,t){return new ht(e,2,t,Ee.min(),Ee.min(),sn.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,Ee.min(),Ee.min(),sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.position=e,this.inclusive=t}}function R0(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=Es(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function I0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!jr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function $2(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{}class Be extends Qb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Y2(e,t,i):t==="array-contains"?new Z2(e,i):t==="in"?new Jb(e,i):t==="not-in"?new J2(e,i):t==="array-contains-any"?new eC(e,i):new Be(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new X2(e,i):new W2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Es(t,this.value)):t!==null&&Aa(this.value)===Aa(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends Qb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new et(e,t)}matches(e){return Zo(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zo(r){return r.op==="and"}function Fg(r){return r.op==="or"}function Ip(r){return $b(r)&&Zo(r)}function $b(r){for(const e of r.filters)if(e instanceof et)return!1;return!0}function jg(r){if(r instanceof Be)return r.field.canonicalString()+r.op.toString()+Wo(r.value);if(Ip(r))return r.filters.map(e=>jg(e)).join(",");{const e=r.filters.map(t=>jg(t)).join(",");return`${r.op}(${e})`}}function Yb(r,e){return r instanceof Be?function(i,a){return a instanceof Be&&i.op===a.op&&i.field.isEqual(a.field)&&jr(i.value,a.value)}(r,e):r instanceof et?function(i,a){return a instanceof et&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&Yb(c,a.filters[d]),!0):!1}(r,e):void ge()}function Xb(r,e){const t=r.filters.concat(e);return et.create(t,r.op)}function Wb(r){return r instanceof Be?function(t){return`${t.field.canonicalString()} ${t.op} ${Wo(t.value)}`}(r):r instanceof et?function(t){return t.op.toString()+" {"+t.getFilters().map(Wb).join(" ,")+"}"}(r):"Filter"}class Y2 extends Be{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class X2 extends Be{constructor(e,t){super(e,"in",t),this.keys=Zb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W2 extends Be{constructor(e,t){super(e,"not-in",t),this.keys=Zb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zb(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>de.fromName(i.referenceValue))}class Z2 extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tc(t)&&ec(t.arrayValue,this.value)}}class Jb extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}}class J2 extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ec(this.value.arrayValue,t)}}class eC extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ec(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function Hg(r,e=null,t=[],i=[],a=null,l=null,c=null){return new tC(r,e,t,i,a,l,c)}function Ia(r){const e=me(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>jg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Wo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Wo(i)).join(",")),e.ue=t}return e.ue}function mc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!$2(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Yb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!I0(r.startAt,e.startAt)&&I0(r.endAt,e.endAt)}function bf(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function wf(r,e){return r.filters.filter(t=>t instanceof Be&&t.field.isEqual(e))}function x0(r,e,t){let i=hf,a=!0;for(const l of wf(r,e)){let c=hf,d=!0;switch(l.op){case"<":case"<=":c=K2(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=hf}S0({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];S0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function C0(r,e,t){let i=fs,a=!0;for(const l of wf(r,e)){let c=fs,d=!0;switch(l.op){case">=":case">":c=Q2(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=fs}A0({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];A0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ew(r,e,t,i,a,l,c,d){return new Ci(r,e,t,i,a,l,c,d)}function fl(r){return new Ci(r)}function D0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xp(r){return r.collectionGroup!==null}function Go(r){const e=me(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new at(pt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new nc(l,i))}),t.has(pt.keyField().canonicalString())||e.ce.push(new nc(pt.keyField(),i))}return e.ce}function An(r){const e=me(r);return e.le||(e.le=nC(e,Go(r))),e.le}function nC(r,e){if(r.limitType==="F")return Hg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new nc(a.field,l)});const t=r.endAt?new Ts(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Ts(r.startAt.position,r.startAt.inclusive):null;return Hg(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Gg(r,e){const t=r.filters.concat([e]);return new Ci(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Sf(r,e,t){return new Ci(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function gc(r,e){return mc(An(r),An(e))&&r.limitType===e.limitType}function tw(r){return`${Ia(An(r))}|lt:${r.limitType}`}function qo(r){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Wb(a)).join(", ")}]`),dc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Wo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Wo(a)).join(",")),`Target(${i})`}(An(r))}; limitType=${r.limitType})`}function pc(r,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(r,e)&&function(i,a){for(const l of Go(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(r,e)&&function(i,a){return!(i.startAt&&!function(c,d,m){const p=R0(c,d,m);return c.inclusive?p<=0:p<0}(i.startAt,Go(i),a)||i.endAt&&!function(c,d,m){const p=R0(c,d,m);return c.inclusive?p>=0:p>0}(i.endAt,Go(i),a))}(r,e)}function nw(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function rw(r){return(e,t)=>{let i=!1;for(const a of Go(r)){const l=rC(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function rC(r,e,t){const i=r.field.isKeyField()?de.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Es(m,p):ge()}(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Fb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new ct(de.comparator);function Mn(){return iC}const iw=new ct(de.comparator);function ku(...r){let e=iw;for(const t of r)e=e.insert(t.key,t);return e}function sw(r){let e=iw;return r.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ur(){return qu()}function aw(){return qu()}function qu(){return new Cs(r=>r.toString(),(r,e)=>r.isEqual(e))}const sC=new ct(de.comparator),aC=new at(de.comparator);function De(...r){let e=aC;for(const t of r)e=e.add(t);return e}const oC=new at(Ce);function Cp(){return oC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zu(e)?"-0":e}}function ow(r){return{integerValue:""+r}}function lw(r,e){return Lb(e)?ow(e):Dp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function lC(r,e,t){return r instanceof Jo?function(a,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zf(l)&&(l=Rp(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):r instanceof xa?cw(r,e):r instanceof Ca?hw(r,e):function(a,l){const c=uw(a,l),d=N0(c)+N0(a.Pe);return qg(c)&&qg(a.Pe)?ow(d):Dp(a.serializer,d)}(r,e)}function uC(r,e,t){return r instanceof xa?cw(r,e):r instanceof Ca?hw(r,e):t}function uw(r,e){return r instanceof el?function(i){return qg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Jo extends Ff{}class xa extends Ff{constructor(e){super(),this.elements=e}}function cw(r,e){const t=fw(e);for(const i of r.elements)t.some(a=>jr(a,i))||t.push(i);return{arrayValue:{values:t}}}class Ca extends Ff{constructor(e){super(),this.elements=e}}function hw(r,e){let t=fw(e);for(const i of r.elements)t=t.filter(a=>!jr(a,i));return{arrayValue:{values:t}}}class el extends Ff{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function N0(r){return gt(r.integerValue||r.doubleValue)}function fw(r){return tc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.field=e,this.transform=t}}function cC(r,e){return r.field.isEqual(e.field)&&function(i,a){return i instanceof xa&&a instanceof xa||i instanceof Ca&&a instanceof Ca?Xo(i.elements,a.elements,jr):i instanceof el&&a instanceof el?jr(i.Pe,a.Pe):i instanceof Jo&&a instanceof Jo}(r.transform,e.transform)}class hC{constructor(e,t){this.version=e,this.transformResults=t}}class _t{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _t}static exists(e){return new _t(void 0,e)}static updateTime(e){return new _t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jf{}function dw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ml(r.key,_t.none()):new dl(r.key,r.data,_t.none());{const t=r.data,i=sn.empty();let a=new at(pt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Di(r.key,i,new Vn(a.toArray()),_t.none())}}function fC(r,e,t){r instanceof dl?function(a,l,c){const d=a.value.clone(),m=M0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Di?function(a,l,c){if(!df(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=M0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(mw(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(r,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Fu(r,e,t,i){return r instanceof dl?function(l,c,d,m){if(!df(l.precondition,c))return d;const p=l.value.clone(),y=O0(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(r,e,t,i):r instanceof Di?function(l,c,d,m){if(!df(l.precondition,c))return d;const p=O0(l.fieldTransforms,m,c),y=c.data;return y.setAll(mw(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,i):function(l,c,d){return df(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(r,e,t)}function dC(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=uw(i.transform,a||null);l!=null&&(t===null&&(t=sn.empty()),t.set(i.field,l))}return t||null}function V0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Xo(i,a,(l,c)=>cC(l,c))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class dl extends jf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Di extends jf{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function mw(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}}),e}function M0(r,e,t){const i=new Map;ye(r.length===t.length);for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,uC(c,d,t[a]))}return i}function O0(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,lC(l,c,e))}return i}class ml extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Np extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&fC(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Fu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Fu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=aw();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=dw(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ee.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>V0(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>V0(t,i))}}class Mp{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ye(e.mutations.length===i.length);let a=function(){return sC}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Mp(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Ge;function gw(r){switch(r){default:return ge();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function pw(r){if(r===void 0)return Dt("GRPC error has no .code"),W.UNKNOWN;switch(r){case Ut.OK:return W.OK;case Ut.CANCELLED:return W.CANCELLED;case Ut.UNKNOWN:return W.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return W.INTERNAL;case Ut.UNAVAILABLE:return W.UNAVAILABLE;case Ut.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ut.NOT_FOUND:return W.NOT_FOUND;case Ut.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ut.ABORTED:return W.ABORTED;case Ut.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ut.DATA_LOSS:return W.DATA_LOSS;default:return ge()}}(Ge=Ut||(Ut={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new ba([4294967295,4294967295],0);function P0(r){const e=_w().encode(r),t=new wb;return t.update(e),new Uint8Array(t.digest())}function k0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ba([t,i],0),new ba([a,l],0)]}class Pp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Lu(`Invalid padding: ${t}`);if(i<0)throw new Lu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ba.fromNumber(this.Ie)}Ee(e,t,i){let a=e.add(t.multiply(ba.fromNumber(i)));return a.compare(gC)===1&&(a=new ba([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=P0(e),[i,a]=k0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Pp(l,a,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.Ie===0)return;const t=P0(e),[i,a]=k0(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,a,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yc(Ee.min(),a,new ct(Ce),Mn(),De())}}class vc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new vc(i,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t,i,a){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=a}}class yw{constructor(e,t){this.targetId=e,this.me=t}}class vw{constructor(e,t,i=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class L0{constructor(){this.fe=0,this.ge=B0(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),i=De();return this.ge.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:ge()}}),new vc(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=B0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=U0(),this.Qe=new ct(Ce)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,a)=>{this.ze(a)&&t(a)})}He(e){const t=e.targetId,i=e.me.count,a=this.Je(t);if(a){const l=a.target;if(bf(l))if(i===0){const c=new de(l.path);this.Ue(t,c,ht.newNoDocument(c,Ee.min()))}else ye(i===1);else{const c=this.Ye(t);if(c!==i){const d=this.Ze(e),m=d?this.Xe(d,e,c):1;if(m!==0){this.je(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,p)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ys(i).toUint8Array()}catch(m){if(m instanceof jb)return Fr("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Pp(c,a,l)}catch(m){return Fr(m instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.Ie===0?null:d}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),a++)}),a}rt(e){const t=new Map;this.Be.forEach((l,c)=>{const d=this.Je(c);if(d){if(l.current&&bf(d.target)){const m=new de(d.target.path);this.ke.get(m)!==null||this.it(c,m)||this.Ue(c,m,ht.newNoDocument(m,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=De();this.qe.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.Je(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const a=new yc(e,t,this.Qe,this.ke,i);return this.ke=Mn(),this.qe=U0(),this.Qe=new ct(Ce),a}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new L0,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new at(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new L0),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function U0(){return new ct(de.comparator)}function B0(){return new ct(de.comparator)}const _C={asc:"ASCENDING",desc:"DESCENDING"},yC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vC={and:"AND",or:"OR"};class EC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kg(r,e){return r.useProto3Json||dc(e)?e:{value:e}}function tl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ew(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function TC(r,e){return tl(r,e.toTimestamp())}function Nt(r){return ye(!!r),Ee.fromTimestamp(function(t){const i=Ii(t);return new vt(i.seconds,i.nanos)}(r))}function kp(r,e){return Qg(r,e).canonicalString()}function Qg(r,e){const t=function(a){return new Ue(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Tw(r){const e=Ue.fromString(r);return ye(Nw(e)),e}function rc(r,e){return kp(r.databaseId,e.path)}function zr(r,e){const t=Tw(e);if(t.get(1)!==r.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new de(Sw(t))}function bw(r,e){return kp(r.databaseId,e)}function ww(r){const e=Tw(r);return e.length===4?Ue.emptyPath():Sw(e)}function $g(r){return new Ue(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Sw(r){return ye(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function z0(r,e,t){return{name:rc(r,e),fields:t.value.mapValue.fields}}function Aw(r,e,t){const i=zr(r,e.name),a=Nt(e.updateTime),l=e.createTime?Nt(e.createTime):Ee.min(),c=new sn({mapValue:{fields:e.fields}}),d=ht.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function bC(r,e){return"found"in e?function(i,a){ye(!!a.found),a.found.name,a.found.updateTime;const l=zr(i,a.found.name),c=Nt(a.found.updateTime),d=a.found.createTime?Nt(a.found.createTime):Ee.min(),m=new sn({mapValue:{fields:a.found.fields}});return ht.newFoundDocument(l,c,d,m)}(r,e):"missing"in e?function(i,a){ye(!!a.missing),ye(!!a.readTime);const l=zr(i,a.missing),c=Nt(a.readTime);return ht.newNoDocument(l,c)}(r,e):ge()}function wC(r,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(ye(y===void 0||typeof y=="string"),Rt.fromBase64String(y||"")):(ye(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Rt.fromUint8Array(y||new Uint8Array))}(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const y=p.code===void 0?W.UNKNOWN:pw(p.code);return new se(y,p.message||"")}(c);t=new vw(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=zr(r,i.document.name),l=Nt(i.document.updateTime),c=i.document.createTime?Nt(i.document.createTime):Ee.min(),d=new sn({mapValue:{fields:i.document.fields}}),m=ht.newFoundDocument(a,l,c,d),p=i.targetIds||[],y=i.removedTargetIds||[];t=new mf(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=zr(r,i.document),l=i.readTime?Nt(i.readTime):Ee.min(),c=ht.newNoDocument(a,l),d=i.removedTargetIds||[];t=new mf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=zr(r,i.document),l=i.removedTargetIds||[];t=new mf([],l,a,null)}else{if(!("filter"in e))return ge();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new mC(a,l),d=i.targetId;t=new yw(d,c)}}return t}function ic(r,e){let t;if(e instanceof dl)t={update:z0(r,e.key,e.value)};else if(e instanceof ml)t={delete:rc(r,e.key)};else if(e instanceof Di)t={update:z0(r,e.key,e.data),updateMask:CC(e.fieldMask)};else{if(!(e instanceof Np))return ge();t={verify:rc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof Jo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ca)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof el)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw ge()}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:TC(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge()}(r,e.precondition)),t}function Yg(r,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?_t.updateTime(Nt(l.updateTime)):l.exists!==void 0?_t.exists(l.exists):_t.none()}(e.currentDocument):_t.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,d){let m=null;if("setToServerValue"in d)ye(d.setToServerValue==="REQUEST_TIME"),m=new Jo;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];m=new xa(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];m=new Ca(y)}else"increment"in d?m=new el(c,d.increment):ge();const p=pt.fromServerFormat(d.fieldPath);return new _c(p,m)}(r,a)):[];if(e.update){e.update.name;const a=zr(r,e.update.name),l=new sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const p=m.fieldPaths||[];return new Vn(p.map(y=>pt.fromServerFormat(y)))}(e.updateMask);return new Di(a,l,c,t,i)}return new dl(a,l,t,i)}if(e.delete){const a=zr(r,e.delete);return new ml(a,t)}if(e.verify){const a=zr(r,e.verify);return new Np(a,t)}return ge()}function SC(r,e){return r&&r.length>0?(ye(e!==void 0),r.map(t=>function(a,l){let c=a.updateTime?Nt(a.updateTime):Nt(l);return c.isEqual(Ee.min())&&(c=Nt(l)),new hC(c,a.transformResults||[])}(t,e))):[]}function Rw(r,e){return{documents:[bw(r,e.path)]}}function Iw(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=bw(r,a);const l=function(p){if(p.length!==0)return Dw(et.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(y=>function(b){return{field:Fo(b.field),direction:RC(b.dir)}}(y))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Kg(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:t,parent:a}}function xw(r){let e=ww(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ye(i===1);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=function(T){const b=Cw(T);return b instanceof et&&Ip(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(b=>function(M){return new nc(jo(M.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(b))}(t.orderBy));let d=null;t.limit&&(d=function(T){let b;return b=typeof T=="object"?T.value:T,dc(b)?null:b}(t.limit));let m=null;t.startAt&&(m=function(T){const b=!!T.before,D=T.values||[];return new Ts(D,b)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const b=!T.before,D=T.values||[];return new Ts(D,b)}(t.endAt)),ew(e,a,c,l,d,"F",m,p)}function AC(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cw(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=jo(t.unaryFilter.field);return Be.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=jo(t.unaryFilter.field);return Be.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return Be.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return Be.create(c,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(r):r.fieldFilter!==void 0?function(t){return Be.create(jo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return et.create(t.compositeFilter.filters.map(i=>Cw(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(r):ge()}function RC(r){return _C[r]}function IC(r){return yC[r]}function xC(r){return vC[r]}function Fo(r){return{fieldPath:r.canonicalString()}}function jo(r){return pt.fromServerFormat(r.fieldPath)}function Dw(r){return r instanceof Be?function(t){if(t.op==="=="){if(w0(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(b0(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w0(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(b0(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:IC(t.op),value:t.value}}}(r):r instanceof et?function(t){const i=t.getFilters().map(a=>Dw(a));return i.length===1?i[0]:{compositeFilter:{op:xC(t.op),filters:i}}}(r):ge()}function CC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,t,i,a,l=Ee.min(),c=Ee.min(),d=Rt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.ct=e}}function DC(r,e){let t;if(e.document)t=Aw(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=de.fromSegments(e.noDocument.path),a=Na(e.noDocument.readTime);t=ht.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge();{const i=de.fromSegments(e.unknownDocument.path),a=Na(e.unknownDocument.version);t=ht.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(a){const l=new vt(a[0],a[1]);return Ee.fromTimestamp(l)}(e.readTime)),t}function q0(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(l,c){return{name:rc(l,c.key),fields:c.data.value.mapValue.fields,updateTime:tl(l,c.version.toTimestamp()),createTime:tl(l,c.createTime.toTimestamp())}}(r.ct,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Da(e.version)};else{if(!e.isUnknownDocument())return ge();i.unknownDocument={path:t.path.toArray(),version:Da(e.version)}}return i}function Af(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Da(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Na(r){const e=new vt(r.seconds,r.nanoseconds);return Ee.fromTimestamp(e)}function pa(r,e){const t=(e.baseMutations||[]).map(l=>Yg(r.ct,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map(l=>Yg(r.ct,l)),a=vt.fromMillis(e.localWriteTimeMs);return new Vp(e.batchId,a,t,i)}function Uu(r){const e=Na(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Na(r.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=function(l){return l.documents!==void 0}(r.query)?function(l){return ye(l.documents.length===1),An(fl(ww(l.documents[0])))}(r.query):function(l){return An(xw(l))}(r.query),new Ti(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Rt.fromBase64String(r.resumeToken))}function Mw(r,e){const t=Da(e.snapshotVersion),i=Da(e.lastLimboFreeSnapshotVersion);let a;a=bf(e.target)?Rw(r.ct,e.target):Iw(r.ct,e.target)._t;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ia(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function Lp(r){const e=xw({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Sf(e,e.limit,"L"):e}function bg(r,e){return new Op(e.largestBatchId,Yg(r.ct,e.overlayMutation))}function F0(r,e){const t=e.path.lastSegment();return[r,Sn(e.path.popLast()),t]}function j0(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Da(i.readTime),documentKey:Sn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{getBundleMetadata(e,t){return H0(e).get(t).next(i=>{if(i)return function(l){return{id:l.bundleId,createTime:Na(l.createTime),version:l.version}}(i)})}saveBundleMetadata(e,t){return H0(e).put(function(a){return{bundleId:a.id,createTime:Da(Nt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return G0(e).get(t).next(i=>{if(i)return function(l){return{name:l.name,query:Lp(l.bundledQuery),readTime:Na(l.readTime)}}(i)})}saveNamedQuery(e,t){return G0(e).put(function(a){return{name:a.name,readTime:Da(Nt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function H0(r){return Ht(r,"bundles")}function G0(r){return Ht(r,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const i=t.uid||"";return new Hf(e,i)}getOverlay(e,t){return Cu(e).get(F0(this.userId,t)).next(i=>i?bg(this.serializer,i):null)}getOverlays(e,t){const i=Ur();return G.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((l,c)=>{const d=new Op(t,c);a.push(this.ht(e,d))}),G.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(c=>a.add(Sn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(Cu(e).j("collectionPathOverlayIndex",d))}),G.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Ur(),l=Sn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Cu(e).U("collectionPathOverlayIndex",c).next(d=>{for(const m of d){const p=bg(this.serializer,m);a.set(p.getKey(),p)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const l=Ur();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cu(e).J({index:"collectionGroupOverlayIndex",range:d},(m,p,y)=>{const T=bg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):y.done()}).next(()=>l)}ht(e,t){return Cu(e).put(function(a,l,c){const[d,m,p]=F0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:ic(a.ct,c.mutation)}}(this.serializer,this.userId,t))}}function Cu(r){return Ht(r,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{Pt(e){return Ht(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const i=t==null?void 0:t.value;return i?Rt.fromUint8Array(i):Rt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(gt(e.integerValue));else if("doubleValue"in e){const i=gt(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Zu(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Ii(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ys(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?Hb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ge()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const i=e.fields||{};this.dt(t,55);for(const a of Object.keys(i))this.Vt(a,t),this.Tt(i[a],t)}wt(e,t){var i,a;const l=e.fields||{};this.dt(t,53);const c="value",d=((a=(i=l[c].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.length)||0;this.dt(t,15),t.At(gt(d)),this.Vt(c,t),this.Tt(l[c],t)}bt(e,t){const i=e.values||[];this.dt(t,50);for(const a of i)this.Tt(a,t)}yt(e,t){this.dt(t,37),de.fromName(e).path.forEach(i=>{this.dt(t,60),this.Dt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}_a.vt=new _a;function MC(r){if(r===0)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function K0(r){const e=64-function(i){let a=0;for(let l=0;l<8;++l){const c=MC(255&i[l]);if(a+=c,c!==8)break}return a}(r);return Math.ceil(e/8)}class OC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ot(i.value),i=t.next();this.Nt()}Lt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const a=t.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const a=t.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const t=this.qt(e),i=K0(t);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Kt(e){const t=this.qt(e),i=K0(t);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class PC{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class kC{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Du{constructor(){this.jt=new OC,this.Ht=new PC(this.jt),this.Jt=new kC(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new ya(this.indexId,this.documentKey,this.arrayValue,i)}}function os(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Q0(r.arrayValue,e.arrayValue),t!==0?t:(t=Q0(r.directionalValue,e.directionalValue),t!==0?t:de.comparator(r.documentKey,e.documentKey)))}function Q0(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.Xt=new at((t,i)=>pt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(ye(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Ug(e);if(t!==void 0&&!this.sn(t))return!1;const i=ma(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.sn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.Xt.size>0){const d=this.Xt.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.on(d,m)||!this._n(this.en[c++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.en.length||!this._n(this.en[c++],d))return!1}return!0}an(){if(this.nn)return null;let e=new at(pt.comparator);const t=[];for(const i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new uf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new uf(i.field,0))}for(const i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new uf(i.field,i.dir==="asc"?0:1)));return new Tf(Tf.UNKNOWN_ID,this.collectionId,t,Wu.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(r){var e,t;if(ye(r instanceof Be||r instanceof et),r instanceof Be){if(r instanceof Jb){const a=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(l=>Be.create(r.field,"==",l)))||[];return et.create(a,"or")}return r}const i=r.filters.map(a=>Ow(a));return et.create(i,r.op)}function LC(r){if(r.getFilters().length===0)return[];const e=Zg(Ow(r));return ye(Pw(e)),Xg(e)||Wg(e)?[e]:e.getFilters()}function Xg(r){return r instanceof Be}function Wg(r){return r instanceof et&&Ip(r)}function Pw(r){return Xg(r)||Wg(r)||function(t){if(t instanceof et&&Fg(t)){for(const i of t.getFilters())if(!Xg(i)&&!Wg(i))return!1;return!0}return!1}(r)}function Zg(r){if(ye(r instanceof Be||r instanceof et),r instanceof Be)return r;if(r.filters.length===1)return Zg(r.filters[0]);const e=r.filters.map(i=>Zg(i));let t=et.create(e,r.op);return t=Rf(t),Pw(t)?t:(ye(t instanceof et),ye(Zo(t)),ye(t.filters.length>1),t.filters.reduce((i,a)=>Up(i,a)))}function Up(r,e){let t;return ye(r instanceof Be||r instanceof et),ye(e instanceof Be||e instanceof et),t=r instanceof Be?e instanceof Be?function(a,l){return et.create([a,l],"and")}(r,e):Y0(r,e):e instanceof Be?Y0(e,r):function(a,l){if(ye(a.filters.length>0&&l.filters.length>0),Zo(a)&&Zo(l))return Xb(a,l.getFilters());const c=Fg(a)?a:l,d=Fg(a)?l:a,m=c.filters.map(p=>Up(p,d));return et.create(m,"or")}(r,e),Rf(t)}function Y0(r,e){if(Zo(e))return Xb(e,r.getFilters());{const t=e.filters.map(i=>Up(r,i));return et.create(t,"or")}}function Rf(r){if(ye(r instanceof Be||r instanceof et),r instanceof Be)return r;const e=r.getFilters();if(e.length===1)return Rf(e[0]);if($b(r))return r;const t=e.map(a=>Rf(a)),i=[];return t.forEach(a=>{a instanceof Be?i.push(a):a instanceof et&&(a.op===r.op?i.push(...a.filters):i.push(a))}),i.length===1?i[0]:et.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.un=new Bp}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(jn.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class Bp{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new at(Ue.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new at(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Uint8Array(0);class BC{constructor(e,t){this.databaseId=t,this.cn=new Bp,this.ln=new Cs(i=>Ia(i),(i,a)=>mc(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const l={collectionId:i,parent:Sn(a)};return X0(e).put(l)}return G.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Nb(t),""],!1,!0);return X0(e).U(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;i.push(Lr(c.parent))}return i})}addFieldIndex(e,t){const i=Nu(e),a=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=ko(e);return l.next(d=>{c.put(j0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const i=Nu(e),a=ko(e),l=Po(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Nu(e),i=Po(e),a=ko(e);return t.j().next(()=>i.j()).next(()=>a.j())}createTargetIndexes(e,t){return G.forEach(this.hn(t),i=>this.getIndexType(e,i).next(a=>{if(a===0||a===1){const l=new $0(i).an();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const i=Po(e);let a=!0;const l=new Map;return G.forEach(this.hn(t),c=>this.Pn(e,c).next(d=>{a&&(a=!!d),l.set(c,d)})).next(()=>{if(a){let c=De();const d=[];return G.forEach(l,(m,p)=>{ae("IndexedDbIndexManager",`Using index ${function(K){return`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`}(m)} to execute ${Ia(t)}`);const y=function(K,ue){const oe=Ug(ue);if(oe===void 0)return null;for(const pe of wf(K,oe.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null}(p,m),T=function(K,ue){const oe=new Map;for(const pe of ma(ue))for(const I of wf(K,pe.fieldPath))switch(I.op){case"==":case"in":oe.set(pe.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return oe.set(pe.fieldPath.canonicalString(),I.value),Array.from(oe.values())}return null}(p,m),b=function(K,ue){const oe=[];let pe=!0;for(const I of ma(ue)){const S=I.kind===0?x0(K,I.fieldPath,K.startAt):C0(K,I.fieldPath,K.startAt);oe.push(S.value),pe&&(pe=S.inclusive)}return new Ts(oe,pe)}(p,m),D=function(K,ue){const oe=[];let pe=!0;for(const I of ma(ue)){const S=I.kind===0?C0(K,I.fieldPath,K.endAt):x0(K,I.fieldPath,K.endAt);oe.push(S.value),pe&&(pe=S.inclusive)}return new Ts(oe,pe)}(p,m),M=this.In(m,p,b),z=this.In(m,p,D),U=this.Tn(m,p,T),Y=this.En(m.indexId,y,M,b.inclusive,z,D.inclusive,U);return G.forEach(Y,J=>i.G(J,t.limit).next(K=>{K.forEach(ue=>{const oe=de.fromSegments(ue.documentKey);c.has(oe)||(c=c.add(oe),d.push(oe))})}))}).next(()=>d)}return G.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=LC(et.create(e.filters,"and")).map(i=>Hg(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,i,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(i.length,l.length),p=m/(t!=null?t.length:1),y=[];for(let T=0;T<m;++T){const b=t?this.dn(t[T/p]):Zh,D=this.An(e,b,i[T%p],a),M=this.Rn(e,b,l[T%p],c),z=d.map(U=>this.An(e,b,U,!0));y.push(...this.createRange(D,M,z))}return y}An(e,t,i,a){const l=new ya(e,de.empty(),t,i);return a?l:l.Zt()}Rn(e,t,i,a){const l=new ya(e,de.empty(),t,i);return a?l.Zt():l}Pn(e,t){const i=new $0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const d of l)i.rn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let i=2;const a=this.hn(t);return G.forEach(a,l=>this.Pn(e,l).next(c=>{c?i!==0&&c.fields.length<function(m){let p=new at(pt.comparator),y=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(y?1:0)}(l)&&(i=1):i=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&i===2?1:i)}Vn(e,t){const i=new Du;for(const a of ma(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Yt(a.kind);_a.vt.It(l,c)}return i.zt()}dn(e){const t=new Du;return _a.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const i=new Du;return _a.vt.It(Ra(this.databaseId,t),i.Yt(function(l){const c=ma(l);return c.length===0?0:c[c.length-1].kind}(e))),i.zt()}Tn(e,t,i){if(i===null)return[];let a=[];a.push(new Du);let l=0;for(const c of ma(e)){const d=i[l++];for(const m of a)if(this.fn(t,c.fieldPath)&&tc(d))a=this.gn(a,c,d);else{const p=m.Yt(c.kind);_a.vt.It(d,p)}}return this.pn(a)}In(e,t,i){return this.Tn(e,t,i.position)}pn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].zt();return t}gn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const m=new Du;m.seed(d.zt()),_a.vt.It(c,m.Yt(t.kind)),l.push(m)}return l}fn(e,t){return!!e.filters.find(i=>i instanceof Be&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){const i=Nu(e),a=ko(e);return(t?i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.U()).next(l=>{const c=[];return G.forEach(l,d=>a.get([d.indexId,this.uid]).next(m=>{c.push(function(y,T){const b=T?new Wu(T.sequenceNumber,new jn(Na(T.readTime),new de(Lr(T.documentKey)),T.largestBatchId)):Wu.empty(),D=y.fields.map(([M,z])=>new uf(pt.fromServerFormat(M),z));return new Tf(y.indexId,y.collectionGroup,D,b)}(d,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ce(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Nu(e),l=ko(e);return this.yn(e).next(c=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>G.forEach(d,m=>l.put(j0(m.indexId,this.uid,c,i)))))}updateIndexEntries(e,t){const i=new Map;return G.forEach(t,(a,l)=>{const c=i.get(a.collectionGroup);return(c?G.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(d=>(i.set(a.collectionGroup,d),G.forEach(d,m=>this.wn(e,a,m).next(p=>{const y=this.Sn(l,m);return p.isEqual(y)?G.resolve():this.bn(e,l,m,p,y)}))))})}Dn(e,t,i,a){return Po(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(i,t.key),documentKey:t.key.path.toArray()})}vn(e,t,i,a){return Po(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const a=Po(e);let l=new at(os);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,t)])},(c,d)=>{l=l.add(new ya(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>l)}Sn(e,t){let i=new at(os);const a=this.Vn(t,e);if(a==null)return i;const l=Ug(t);if(l!=null){const c=e.data.field(l.fieldPath);if(tc(c))for(const d of c.arrayValue.values||[])i=i.add(new ya(t.indexId,e.key,this.dn(d),a))}else i=i.add(new ya(t.indexId,e.key,Zh,a));return i}bn(e,t,i,a,l){ae("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,p,y,T,b){const D=m.getIterator(),M=p.getIterator();let z=Oo(D),U=Oo(M);for(;z||U;){let Y=!1,J=!1;if(z&&U){const K=y(z,U);K<0?J=!0:K>0&&(Y=!0)}else z!=null?J=!0:Y=!0;Y?(T(U),U=Oo(M)):J?(b(z),z=Oo(D)):(z=Oo(D),U=Oo(M))}}(a,l,os,d=>{c.push(this.Dn(e,t,i,d))},d=>{c.push(this.vn(e,t,i,d))}),G.waitFor(c)}yn(e){let t=1;return ko(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((c,d)=>os(c,d)).filter((c,d,m)=>!d||os(c,m[d-1])!==0);const a=[];a.push(e);for(const c of i){const d=os(c,e),m=os(c,t);if(d===0)a[0]=e.Zt();else if(d>0&&m<0)a.push(c),a.push(c.Zt());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Cn(a[c],a[c+1]))return[];const d=[a[c].indexId,this.uid,a[c].arrayValue,a[c].directionalValue,Zh,[]],m=[a[c+1].indexId,this.uid,a[c+1].arrayValue,a[c+1].directionalValue,Zh,[]];l.push(IDBKeyRange.bound(d,m))}return l}Cn(e,t){return os(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(W0)}getMinOffset(e,t){return G.mapArray(this.hn(t),i=>this.Pn(e,i).next(a=>a||ge())).next(W0)}}function X0(r){return Ht(r,"collectionParents")}function Po(r){return Ht(r,"indexEntries")}function Nu(r){return Ht(r,"indexConfiguration")}function ko(r){return Ht(r,"indexState")}function W0(r){ye(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;wp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new jn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Dn{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(r,e,t){const i=r.store("mutations"),a=r.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=i.J({range:c},(y,T,b)=>(d++,b.delete()));l.push(m.next(()=>{ye(d===1)}));const p=[];for(const y of t.mutations){const T=Ub(e,y.key.path,t.batchId);l.push(a.delete(T)),p.push(y.key)}return G.waitFor(l).next(()=>p)}function If(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ge();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);class Gf{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Fn={}}static lt(e,t,i,a){ye(e.uid!=="");const l=e.isAuthenticated()?e.uid:"";return new Gf(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).J({index:"userMutationsIndex",range:i},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const l=Ho(e),c=ls(e);return c.add({}).next(d=>{ye(typeof d=="number");const m=new Vp(d,t,i,a),p=function(D,M,z){const U=z.baseMutations.map(J=>ic(D.ct,J)),Y=z.mutations.map(J=>ic(D.ct,J));return{userId:M,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:U,mutations:Y}}(this.serializer,this.userId,m),y=[];let T=new at((b,D)=>Ce(b.canonicalString(),D.canonicalString()));for(const b of a){const D=Ub(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),y.push(c.put(p)),y.push(l.put(D,A2))}return T.forEach(b=>{y.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Fn[d]=m.keys()}),G.waitFor(y).next(()=>m)})}lookupMutationBatch(e,t){return ls(e).get(t).next(i=>i?(ye(i.userId===this.userId),pa(this.serializer,i)):null)}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.Fn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return ls(e).J({index:"userMutationsIndex",range:a},(c,d,m)=>{d.userId===this.userId&&(ye(d.batchId>=i),l=pa(this.serializer,d)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ls(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,l,c)=>{i=l.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ls(e).U("userMutationsIndex",t).next(i=>i.map(a=>pa(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=cf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Ho(e).J({range:a},(c,d,m)=>{const[p,y,T]=c,b=Lr(y);if(p===this.userId&&t.path.isEqual(b))return ls(e).get(T).next(D=>{if(!D)throw ge();ye(D.userId===this.userId),l.push(pa(this.serializer,D))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Ce);const a=[];return t.forEach(l=>{const c=cf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Ho(e).J({range:d},(p,y,T)=>{const[b,D,M]=p,z=Lr(D);b===this.userId&&l.path.isEqual(z)?i=i.add(M):T.done()});a.push(m)}),G.waitFor(a).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=cf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new at(Ce);return Ho(e).J({range:c},(m,p,y)=>{const[T,b,D]=m,M=Lr(b);T===this.userId&&i.isPrefixOf(M)?M.length===a&&(d=d.add(D)):y.done()}).next(()=>this.xn(e,d))}xn(e,t){const i=[],a=[];return t.forEach(l=>{a.push(ls(e).get(l).next(c=>{if(c===null)throw ge();ye(c.userId===this.userId),i.push(pa(this.serializer,c))}))}),G.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return kw(e._e,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),G.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const i=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return Ho(e).J({range:i},(l,c,d)=>{if(l[0]===this.userId){const m=Lr(l[1]);a.push(m)}else d.done()}).next(()=>{ye(a.length===0)})})}containsKey(e,t){return Lw(e,this.userId,t)}Nn(e){return Uw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lw(r,e,t){const i=cf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Ho(r).J({range:l,H:!0},(d,m,p)=>{const[y,T,b]=d;y===e&&T===a&&(c=!0),p.done()}).next(()=>c)}function ls(r){return Ht(r,"mutations")}function Ho(r){return Ht(r,"documentMutations")}function Uw(r){return Ht(r,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Va(0)}static kn(){return new Va(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const i=new Va(t.highestTargetId);return t.highestTargetId=i.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Ee.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.qn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Qn(e,a)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(t,i),this.Qn(e,i))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lo(e).delete(t.targetId)).next(()=>this.qn(e)).next(i=>(ye(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,t,i){let a=0;const l=[];return Lo(e).J((c,d)=>{const m=Uu(d);m.sequenceNumber<=t&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>G.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Lo(e).J((i,a)=>{const l=Uu(a);t(l)})}qn(e){return J0(e).get("targetGlobalKey").next(t=>(ye(t!==null),t))}Qn(e,t){return J0(e).put("targetGlobalKey",t)}Kn(e,t){return Lo(e).put(Mw(this.serializer,t))}$n(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Ia(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Lo(e).J({range:a,index:"queryTargetsIndex"},(c,d,m)=>{const p=Uu(d);mc(t,p.target)&&(l=p,m.done())}).next(()=>l)}addMatchingKeys(e,t,i){const a=[],l=cs(e);return t.forEach(c=>{const d=Sn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))}),G.waitFor(a)}removeMatchingKeys(e,t,i){const a=cs(e);return G.forEach(t,l=>{const c=Sn(l.path);return G.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=cs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=cs(e);let l=De();return a.J({range:i,H:!0},(c,d,m)=>{const p=Lr(c[1]),y=new de(p);l=l.add(y)}).next(()=>l)}containsKey(e,t){const i=Sn(t.path),a=IDBKeyRange.bound([i],[Nb(i)],!1,!0);let l=0;return cs(e).J({index:"documentTargetsIndex",H:!0,range:a},([c,d],m,p)=>{c!==0&&(l++,p.done())}).next(()=>l>0)}ot(e,t){return Lo(e).get(t).next(i=>i?Uu(i):null)}}function Lo(r){return Ht(r,"targets")}function J0(r){return Ht(r,"targetGlobal")}function cs(r){return Ht(r,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT([r,e],[t,i]){const a=Ce(r,t);return a===0?Ce(e,i):a}class qC{constructor(e){this.Un=e,this.buffer=new at(eT),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();eT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xs(t)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Is(t)}await this.Hn(3e5)})}}class jC{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Nn.oe);const i=new qC(t);return this.Jn.forEachTarget(e,a=>i.zn(a.sequenceNumber)).next(()=>this.Jn.Zn(e,a=>i.zn(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Z0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let i,a,l,c,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(p=Date.now(),zo()<=qe.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function HC(r,e){return new jC(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.db=e,this.garbageCollector=HC(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}er(e){let t=0;return this.Zn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(i,a)=>t(a))}addReference(e,t,i){return Jh(e,i)}removeReference(e,t,i){return Jh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Jh(e,t)}nr(e,t){return function(a,l){let c=!1;return Uw(a).Y(d=>Lw(a,d,l).next(m=>(m&&(c=!0),G.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.tr(e,(c,d)=>{if(d<=t){const m=this.nr(e,c).next(p=>{if(!p)return l++,i.getEntry(e,c).next(()=>(i.removeEntry(c,Ee.min()),cs(e).delete(function(T){return[0,Sn(T.path)]}(c))))});a.push(m)}}).next(()=>G.waitFor(a)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Jh(e,t)}tr(e,t){const i=cs(e);let a,l=Nn.oe;return i.J({index:"documentTargetsIndex"},([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==Nn.oe&&t(new de(Lr(a)),l),l=p,a=m):l=Nn.oe}).next(()=>{l!==Nn.oe&&t(new de(Lr(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jh(r,e){return cs(r).put(function(i,a){return{targetId:0,path:Sn(i.path),sequenceNumber:a}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.changes=new Cs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return fa(e).put(i)}removeEntry(e,t,i){return fa(e).delete(function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Af(c),d[d.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.rr(e,i)))}getEntry(e,t){let i=ht.newInvalidDocument(t);return fa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(t))},(a,l)=>{i=this.ir(t,l)}).next(()=>i)}sr(e,t){let i={size:0,document:ht.newInvalidDocument(t)};return fa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vu(t))},(a,l)=>{i={document:this.ir(t,l),size:If(l)}}).next(()=>i)}getEntries(e,t){let i=Mn();return this._r(e,t,(a,l)=>{const c=this.ir(a,l);i=i.insert(a,c)}).next(()=>i)}ar(e,t){let i=Mn(),a=new ct(de.comparator);return this._r(e,t,(l,c)=>{const d=this.ir(l,c);i=i.insert(l,d),a=a.insert(l,If(c))}).next(()=>({documents:i,ur:a}))}_r(e,t,i){if(t.isEmpty())return G.resolve();let a=new at(rT);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Vu(a.first()),Vu(a.last())),c=a.getIterator();let d=c.getNext();return fa(e).J({index:"documentKeyIndex",range:l},(m,p,y)=>{const T=de.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&rT(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,p),d=c.hasNext()?c.getNext():null),d?y.$(Vu(d)):y.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Af(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fa(e).U(IDBKeyRange.bound(d,m,!0)).next(p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Mn();for(const T of p){const b=this.ir(de.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(pc(t,b)||a.has(b.key))&&(y=y.insert(b.key,b))}return y})}getAllFromCollectionGroup(e,t,i,a){let l=Mn();const c=nT(t,i),d=nT(t,jn.max());return fa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(m,p,y)=>{const T=this.ir(de.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&y.done()}).next(()=>l)}newChangeBuffer(e){return new QC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tT(e).get("remoteDocumentGlobalKey").next(t=>(ye(!!t),t))}rr(e,t){return tT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const i=DC(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return ht.newInvalidDocument(e)}}function zw(r){return new KC(r)}class QC extends Bw{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Cs(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new at((l,c)=>Ce(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const d=this.lr.get(l);if(t.push(this.cr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=q0(this.cr.serializer,c);a=a.add(l.path.popLast());const p=If(m);i+=p-d.size,t.push(this.cr.addEntry(e,l,m))}else if(i-=d.size,this.trackRemovals){const m=q0(this.cr.serializer,c.convertToNoDocument(Ee.min()));t.push(this.cr.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.cr.updateMetadata(e,i)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(i=>(this.lr.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:i,ur:a})=>(a.forEach((l,c)=>{this.lr.set(l,{size:c,readTime:i.get(l).readTime})}),i))}}function tT(r){return Ht(r,"remoteDocumentGlobal")}function fa(r){return Ht(r,"remoteDocumentsV14")}function Vu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nT(r,e){const t=e.documentKey.path.toArray();return[r,Af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rT(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Ce(t[l],i[l]),a)return a;return a=Ce(t.length,i.length),a||(a=Ce(t[t.length-2],i[i.length-2]),a||Ce(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Fu(i.mutation,a,Vn.empty(),vt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,De()).next(()=>i))}getLocalViewOfDocuments(e,t,i=De()){const a=Ur();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=ku();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Ur();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,De()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,a){let l=Mn();const c=qu(),d=function(){return qu()}();return t.forEach((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Di)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Fu(y.mutation,p,y.mutation.getFieldMask(),vt.now())):c.set(p.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,y)=>c.set(p,y)),t.forEach((p,y)=>{var T;return d.set(p,new $C(y,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=qu();let a=new ct((c,d)=>c-d),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Vn.empty();y=d.applyToLocalView(p,y),i.set(m,y);const T=(a.get(d.batchId)||De()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,T=aw();y.forEach(b=>{if(!l.has(b)){const D=dw(t.get(b),i.get(b));D!==null&&T.set(b,D),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return G.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return de.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):G.resolve(Ur());let d=-1,m=l;return c.next(p=>G.forEach(p,(y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{m=m.insert(y,b)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,De())).next(y=>({batchId:d,changes:sw(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(i=>{let a=ku();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=ku();return this.indexManager.getCollectionParents(e,l).next(d=>G.forEach(d,m=>{const p=function(T,b){return new Ci(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(y=>{y.forEach((T,b)=>{c=c.insert(T,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,ht.newInvalidDocument(y)))});let d=ku();return c.forEach((m,p)=>{const y=l.get(m);y!==void 0&&Fu(y.mutation,p,Vn.empty(),vt.now()),pc(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Nt(a.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(a){return{name:a.name,query:Lp(a.bundledQuery),readTime:Nt(a.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.overlays=new ct(de.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ur();return G.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.ht(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const a=Ur(),l=t.length+1,c=new de(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return G.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new ct((p,y)=>p-y);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=Ur(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Ur(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>d.set(p,y)),!(d.size()>=a)););return G.resolve(d)}ht(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Op(t,i));let l=this.Ir.get(t);l===void 0&&(l=De(),this.Ir.set(t,l)),this.Ir.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.Tr=new at(Xt.Er),this.dr=new at(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new Xt(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new de(new Ue([])),i=new Xt(t,e),a=new Xt(t,e+1),l=[];return this.dr.forEachInRange([i,a],c=>{this.Vr(c),l.push(c.key)}),l}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new de(new Ue([])),i=new Xt(t,e),a=new Xt(t,e+1);let l=De();return this.dr.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Xt(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return de.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new at(Xt.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Vp(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.br=this.br.add(new Xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return G.resolve(c)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.vr(i),l=a<0?0:a;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),a=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([i,a],c=>{const d=this.Dr(c.wr);l.push(d)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Ce);return t.forEach(a=>{const l=new Xt(a,0),c=new Xt(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],d=>{i=i.add(d.wr)})}),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new de(l),0);let d=new at(Ce);return this.br.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.wr)),!0)},c),G.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach(i=>{const a=this.Dr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){ye(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(t.mutations,a=>{const l=new Xt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new Xt(t,0),a=this.br.firstAfterOrEqual(i);return G.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.Mr=e,this.docs=function(){return new ct(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let i=Mn();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():ht.newInvalidDocument(a))}),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Mn();const c=t.path,d=new de(c.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||wp(Mb(y),i)<=0||(a.has(y.key)||pc(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,a){ge()}Or(e,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new eD(this)}getSize(e){return G.resolve(this.size)}}class eD extends Bw{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.cr.addEntry(e,a)):this.cr.removeEntry(i)}),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.persistence=e,this.Nr=new Cs(t=>Ia(t),mc),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zp,this.targetCount=0,this.kr=Va.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,a)=>t(a)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Va(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.Nr.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),G.waitFor(l).next(()=>a)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Nn(0),this.Kr=!1,this.Kr=!0,this.$r=new WC,this.referenceDelegate=e(this),this.Ur=new tD(this),this.indexManager=new UC,this.remoteDocumentCache=function(a){return new JC(a)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Vw(t),this.Gr=new YC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new ZC(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const a=new nD(this.Qr.next());return this.referenceDelegate.zr(),i(a).next(l=>this.referenceDelegate.jr(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Hr(e,t){return G.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class nD extends Pb{constructor(e){super(),this.currentSequenceNumber=e}}class Kf{constructor(e){this.persistence=e,this.Jr=new zp,this.Yr=null}static Zr(e){return new Kf(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(a=>this.Xr.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Xr.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,i=>{const a=de.fromPath(i);return this.ei(e,a).next(l=>{l||t.removeEntry(a,Ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.serializer=e}O(e,t,i,a){const l=new Bf("createOrUpgrade",t);i<1&&a>=1&&(function(m){m.createObjectStore("owner")}(e),function(m){m.createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0}),m.createObjectStore("documentMutations")}(e),iT(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=G.resolve();return i<3&&a>=3&&(i!==0&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),iT(e)),c=c.next(()=>function(m){const p=m.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(l))),i<4&&a>=4&&(i!==0&&(c=c.next(()=>function(m,p){return p.store("mutations").U().next(y=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0});const T=p.store("mutations"),b=y.map(D=>T.put(D));return G.waitFor(b)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&a>=5&&(c=c.next(()=>this.ni(l))),i<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.ri(l)))),i<7&&a>=7&&(c=c.next(()=>this.ii(l))),i<8&&a>=8&&(c=c.next(()=>this.si(e,l))),i<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&a>=10&&(c=c.next(()=>this.oi(l))),i<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(c=c.next(()=>{(function(m){const p=m.createObjectStore("documentOverlays",{keyPath:L2});p.createIndex("collectionPathOverlayIndex",U2,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",B2,{unique:!1})})(e)})),i<13&&a>=13&&(c=c.next(()=>function(m){const p=m.createObjectStore("remoteDocumentsV14",{keyPath:R2});p.createIndex("documentKeyIndex",I2),p.createIndex("collectionGroupIndex",x2)}(e)).next(()=>this._i(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(c=c.next(()=>this.ai(e,l))),i<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:M2}).createIndex("sequenceNumberIndex",O2,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:P2}).createIndex("documentKeyIndex",k2,{unique:!1})}(e))),i<16&&a>=16&&(c=c.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),i<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore("globals",{keyPath:"name"})})(e)})),c}ri(e){let t=0;return e.store("remoteDocuments").J((i,a)=>{t+=If(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.U().next(a=>G.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",c).next(d=>G.forEach(d,m=>{ye(m.userId===l.userId);const p=pa(this.serializer,m);return kw(e,l.userId,p).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return i.J((c,d)=>{const m=new Ue(c),p=function(T){return[0,Sn(T)]}(m);l.push(t.get(p).next(y=>y?G.resolve():(T=>t.put({targetId:0,path:Sn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>G.waitFor(l))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:V2});const i=t.store("collectionParents"),a=new Bp,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return i.put({collectionId:d,parent:Sn(m)})}};return t.store("remoteDocuments").J({H:!0},(c,d)=>{const m=new Ue(c);return l(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,d,m],p)=>{const y=Lr(d);return l(y.popLast())}))}oi(e){const t=e.store("targets");return t.J((i,a)=>{const l=Uu(a),c=Mw(this.serializer,l);return t.put(c)})}_i(e,t){const i=t.store("remoteDocuments"),a=[];return i.J((l,c)=>{const d=t.store("remoteDocumentsV14"),m=function(T){return T.document?new de(Ue.fromString(T.document.name).popFirst(5)):T.noDocument?de.fromSegments(T.noDocument.path):T.unknownDocument?de.fromSegments(T.unknownDocument.path):ge()}(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))}).next(()=>G.waitFor(a))}ai(e,t){const i=t.store("mutations"),a=zw(this.serializer),l=new Fw(Kf.Zr,this.serializer.ct);return i.U().next(c=>{const d=new Map;return c.forEach(m=>{var p;let y=(p=d.get(m.userId))!==null&&p!==void 0?p:De();pa(this.serializer,m).keys().forEach(T=>y=y.add(T)),d.set(m.userId,y)}),G.forEach(d,(m,p)=>{const y=new Wt(p),T=Hf.lt(this.serializer,y),b=l.getIndexManager(y),D=Gf.lt(y,this.serializer,b,l.referenceDelegate);return new qw(a,D,T,b).recalculateAndSaveOverlaysForDocumentKeys(new Bg(t,Nn.oe),m).next()})})}}function iT(r){r.createObjectStore("targetDocuments",{keyPath:D2}).createIndex("documentTargetsIndex",N2,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",C2,{unique:!0}),r.createObjectStore("targetGlobal")}const wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qp{constructor(e,t,i,a,l,c,d,m,p,y,T=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ui=l,this.window=c,this.document=d,this.ci=p,this.li=y,this.hi=T,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=b=>Promise.resolve(),!qp.D())throw new se(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GC(this,a),this.Ai=t+"main",this.serializer=new Vw(m),this.Ri=new Br(this.Ai,this.hi,new rD(this.serializer)),this.$r=new VC,this.Ur=new zC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zw(this.serializer),this.Gr=new NC,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,y===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,wg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Nn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xs(e))return ae("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Mu(e).get("owner").next(t=>G.resolve(this.vi(t)))}Ci(e){return ef(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const i=Ht(t,"clientMetadata");return i.U().next(a=>{const l=this.xi(a,18e5),c=a.filter(d=>l.indexOf(d)===-1);return G.forEach(c,d=>i.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||ef(e).U().next(i=>this.xi(i,5e3).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ae("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Bg(e,Nn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(i=>this.Mi(i.updateTimeMs,t)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ef(e).U().next(t=>this.xi(t,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Gf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BC(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,i){ae("IndexedDbPersistence","Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===17?F2:m===16?q2:m===15?Ap:m===14?qb:m===13?zb:m===12?z2:m===11?Bb:void ge()}(this.hi);let c;return this.Ri.runTransaction(e,a,l,d=>(c=new Bg(d,this.Qr?this.Qr.next():Nn.oe),t==="readwrite-primary"?this.wi(c).next(m=>!!m||this.Si(c)).next(m=>{if(!m)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new se(W.FAILED_PRECONDITION,Ob);return i(c)}).next(m=>this.Di(c).next(()=>m)):this.Ki(c).next(()=>i(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Ki(e){return Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(W.FAILED_PRECONDITION,wg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put("owner",t)}static D(){return Br.D()}bi(e){const t=Mu(e);return t.get("owner").next(i=>this.vi(i)?(ae("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Mi(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Dt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;lb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const i=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ae("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Dt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mu(r){return Ht(r,"owner")}function ef(r){return Ht(r,"clientMetadata")}function Fp(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=a}static Wi(e,t){let i=De(),a=De();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new jp(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lb()?8:kb(vf())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.Yi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Zi(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new iD;return this.Xi(e,t,c).next(d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)})}).next(()=>l.result)}es(e,t,i,a){return i.documentReadCount<this.ji?(zo()<=qe.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(zo()<=qe.DEBUG&&ae("QueryEngine","Query:",qo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(zo()<=qe.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):G.resolve())}Yi(e,t){if(D0(t))return G.resolve(null);let i=An(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Sf(t,null,"F"),i=An(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=De(...l);return this.Ji.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.ts(t,d);return this.ns(t,p,c,m.readTime)?this.Yi(e,Sf(t,null,"F")):this.rs(e,p,t,m)}))})))}Zi(e,t,i,a){return D0(t)||a.isEqual(Ee.min())?G.resolve(null):this.Ji.getDocuments(e,i).next(l=>{const c=this.ts(t,l);return this.ns(t,c,i,a)?G.resolve(null):(zo()<=qe.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),qo(t)),this.rs(e,c,t,Vb(a,-1)).next(d=>d))})}ts(e,t){let i=new at(rw(e));return t.forEach((a,l)=>{pc(e,l)&&(i=i.add(l))}),i}ns(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Xi(e,t,i){return zo()<=qe.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,jn.min(),i)}rs(e,t,i,a){return this.Ji.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t,i,a){this.persistence=e,this.ss=t,this.serializer=a,this.os=new ct(Ce),this._s=new Cs(l=>Ia(l),mc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Hw(r,e,t,i){return new sD(r,e,t,i)}async function Gw(r,e){const t=me(r);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let m=De();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next(p=>({hs:p,removedBatchIds:c,addedBatchIds:d}))})})}function aD(r,e){const t=me(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return function(d,m,p,y){const T=p.batch,b=T.keys();let D=G.resolve();return b.forEach(M=>{D=D.next(()=>y.getEntry(m,M)).next(z=>{const U=p.docVersions.get(M);ye(U!==null),z.version.compareTo(U)<0&&(T.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=De();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function Kw(r){const e=me(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function oD(r,e){const t=me(r),i=e.snapshotVersion;let a=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});a=t.os;const d=[];e.targetChanges.forEach((y,T)=>{const b=a.get(T);if(!b)return;d.push(t.Ur.removeMatchingKeys(l,y.removedDocuments,T).next(()=>t.Ur.addMatchingKeys(l,y.addedDocuments,T)));let D=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?D=D.withResumeToken(Rt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):y.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(y.resumeToken,i)),a=a.insert(T,D),function(z,U,Y){return z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(b,D,y)&&d.push(t.Ur.updateTargetData(l,D))});let m=Mn(),p=De();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))}),d.push(Qw(l,c,e.documentUpdates).next(y=>{m=y.Ps,p=y.Is})),!i.isEqual(Ee.min())){const y=t.Ur.getLastRemoteSnapshotVersion(l).next(T=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(y)}return G.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.os=a,l))}function Qw(r,e,t){let i=De(),a=De();return t.forEach(l=>i=i.add(l)),e.getEntries(r,i).next(l=>{let c=Mn();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ee.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ae("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Ps:c,Is:a}})}function lD(r,e){const t=me(r);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nl(r,e){const t=me(r);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Ur.getTargetData(i,e).next(l=>l?(a=l,G.resolve(a)):t.Ur.allocateTargetId(i).next(c=>(a=new Ti(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function rl(r,e,t){const i=me(r),a=i.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!xs(c))throw c;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.os=i.os.remove(e),i._s.delete(a.target)}function xf(r,e,t){const i=me(r);let a=Ee.min(),l=De();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,y){const T=me(m),b=T._s.get(y);return b!==void 0?G.resolve(T.os.get(b)):T.Ur.getTargetData(p,y)}(i,c,An(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>i.ss.getDocumentsMatchingQuery(c,e,t?a:Ee.min(),t?l:De())).next(d=>(Xw(i,nw(e),d),{documents:d,Ts:l})))}function $w(r,e){const t=me(r),i=me(t.Ur),a=t.os.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>i.ot(l,e).next(c=>c?c.target:null))}function Yw(r,e){const t=me(r),i=t.us.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.cs.getAllFromCollectionGroup(a,e,Vb(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Xw(t,e,a),a))}function Xw(r,e,t){let i=r.us.get(e)||Ee.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),r.us.set(e,i)}async function uD(r,e,t,i){const a=me(r);let l=De(),c=Mn();for(const p of t){const y=e.Es(p.metadata.name);p.document&&(l=l.add(y));const T=e.ds(p);T.setReadTime(e.As(p.metadata.readTime)),c=c.insert(y,T)}const d=a.cs.newChangeBuffer({trackRemovals:!0}),m=await nl(a,function(y){return An(fl(Ue.fromString(`__bundle__/docs/${y}`)))}(i));return a.persistence.runTransaction("Apply bundle documents","readwrite",p=>Qw(p,d,c).next(y=>(d.apply(p),y)).next(y=>a.Ur.removeMatchingKeysForTargetId(p,m.targetId).next(()=>a.Ur.addMatchingKeys(p,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(p,y.Ps,y.Is)).next(()=>y.Ps)))}async function cD(r,e,t=De()){const i=await nl(r,An(Lp(e.bundledQuery))),a=me(r);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=Nt(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return a.Gr.saveNamedQuery(l,e);const d=i.withResumeToken(Rt.EMPTY_BYTE_STRING,c);return a.os=a.os.insert(d.targetId,d),a.Ur.updateTargetData(l,d).next(()=>a.Ur.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>a.Ur.addMatchingKeys(l,t,i.targetId)).next(()=>a.Gr.saveNamedQuery(l,e))})}function sT(r,e){return`firestore_clients_${r}_${e}`}function aT(r,e,t){let i=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Sg(r,e){return`firestore_targets_${r}_${e}`}class Cf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Rs(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new se(a.error.code,a.error.message))),c?new Cf(e,t,a.state,l):(Dt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ju{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Rs(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new se(i.error.code,i.error.message))),l?new ju(e,i.state,a):(Dt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Df{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=Cp();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=Lb(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Df(e,l):(Dt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hp{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Hp(t.clientId,t.onlineState):(Dt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jg{constructor(){this.activeTargetIds=Cp()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ag{constructor(e,t,i,a,l){this.window=e,this.ui=t,this.persistenceKey=i,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new ct(Ce),this.started=!1,this.bs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Ds=sT(this.persistenceKey,this.ps),this.vs=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Jg),this.Cs=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.xs=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this.Os=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const i of e){if(i===this.ps)continue;const a=this.getItem(sT(this.persistenceKey,i));if(a){const l=Df.Rs(i,a);l&&(this.Ss=this.Ss.insert(l.clientId,l))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const i=this.Ls(t);i&&this.Bs(i)}for(const i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,i){this.qs(e,t,i),this.Qs(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Sg(this.persistenceKey,e));if(a){const l=ju.Rs(e,a);l&&(i=l.state)}}return t&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sg(this.persistenceKey,e))}updateQueryState(e,t,i){this.$s(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Qs(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ae("SharedClientState","READ",e,t),t}setItem(e,t){ae("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ae("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ae("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const i=this.Gs(t.key);return this.zs(i,null)}{const i=this.js(t.key,t.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const i=this.Hs(t.key,t.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const i=this.Ys(t.key,t.newValue);if(i)return this.Zs(i)}}else if(t.key===this.xs){if(t.newValue!==null){const i=this.Ls(t.newValue);if(i)return this.Bs(i)}}else if(t.key===this.vs){const i=function(l){let c=Nn.oe;if(l!=null)try{const d=JSON.parse(l);ye(typeof d=="number"),c=d}catch(d){Dt("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(t.newValue);i!==Nn.oe&&this.sequenceNumberHandler(i)}else if(t.key===this.Os){const i=this.Xs(t.newValue);await Promise.all(i.map(a=>this.syncEngine.eo(a)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,i){const a=new Cf(this.currentUser,e,t,i),l=aT(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Vs())}Qs(e){const t=aT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,i){const a=Sg(this.persistenceKey,e),l=new ju(e,t,i);this.setItem(a,l.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const i=this.Gs(e);return Df.Rs(i,t)}Hs(e,t){const i=this.Fs.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Cf.Rs(new Wt(l),a,t)}Ys(e,t){const i=this.Ms.exec(e),a=Number(i[1]);return ju.Rs(a,t)}Ls(e){return Hp.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ae("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const i=t?this.Ss.insert(e,t):this.Ss.remove(e),a=this.ks(this.Ss),l=this.ks(i),c=[],d=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||d.push(m)}),this.syncEngine.io(c,d).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Cp();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Ww{constructor(){this.so=new Jg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Jg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tf=null;function Rg(){return tf===null?tf=function(){return 268435456+Math.round(2147483648*Math.random())}():tf++,"0x"+tf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class mD extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${a}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${l}`}get Fo(){return!1}Mo(t,i,a,l,c){const d=Rg(),m=this.xo(t,i.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${d}:`,m,a);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,l,c),this.No(t,m,p,a).then(y=>(ae("RestConnection",`Received RPC '${t}' ${d}: `,y),y),y=>{throw Fr("RestConnection",`RPC '${t}' ${d} failed with error: `,y,"url: ",m,"request:",a),y})}Lo(t,i,a,l,c,d){return this.Mo(t,i,a,l,c)}Oo(t,i,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),a&&a.headers.forEach((l,c)=>t[c]=l)}xo(t,i){const a=fD[t];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,a){const l=Rg();return new Promise((c,d)=>{const m=new Sb;m.setWithCredentials(!0),m.listenOnce(Ab.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case lf.NO_ERROR:const y=m.getResponseJson();ae(cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case lf.TIMEOUT:ae(cn,`RPC '${e}' ${l} timed out`),d(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const T=m.getStatus();if(ae(cn,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const D=b==null?void 0:b.error;if(D&&D.status&&D.message){const M=function(U){const Y=U.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Y)>=0?Y:W.UNKNOWN}(D.status);d(new se(M,D.message))}else d(new se(W.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new se(W.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ae(cn,`RPC '${e}' ${l} completed.`)}});const p=JSON.stringify(a);ae(cn,`RPC '${e}' ${l} sending request:`,a),m.send(t,"POST",p,i,15)})}Bo(e,t,i){const a=Rg(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xb(),d=Ib(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Oo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=l.join("");ae(cn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const T=c.createWebChannel(y,m);let b=!1,D=!1;const M=new dD({Io:U=>{D?ae(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(b||(ae(cn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),ae(cn,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},To:()=>T.close()}),z=(U,Y,J)=>{U.listen(Y,K=>{try{J(K)}catch(ue){setTimeout(()=>{throw ue},0)}})};return z(T,Pu.EventType.OPEN,()=>{D||(ae(cn,`RPC '${e}' stream ${a} transport opened.`),M.yo())}),z(T,Pu.EventType.CLOSE,()=>{D||(D=!0,ae(cn,`RPC '${e}' stream ${a} transport closed`),M.So())}),z(T,Pu.EventType.ERROR,U=>{D||(D=!0,Fr(cn,`RPC '${e}' stream ${a} transport errored:`,U),M.So(new se(W.UNAVAILABLE,"The operation could not be completed")))}),z(T,Pu.EventType.MESSAGE,U=>{var Y;if(!D){const J=U.data[0];ye(!!J);const K=J,ue=K.error||((Y=K[0])===null||Y===void 0?void 0:Y.error);if(ue){ae(cn,`RPC '${e}' stream ${a} received error:`,ue);const oe=ue.status;let pe=function(R){const O=Ut[R];if(O!==void 0)return pw(O)}(oe),I=ue.message;pe===void 0&&(pe=W.INTERNAL,I="Unknown error status: "+oe+" with message "+ue.message),D=!0,M.So(new se(pe,I)),T.close()}else ae(cn,`RPC '${e}' stream ${a} received:`,J),M.bo(J)}}),z(d,Rb.STAT_EVENT,U=>{U.stat===Lg.PROXY?ae(cn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Lg.NOPROXY&&ae(cn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{M.wo()},0),M}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof window<"u"?window:null}function gf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(r){return new EC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,i=1e3,a=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=a,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,t-i);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t,i,a,l,c,d,m){this.ui=e,this.Ho=i,this.Jo=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Dt(t.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Yo===t&&this.P_(i,a)},i=>{e(()=>{const a=new se(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{i(()=>this.I_(a))}),this.stream.onMessage(a=>{i(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gD extends Jw{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=wC(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ee.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ee.min():c.readTime?Nt(c.readTime):Ee.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=$g(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=bf(m)?{documents:Rw(l,m)}:{query:Iw(l,m)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Ew(l,c.resumeToken);const p=Kg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ee.min())>0){d.readTime=tl(l,c.snapshotVersion.toTimestamp());const p=Kg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=AC(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=$g(this.serializer),t.removeTarget=e,this.a_(t)}}class pD extends Jw{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=SC(e.writeResults,e.commitTime),i=Nt(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=$g(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>ic(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Mo(e,Qg(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(W.UNKNOWN,l.toString())})}Lo(e,t,i,a,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Lo(e,Qg(t,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(W.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dt(t),this.D_=!1):ae("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(c=>{i.enqueueAndForget(async()=>{Ds(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(m){const p=me(m);p.L_.add(4),await gl(p),p.q_.set("Unknown"),p.L_.delete(4),await Tc(p)}(this))})}),this.q_=new yD(i,a)}}async function Tc(r){if(Ds(r))for(const e of r.B_)await e(!0)}async function gl(r){for(const e of r.B_)await e(!1)}function Qf(r,e){const t=me(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),$p(t)?Qp(t):_l(t).r_()&&Kp(t,e))}function il(r,e){const t=me(r),i=_l(t);t.N_.delete(e),i.r_()&&eS(t,e),t.N_.size===0&&(i.r_()?i.o_():Ds(t)&&t.q_.set("Unknown"))}function Kp(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(r).A_(e)}function eS(r,e){r.Q_.xe(e),_l(r).R_(e)}function Qp(r){r.Q_=new pC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),_l(r).start(),r.q_.v_()}function $p(r){return Ds(r)&&!_l(r).n_()&&r.N_.size>0}function Ds(r){return me(r).L_.size===0}function tS(r){r.Q_=void 0}async function ED(r){r.q_.set("Online")}async function TD(r){r.N_.forEach((e,t)=>{Kp(r,e)})}async function bD(r,e){tS(r),$p(r)?(r.q_.M_(e),Qp(r)):r.q_.set("Unknown")}async function wD(r,e,t){if(r.q_.set("Online"),e instanceof vw&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.N_.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.N_.delete(d),a.Q_.removeTarget(d))}(r,e)}catch(i){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Nf(r,i)}else if(e instanceof mf?r.Q_.Ke(e):e instanceof yw?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Ee.min()))try{const i=await Kw(r.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.N_.get(p);y&&l.N_.set(p,y.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const y=l.N_.get(m);if(!y)return;l.N_.set(m,y.withResumeToken(Rt.EMPTY_BYTE_STRING,y.snapshotVersion)),eS(l,m);const T=new Ti(y.target,m,p,y.sequenceNumber);Kp(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(i){ae("RemoteStore","Failed to raise snapshot:",i),await Nf(r,i)}}async function Nf(r,e,t){if(!xs(e))throw e;r.L_.add(1),await gl(r),r.q_.set("Offline"),t||(t=()=>Kw(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await Tc(r)})}function nS(r,e){return e().catch(t=>Nf(r,t,e))}async function pl(r){const e=me(r),t=bs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;SD(e);)try{const a=await lD(e.localStore,i);if(a===null){e.O_.length===0&&t.o_();break}i=a.batchId,AD(e,a)}catch(a){await Nf(e,a)}rS(e)&&iS(e)}function SD(r){return Ds(r)&&r.O_.length<10}function AD(r,e){r.O_.push(e);const t=bs(r);t.r_()&&t.V_&&t.m_(e.mutations)}function rS(r){return Ds(r)&&!bs(r).n_()&&r.O_.length>0}function iS(r){bs(r).start()}async function RD(r){bs(r).p_()}async function ID(r){const e=bs(r);for(const t of r.O_)e.m_(t.mutations)}async function xD(r,e,t){const i=r.O_.shift(),a=Mp.from(i,e,t);await nS(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await pl(r)}async function CD(r,e){e&&bs(r).V_&&await async function(i,a){if(function(c){return gw(c)&&c!==W.ABORTED}(a.code)){const l=i.O_.shift();bs(i).s_(),await nS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await pl(i)}}(r,e),rS(r)&&iS(r)}async function lT(r,e){const t=me(r);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const i=Ds(t);t.L_.add(3),await gl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Tc(t)}async function ep(r,e){const t=me(r);e?(t.L_.delete(2),await Tc(t)):e||(t.L_.add(2),await gl(t),t.q_.set("Unknown"))}function _l(r){return r.K_||(r.K_=function(t,i,a){const l=me(t);return l.w_(),new gD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Eo:ED.bind(null,r),Ro:TD.bind(null,r),mo:bD.bind(null,r),d_:wD.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),$p(r)?Qp(r):r.q_.set("Unknown")):(await r.K_.stop(),tS(r))})),r.K_}function bs(r){return r.U_||(r.U_=function(t,i,a){const l=me(t);return l.w_(),new pD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RD.bind(null,r),mo:CD.bind(null,r),f_:ID.bind(null,r),g_:xD.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await pl(r)):(await r.U_.stop(),r.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new an,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Yp(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yl(r,e){if(Dt("AsyncQueue",`${e}: ${r}`),xs(r))return new se(W.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=ku(),this.sortedSet=new ct(this.comparator)}static emptySet(e){return new Ko(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(){this.W_=new ct(de.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class sl{constructor(e,t,i,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new sl(e,t,Ko.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ND{constructor(){this.queries=cT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const a=me(t),l=a.queries;a.queries=cT(),l.forEach((c,d)=>{for(const m of d.j_)m.onError(i)})})(this,new se(W.ABORTED,"Firestore shutting down"))}}function cT(){return new Cs(r=>tw(r),gc)}async function Xp(r,e){const t=me(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.H_()&&e.J_()&&(i=2):(l=new DD,i=e.J_()?0:1);try{switch(i){case 0:l.z_=await t.onListen(a,!0);break;case 1:l.z_=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=yl(c,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Zp(t)}async function Wp(r,e){const t=me(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?a=e.J_()?0:1:!l.H_()&&e.J_()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function VD(r,e){const t=me(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(a)&&(i=!0);c.z_=a}}i&&Zp(t)}function MD(r,e,t){const i=me(r),a=i.queries.get(e);if(a)for(const l of a.j_)l.onError(t);i.queries.delete(e)}function Zp(r){r.Y_.forEach(e=>{e.next()})}var tp,hT;(hT=tp||(tp={})).ea="default",hT.Cache="cache";class Jp{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new sl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==tp.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.serializer=e}Es(e){return zr(this.serializer,e)}ds(e){return e.metadata.exists?Aw(this.serializer,e.document,!1):ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Nt(e)}}class PD{constructor(e,t,i){this.ca=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const i=Ue.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,i=new fT(this.serializer);for(const a of e)if(a.metadata.queries){const l=i.Es(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||De()).add(l);t.set(c,d)}}return t}async complete(){const e=await uD(this.localStore,new fT(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const i of this.queries)await cD(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function sS(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.key=e}}class oS{constructor(e){this.key=e}}class lS{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=rw(e),this.Ra=new Ko(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new uT,a=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((y,T)=>{const b=a.get(y),D=pc(this.query,T)?T:null,M=!!b&&this.mutatedKeys.has(b.key),z=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;b&&D?b.data.isEqual(D.data)?M!==z&&(i.track({type:3,doc:D}),U=!0):this.ga(b,D)||(i.track({type:2,doc:D}),U=!0,(m&&this.Aa(D,m)>0||p&&this.Aa(D,p)<0)&&(d=!0)):!b&&D?(i.track({type:0,doc:D}),U=!0):b&&!D&&(i.track({type:1,doc:b}),U=!0,(m||p)&&(d=!0)),U&&(D?(c=c.add(D),l=z?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Ra:c,fa:i,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort((y,T)=>function(D,M){const z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return z(D)-z(M)}(y.type,T.type)||this.Aa(y.doc,T.doc)),this.pa(i),a=a!=null&&a;const d=t&&!a?this.ya():[],m=this.da.size===0&&this.current&&!a?1:0,p=m!==this.Ea;return this.Ea=m,c.length!==0||p?{snapshot:new sl(this.query,e.Ra,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new oS(i))}),this.da.forEach(i=>{e.has(i)||t.push(new aS(i))}),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class LD{constructor(e){this.key=e,this.va=!1}}class UD{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Cs(d=>tw(d),gc),this.Ma=new Map,this.xa=new Set,this.Oa=new ct(de.comparator),this.Na=new Map,this.La=new zp,this.Ba={},this.ka=new Map,this.qa=Va.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BD(r,e,t=!0){const i=$f(r);let a;const l=i.Fa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.Da()):a=await uS(i,e,t,!0),a}async function zD(r,e){const t=$f(r);await uS(t,e,!0,!1)}async function uS(r,e,t,i){const a=await nl(r.localStore,An(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await e_(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&Qf(r.remoteStore,a),d}async function e_(r,e,t,i,a){r.Ka=(T,b,D)=>async function(z,U,Y,J){let K=U.view.ma(Y);K.ns&&(K=await xf(z.localStore,U.query,!1).then(({documents:I})=>U.view.ma(I,K)));const ue=J&&J.targetChanges.get(U.targetId),oe=J&&J.targetMismatches.get(U.targetId)!=null,pe=U.view.applyChanges(K,z.isPrimaryClient,ue,oe);return np(z,U.targetId,pe.wa),pe.snapshot}(r,T,b,D);const l=await xf(r.localStore,e,!0),c=new lS(e,l.Ts),d=c.ma(l.documents),m=vc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),p=c.applyChanges(d,r.isPrimaryClient,m);np(r,t,p.wa);const y=new kD(e,t,c);return r.Fa.set(e,y),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),p.snapshot}async function qD(r,e,t){const i=me(r),a=i.Fa.get(e),l=i.Ma.get(a.targetId);if(l.length>1)return i.Ma.set(a.targetId,l.filter(c=>!gc(c,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await rl(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&il(i.remoteStore,a.targetId),al(i,a.targetId)}).catch(Is)):(al(i,a.targetId),await rl(i.localStore,a.targetId,!0))}async function FD(r,e){const t=me(r),i=t.Fa.get(e),a=t.Ma.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),il(t.remoteStore,i.targetId))}async function jD(r,e,t){const i=i_(r);try{const a=await function(c,d){const m=me(c),p=vt.now(),y=d.reduce((D,M)=>D.add(M.key),De());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",D=>{let M=Mn(),z=De();return m.cs.getEntries(D,y).next(U=>{M=U,M.forEach((Y,J)=>{J.isValidDocument()||(z=z.add(Y))})}).next(()=>m.localDocuments.getOverlayedDocuments(D,M)).next(U=>{T=U;const Y=[];for(const J of d){const K=dC(J,T.get(J.key).overlayedDocument);K!=null&&Y.push(new Di(J.key,K,Kb(K.value.mapValue),_t.exists(!0)))}return m.mutationQueue.addMutationBatch(D,p,Y,d)}).next(U=>{b=U;const Y=U.applyToLocalDocumentSet(T,z);return m.documentOverlayCache.saveOverlays(D,U.batchId,Y)})}).then(()=>({batchId:b.batchId,changes:sw(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Ba[c.currentUser.toKey()];p||(p=new ct(Ce)),p=p.insert(d,m),c.Ba[c.currentUser.toKey()]=p}(i,a.batchId,t),await Ni(i,a.changes),await pl(i.remoteStore)}catch(a){const l=yl(a,"Failed to persist write");t.reject(l)}}async function cS(r,e){const t=me(r);try{const i=await oD(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Na.get(l);c&&(ye(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?c.va=!0:a.modifiedDocuments.size>0?ye(c.va):a.removedDocuments.size>0&&(ye(c.va),c.va=!1))}),await Ni(t,i,e)}catch(i){await Is(i)}}function dT(r,e,t){const i=me(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Fa.forEach((l,c)=>{const d=c.view.Z_(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=me(c);m.onlineState=d;let p=!1;m.queries.forEach((y,T)=>{for(const b of T.j_)b.Z_(d)&&(p=!0)}),p&&Zp(m)}(i.eventManager,e),a.length&&i.Ca.d_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function HD(r,e,t){const i=me(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Na.get(e),l=a&&a.key;if(l){let c=new ct(de.comparator);c=c.insert(l,ht.newNoDocument(l,Ee.min()));const d=De().add(l),m=new yc(Ee.min(),new Map,new ct(Ce),c,d);await cS(i,m),i.Oa=i.Oa.remove(l),i.Na.delete(e),r_(i)}else await rl(i.localStore,e,!1).then(()=>al(i,e,t)).catch(Is)}async function GD(r,e){const t=me(r),i=e.batch.batchId;try{const a=await aD(t.localStore,e);n_(t,i,null),t_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ni(t,a)}catch(a){await Is(a)}}async function KD(r,e,t){const i=me(r);try{const a=await function(c,d){const m=me(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(ye(T!==null),y=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>m.localDocuments.getDocuments(p,y))})}(i.localStore,e);n_(i,e,t),t_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ni(i,a)}catch(a){await Is(a)}}async function QD(r,e){const t=me(r);Ds(t.remoteStore)||ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(c){const d=me(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(i===-1)return void e.resolve();const a=t.ka.get(i)||[];a.push(e),t.ka.set(i,a)}catch(i){const a=yl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function t_(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function n_(r,e,t){const i=me(r);let a=i.Ba[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Ba[i.currentUser.toKey()]=a}}function al(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Ma.get(e))r.Fa.delete(i),t&&r.Ca.$a(i,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(i=>{r.La.containsKey(i)||hS(r,i)})}function hS(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(il(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),r_(r))}function np(r,e,t){for(const i of t)i instanceof aS?(r.La.addReference(i.key,e),$D(r,i)):i instanceof oS?(ae("SyncEngine","Document no longer in limbo: "+i.key),r.La.removeReference(i.key,e),r.La.containsKey(i.key)||hS(r,i.key)):ge()}function $D(r,e){const t=e.key,i=t.path.canonicalString();r.Oa.get(t)||r.xa.has(i)||(ae("SyncEngine","New document in limbo: "+t),r.xa.add(i),r_(r))}function r_(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new de(Ue.fromString(e)),i=r.qa.next();r.Na.set(i,new LD(t)),r.Oa=r.Oa.insert(t,i),Qf(r.remoteStore,new Ti(An(fl(t.path)),i,"TargetPurposeLimboResolution",Nn.oe))}}async function Ni(r,e,t){const i=me(r),a=[],l=[],c=[];i.Fa.isEmpty()||(i.Fa.forEach((d,m)=>{c.push(i.Ka(m,e,t).then(p=>{var y;if((p||t)&&i.isPrimaryClient){const T=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=jp.Wi(m.targetId,p);l.push(T)}}))}),await Promise.all(c),i.Ca.d_(a),await async function(m,p){const y=me(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>G.forEach(p,b=>G.forEach(b.$i,D=>y.persistence.referenceDelegate.addReference(T,b.targetId,D)).next(()=>G.forEach(b.Ui,D=>y.persistence.referenceDelegate.removeReference(T,b.targetId,D)))))}catch(T){if(!xs(T))throw T;ae("LocalStore","Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const D=y.os.get(b),M=D.snapshotVersion,z=D.withLastLimboFreeSnapshotVersion(M);y.os=y.os.insert(b,z)}}}(i.localStore,l))}async function YD(r,e){const t=me(r);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const i=await Gw(t.localStore,e);t.currentUser=e,function(l,c){l.ka.forEach(d=>{d.forEach(m=>{m.reject(new se(W.CANCELLED,c))})}),l.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ni(t,i.hs)}}function XD(r,e){const t=me(r),i=t.Na.get(e);if(i&&i.va)return De().add(i.key);{let a=De();const l=t.Ma.get(e);if(!l)return a;for(const c of l){const d=t.Fa.get(c);a=a.unionWith(d.view.Va)}return a}}async function WD(r,e){const t=me(r),i=await xf(t.localStore,e.query,!0),a=e.view.ba(i);return t.isPrimaryClient&&np(t,e.targetId,a.wa),a}async function ZD(r,e){const t=me(r);return Yw(t.localStore,e).then(i=>Ni(t,i))}async function JD(r,e,t,i){const a=me(r),l=await function(d,m){const p=me(d),y=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>y.Mn(T,m).next(b=>b?p.localDocuments.getDocuments(T,b):G.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await pl(a.remoteStore):t==="acknowledged"||t==="rejected"?(n_(a,e,i||null),t_(a,e),function(d,m){me(me(d).mutationQueue).On(m)}(a.localStore,e)):ge(),await Ni(a,l)):ae("SyncEngine","Cannot apply mutation batch with id: "+e)}async function eN(r,e){const t=me(r);if($f(t),i_(t),e===!0&&t.Qa!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await mT(t,i.toArray());t.Qa=!0,await ep(t.remoteStore,!0);for(const l of a)Qf(t.remoteStore,l)}else if(e===!1&&t.Qa!==!1){const i=[];let a=Promise.resolve();t.Ma.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then(()=>(al(t,c),rl(t.localStore,c,!0))),il(t.remoteStore,c)}),await a,await mT(t,i),function(c){const d=me(c);d.Na.forEach((m,p)=>{il(d.remoteStore,p)}),d.La.pr(),d.Na=new Map,d.Oa=new ct(de.comparator)}(t),t.Qa=!1,await ep(t.remoteStore,!1)}}async function mT(r,e,t){const i=me(r),a=[],l=[];for(const c of e){let d;const m=i.Ma.get(c);if(m&&m.length!==0){d=await nl(i.localStore,An(m[0]));for(const p of m){const y=i.Fa.get(p),T=await WD(i,y);T.snapshot&&l.push(T.snapshot)}}else{const p=await $w(i.localStore,c);d=await nl(i.localStore,p),await e_(i,fS(p),c,!1,d.resumeToken)}a.push(d)}return i.Ca.d_(l),a}function fS(r){return ew(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function tN(r){return function(t){return me(me(t).persistence).Qi()}(me(r).localStore)}async function nN(r,e,t,i){const a=me(r);if(a.Qa)return void ae("SyncEngine","Ignoring unexpected query state notification.");const l=a.Ma.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await Yw(a.localStore,nw(l[0])),d=yc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Rt.EMPTY_BYTE_STRING);await Ni(a,c,d);break}case"rejected":await rl(a.localStore,e,!0),al(a,e,i);break;default:ge()}}async function rN(r,e,t){const i=$f(r);if(i.Qa){for(const a of e){if(i.Ma.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){ae("SyncEngine","Adding an already active target "+a);continue}const l=await $w(i.localStore,a),c=await nl(i.localStore,l);await e_(i,fS(l),c.targetId,!1,c.resumeToken),Qf(i.remoteStore,c)}for(const a of t)i.Ma.has(a)&&await rl(i.localStore,a,!1).then(()=>{il(i.remoteStore,a),al(i,a)}).catch(Is)}}function $f(r){const e=me(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=cS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HD.bind(null,e),e.Ca.d_=VD.bind(null,e.eventManager),e.Ca.$a=MD.bind(null,e.eventManager),e}function i_(r){const e=me(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KD.bind(null,e),e}function iN(r,e,t){const i=me(r);(async function(l,c,d){try{const m=await c.getMetadata();if(await function(D,M){const z=me(D),U=Nt(M.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Y=>z.Gr.getBundleMetadata(Y,M.id)).then(Y=>!!Y&&Y.createTime.compareTo(U)>=0)}(l.localStore,m))return await c.close(),d._completeWith(function(D){return{taskState:"Success",documentsLoaded:D.totalDocuments,bytesLoaded:D.totalBytes,totalDocuments:D.totalDocuments,totalBytes:D.totalBytes}}(m)),Promise.resolve(new Set);d._updateProgress(sS(m));const p=new PD(m,l.localStore,c.serializer);let y=await c.Ua();for(;y;){const b=await p.la(y);b&&d._updateProgress(b),y=await c.Ua()}const T=await p.complete();return await Ni(l,T.Ia,void 0),await function(D,M){const z=me(D);return z.persistence.runTransaction("Save bundle","readwrite",U=>z.Gr.saveBundleMetadata(U,M))}(l.localStore,m),d._completeWith(T.progress),Promise.resolve(T.Pa)}catch(m){return Fr("SyncEngine",`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ec(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Hw(this.persistence,new jw,e.initialUser,this.serializer)}Ga(e){return new Fw(Kf.Zr,this.serializer)}Wa(e){return new Ww}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class dS extends sc{constructor(e,t,i){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await i_(this.Ja.syncEngine),await pl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Hw(this.persistence,new jw,e.initialUser,this.serializer)}ja(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new FC(i,e.asyncQueue,t)}Ha(e,t){const i=new w2(t,this.persistence);return new b2(e.asyncQueue,i)}Ga(e){const t=Fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new qp(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Zw(),gf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ww}}class sN extends dS{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Ag&&(this.sharedClientState.syncEngine={no:JD.bind(null,t),ro:nN.bind(null,t),io:rN.bind(null,t),Qi:tN.bind(null,t),eo:ZD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async i=>{await eN(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Wa(e){const t=Zw();if(!Ag.D(t))throw new se(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ag(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ac{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=YD.bind(null,this.syncEngine),await ep(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ND}()}createDatastore(e){const t=Ec(e.databaseInfo.databaseId),i=function(l){return new mD(l)}(e.databaseInfo);return function(l,c,d,m){return new _D(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,d){return new vD(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>dT(this.syncEngine,t,0),function(){return oT.D()?new oT:new hD}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,y){const T=new UD(a,l,c,d,m,p);return y&&(T.Qa=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=me(a);ae("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await gl(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ac.provider={build:()=>new ac};function gT(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const i={value:r.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new an,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),i=Number(t);isNaN(i)&&this.ru(`length string (${t}) is not valid number`);const a=await this.iu(i);return new OD(JSON.parse(a),e.length+i)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=me(a),d={documents:l.map(T=>rc(c.serializer,T))},m=await c.Lo("BatchGetDocuments",c.serializer.databaseId,Ue.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const b=bC(c.serializer,T);p.set(b.key.toString(),b)});const y=[];return l.forEach(T=>{const b=p.get(T.toString());ye(!!b),y.push(b)}),y}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ml(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const a=de.fromPath(i);this.mutations.push(new Np(a,this.precondition(a)))}),await async function(i,a){const l=me(i),c={writes:a.map(d=>ic(l.serializer,d))};await l.Mo("Commit",l.serializer.databaseId,Ue.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge();t=Ee.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new se(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?_t.exists(!1):_t.updateTime(t):_t.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new se(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _t.updateTime(t)}return _t.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this._u=i.maxAttempts,this.t_=new Gp(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new oN(this.datastore),t=this.cu(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.lu(a)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const t=this.updateFunction(e);return!dc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gw(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Wt.UNAUTHENTICATED,this.clientId=Db.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ae("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ae("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new an;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=yl(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ig(r,e){r.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener(async a=>{i.isEqual(a)||(await Gw(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function pT(r,e){r.asyncQueue.verifyOperationInProgress();const t=await s_(r);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(i=>lT(e.remoteStore,i)),r.setAppCheckTokenChangeListener((i,a)=>lT(e.remoteStore,a)),r._onlineComponents=e}async function s_(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ig(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Fr("Error using user provided cache. Falling back to memory cache: "+t),await Ig(r,new sc)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Ig(r,new sc);return r._offlineComponents}async function Xf(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await pT(r,r._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await pT(r,new ac))),r._onlineComponents}function mS(r){return s_(r).then(e=>e.persistence)}function a_(r){return s_(r).then(e=>e.localStore)}function gS(r){return Xf(r).then(e=>e.remoteStore)}function o_(r){return Xf(r).then(e=>e.syncEngine)}function cN(r){return Xf(r).then(e=>e.datastore)}async function ol(r){const e=await Xf(r),t=e.eventManager;return t.onListen=BD.bind(null,e.syncEngine),t.onUnlisten=qD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FD.bind(null,e.syncEngine),t}function hN(r){return r.asyncQueue.enqueue(async()=>{const e=await mS(r),t=await gS(r);return e.setNetworkEnabled(!0),function(a){const l=me(a);return l.L_.delete(0),Tc(l)}(t)})}function fN(r){return r.asyncQueue.enqueue(async()=>{const e=await mS(r),t=await gS(r);return e.setNetworkEnabled(!1),async function(a){const l=me(a);l.L_.add(0),await gl(l),l.q_.set("Offline")}(t)})}function dN(r,e){const t=new an;return r.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await function(p,y){const T=me(p);return T.persistence.runTransaction("read document","readonly",b=>T.localDocuments.getDocument(b,y))}(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new se(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=yl(d,`Failed to get document '${l} from cache`);c.reject(m)}}(await a_(r),e,t)),t.promise}function pS(r,e,t={}){const i=new an;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const y=new Yf({next:b=>{y.Za(),c.enqueueAndForget(()=>Wp(l,T));const D=b.docs.has(d);!D&&b.fromCache?p.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&m&&m.source==="server"?p.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Jp(fl(d.path),y,{includeMetadataChanges:!0,_a:!0});return Xp(l,T)}(await ol(r),r.asyncQueue,e,t,i)),i.promise}function mN(r,e){const t=new an;return r.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const d=await xf(a,l,!0),m=new lS(l,d.Ts),p=m.ma(d.documents),y=m.applyChanges(p,!1);c.resolve(y.snapshot)}catch(d){const m=yl(d,`Failed to execute query '${l} against cache`);c.reject(m)}}(await a_(r),e,t)),t.promise}function _S(r,e,t={}){const i=new an;return r.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const y=new Yf({next:b=>{y.Za(),c.enqueueAndForget(()=>Wp(l,T)),b.fromCache&&m.source==="server"?p.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Jp(d,y,{includeMetadataChanges:!0,_a:!0});return Xp(l,T)}(await ol(r),r.asyncQueue,e,t,i)),i.promise}function gN(r,e){const t=new Yf(e);return r.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).Y_.add(l),l.next()}(await ol(r),t)),()=>{t.Za(),r.asyncQueue.enqueueAndForget(async()=>function(a,l){me(a).Y_.delete(l)}(await ol(r),t))}}function pN(r,e,t,i){const a=function(c,d){let m;return m=typeof c=="string"?_w().encode(c):c,function(y,T){return new aN(y,T)}(function(y,T){if(y instanceof Uint8Array)return gT(y,T);if(y instanceof ArrayBuffer)return gT(new Uint8Array(y),T);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),d)}(t,Ec(e));r.asyncQueue.enqueueAndForget(async()=>{iN(await o_(r),a,i)})}function _N(r,e){return r.asyncQueue.enqueue(async()=>function(i,a){const l=me(i);return l.persistence.runTransaction("Get named query","readonly",c=>l.Gr.getNamedQuery(c,a))}(await a_(r),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(r,e,t){if(!t)throw new se(W.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vS(r,e,t,i){if(e===!0&&i===!0)throw new se(W.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function yT(r){if(!de.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vT(r){if(de.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Wf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ge()}function Qe(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(r);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function ES(r,e){if(e<=0)throw new se(W.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bc{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ET({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ET(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new h2;switch(i.type){case"firstParty":return new g2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=_T.get(t);i&&(ae("ComponentProvider","Removing Datastore"),_T.delete(t),i.terminate())}(this),Promise.resolve()}}function yN(r,e,t,i={}){var a;const l=(r=Qe(r,bc))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Fr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=Wt.MOCK_USER;else{d=ab(i.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Wt(p)}r._authCredentials=new f2(new Cb(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rn=class TS{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new TS(this.firestore,e,this._query)}},Tt=class bS{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bS(this.firestore,e,this._key)}},ms=class wS extends Rn{constructor(e,t,i){super(e,t,fl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new de(e))}withConverter(e){return new wS(this.firestore,e,this._path)}};function SS(r,e,...t){if(r=ot(r),l_("collection","path",e),r instanceof bc){const i=Ue.fromString(e,...t);return vT(i),new ms(r,null,i)}{if(!(r instanceof Tt||r instanceof ms))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ue.fromString(e,...t));return vT(i),new ms(r.firestore,null,i)}}function vN(r,e){if(r=Qe(r,bc),l_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rn(r,null,function(i){return new Ci(Ue.emptyPath(),i)}(e))}function Vf(r,e,...t){if(r=ot(r),arguments.length===1&&(e=Db.newId()),l_("doc","path",e),r instanceof bc){const i=Ue.fromString(e,...t);return yT(i),new Tt(r,null,new de(i))}{if(!(r instanceof Tt||r instanceof ms))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ue.fromString(e,...t));return yT(i),new Tt(r.firestore,r instanceof ms?r.converter:null,new de(i))}}function AS(r,e){return r=ot(r),e=ot(e),(r instanceof Tt||r instanceof ms)&&(e instanceof Tt||e instanceof ms)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function RS(r,e){return r=ot(r),e=ot(e),r instanceof Rn&&e instanceof Rn&&r.firestore===e.firestore&&gc(r._query,e._query)&&r.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gp(this,"async_queue_retry"),this.Vu=()=>{const i=gf();i&&ae("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=gf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=gf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new an;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xs(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const a=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw Dt("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const a=Yp.createAndSchedule(this,e,t,i,l=>this.yu(l));return this.Tu.push(a),a}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function rp(r){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class EN{constructor(){this._progressObserver={},this._taskCompletionResolver=new an,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=-1;let Vt=class extends bc{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new TT,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TT(e),this._firestoreClient=void 0,await e}}};function dn(r){if(r._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||IS(r),r._firestoreClient}function IS(r){var e,t,i;const a=r._freezeSettings(),l=function(d,m,p,y){return new G2(d,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,yS(y.experimentalLongPollingOptions),y.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,a);r._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(r._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),r._firestoreClient=new uN(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}}(r._componentsProvider))}function bN(r,e){Fr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return xS(r,ac.provider,{build:i=>new dS(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function wN(r){Fr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();xS(r,ac.provider,{build:t=>new sN(t,e.cacheSizeBytes)})}function xS(r,e,t){if((r=Qe(r,Vt))._firestoreClient||r._terminated)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new se(W.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},IS(r)}function SN(r){if(r._initialized&&!r._terminated)throw new se(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new an;return r._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Br.D())return Promise.resolve();const a=i+"main";await Br.delete(a)}(Fp(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function AN(r){return function(t){const i=new an;return t.asyncQueue.enqueueAndForget(async()=>QD(await o_(t),i)),i.promise}(dn(r=Qe(r,Vt)))}function RN(r){return hN(dn(r=Qe(r,Vt)))}function IN(r){return fN(dn(r=Qe(r,Vt)))}function xN(r,e){const t=dn(r=Qe(r,Vt)),i=new EN;return pN(t,r._databaseId,e,i),i}function CN(r,e){return _N(dn(r=Qe(r,Vt)),e).then(t=>t?new Rn(r,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(Rt.fromBase64String(e))}catch(t){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hr(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ws=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^__.*__$/;class NN{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class CS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class Jf{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:i,xu:!1});return a.Ou(e),a}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DS(this.Cu)&&DN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class VN{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ec(e)}Qu(e,t,i,a=!1){return new Jf({Cu:e,methodName:t,qu:i,path:pt.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ua(r){const e=r._freezeSettings(),t=Ec(r._databaseId);return new VN(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ed(r,e,t,i,a,l={}){const c=r.Qu(l.merge||l.mergeFields?2:0,e,t,a);p_("Data must be an object, but it was:",c,i);const d=MS(i,c);let m,p;if(l.merge)m=new Vn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const T of l.mergeFields){const b=ip(e,T,t);if(!c.contains(b))throw new se(W.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);PS(y,b)||y.push(b)}m=new Vn(y),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new NN(new sn(d),m,p)}class wc extends La{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function NS(r,e,t){return new Jf({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class c_ extends La{_toFieldTransform(e){return new _c(e.path,new Jo)}isEqual(e){return e instanceof c_}}class h_ extends La{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=NS(this,e,!0),i=this.Ku.map(l=>Ba(l,t)),a=new xa(i);return new _c(e.path,a)}isEqual(e){return e instanceof h_&&Qu(this.Ku,e.Ku)}}class f_ extends La{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=NS(this,e,!0),i=this.Ku.map(l=>Ba(l,t)),a=new Ca(i);return new _c(e.path,a)}isEqual(e){return e instanceof f_&&Qu(this.Ku,e.Ku)}}class d_ extends La{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new el(e.serializer,lw(e.serializer,this.$u));return new _c(e.path,t)}isEqual(e){return e instanceof d_&&this.$u===e.$u}}function m_(r,e,t,i){const a=r.Qu(1,e,t);p_("Data must be an object, but it was:",a,i);const l=[],c=sn.empty();ka(i,(m,p)=>{const y=__(e,m,t);p=ot(p);const T=a.Nu(y);if(p instanceof wc)l.push(y);else{const b=Ba(p,T);b!=null&&(l.push(y),c.set(y,b))}});const d=new Vn(l);return new CS(c,d,a.fieldTransforms)}function g_(r,e,t,i,a,l){const c=r.Qu(1,e,t),d=[ip(e,i,t)],m=[a];if(l.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(ip(e,l[b])),m.push(l[b+1]);const p=[],y=sn.empty();for(let b=d.length-1;b>=0;--b)if(!PS(p,d[b])){const D=d[b];let M=m[b];M=ot(M);const z=c.Nu(D);if(M instanceof wc)p.push(D);else{const U=Ba(M,z);U!=null&&(p.push(D),y.set(D,U))}}const T=new Vn(p);return new CS(y,T,c.fieldTransforms)}function VS(r,e,t,i=!1){return Ba(t,r.Qu(i?4:3,e))}function Ba(r,e){if(OS(r=ot(r)))return p_("Unsupported field value:",e,r),MS(r,e);if(r instanceof La)return function(i,a){if(!DS(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let m=Ba(d,a.Lu(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(r,e)}return function(i,a){if((i=ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lw(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:tl(a.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:tl(a.serializer,l)}}if(i instanceof Zf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hr)return{bytesValue:Ew(a.serializer,i._byteString)};if(i instanceof Tt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:kp(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof u_)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw d.Bu("VectorValues must only contain numeric values.");return Dp(d.serializer,m)})}}}}}}(i,a);throw a.Bu(`Unsupported field value: ${Wf(i)}`)}(r,e)}function MS(r,e){const t={};return Fb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(r,(i,a)=>{const l=Ba(a,e.Mu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function OS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof Zf||r instanceof Hr||r instanceof Tt||r instanceof La||r instanceof u_)}function p_(r,e,t){if(!OS(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=Wf(t);throw i==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+i)}}function ip(r,e,t){if((e=ot(e))instanceof ws)return e._internalPath;if(typeof e=="string")return __(r,e);throw Mf("Field path arguments must be of type string or ",r,!1,void 0,t)}const MN=new RegExp("[~\\*/\\[\\]]");function __(r,e,t){if(e.search(MN)>=0)throw Mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ws(...e.split("."))._internalPath}catch{throw Mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Mf(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new se(W.INVALID_ARGUMENT,d+r+m)}function PS(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ON(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(td("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ON extends oc{data(){return super.data()}}function td(r,e){return typeof e=="string"?__(r,e):e instanceof ws?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y_{}class Sc extends y_{}function us(r,e,...t){let i=[];e instanceof y_&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof v_).length,d=l.filter(m=>m instanceof nd).length;if(c>1||c>0&&d>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)r=a._apply(r);return r}class nd extends Sc{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new nd(e,t,i)}_apply(e){const t=this._parse(e);return US(e._query,t),new Rn(e.firestore,e.converter,Gg(e._query,t))}_parse(e){const t=Ua(e.firestore);return function(l,c,d,m,p,y,T){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){wT(T,y);const D=[];for(const M of T)D.push(bT(m,l,M));b={arrayValue:{values:D}}}else b=bT(m,l,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||wT(T,y),b=VS(d,c,T,y==="in"||y==="not-in");return Be.create(p,y,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function PN(r,e,t){const i=e,a=td("where",r);return nd._create(a,i,t)}class v_ extends y_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new v_(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)US(c,m),c=Gg(c,m)}(e._query,t),new Rn(e.firestore,e.converter,Gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class E_ extends Sc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new E_(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(l,c)}(e._query,this._field,this._direction);return new Rn(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new Ci(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function kN(r,e="asc"){const t=e,i=td("orderBy",r);return E_._create(i,t)}class rd extends Sc{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new rd(e,t,i)}_apply(e){return new Rn(e.firestore,e.converter,Sf(e._query,this._limit,this._limitType))}}function LN(r){return ES("limit",r),rd._create("limit",r,"F")}function UN(r){return ES("limitToLast",r),rd._create("limitToLast",r,"L")}class id extends Sc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new id(e,t,i)}_apply(e){const t=LS(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(a,l){return new Ci(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function BN(...r){return id._create("startAt",r,!0)}function zN(...r){return id._create("startAfter",r,!1)}class sd extends Sc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new sd(e,t,i)}_apply(e){const t=LS(e,this.type,this._docOrFields,this._inclusive);return new Rn(e.firestore,e.converter,function(a,l){return new Ci(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function qN(...r){return sd._create("endBefore",r,!1)}function FN(...r){return sd._create("endAt",r,!0)}function LS(r,e,t,i){if(t[0]=ot(t[0]),t[0]instanceof oc)return function(l,c,d,m,p){if(!m)throw new se(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const y=[];for(const T of Go(l))if(T.field.isKeyField())y.push(Ra(c,m.key));else{const b=m.data.field(T.field);if(zf(b))throw new se(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const D=T.field.canonicalString();throw new se(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${D}' (used as the orderBy) does not exist.`)}y.push(b)}return new Ts(y,p)}(r._query,r.firestore._databaseId,e,t[0]._document,i);{const a=Ua(r.firestore);return function(c,d,m,p,y,T){const b=c.explicitOrderBy;if(y.length>b.length)throw new se(W.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const D=[];for(let M=0;M<y.length;M++){const z=y[M];if(b[M].field.isKeyField()){if(typeof z!="string")throw new se(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof z}`);if(!xp(c)&&z.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${z}' contains a slash.`);const U=c.path.child(Ue.fromString(z));if(!de.isDocumentKey(U))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const Y=new de(U);D.push(Ra(d,Y))}else{const U=VS(m,p,z);D.push(U)}}return new Ts(D,T)}(r._query,r.firestore._databaseId,a,e,t,i)}}function bT(r,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xp(e)&&t.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ue.fromString(t));if(!de.isDocumentKey(i))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ra(r,new de(i))}if(t instanceof Tt)return Ra(r,t._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(t)}.`)}function wT(r,e){if(!Array.isArray(r)||r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function US(r,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class T_{convertValue(e,t="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ka(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>gt(c.doubleValue));return new u_(l)}convertGeoPoint(e){return new Zf(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Rp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Ii(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ue.fromString(e);ye(Nw(i));const a=new vs(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Dt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class jN extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let xi=class extends oc{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(td("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},Hu=class extends xi{data(e={}){return super.data(e)}},Ss=class{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ea(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Hu(this._firestore,this._userDataWriter,i.key,i,new Ea(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Hu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ea(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Hu(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ea(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:HN(d.type),doc:m,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function HN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}function BS(r,e){return r instanceof xi&&e instanceof xi?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Ss&&e instanceof Ss&&r._firestore===e._firestore&&RS(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(r){r=Qe(r,Tt);const e=Qe(r.firestore,Vt);return pS(dn(e),r._key).then(t=>b_(e,r,t))}class za extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}}function KN(r){r=Qe(r,Tt);const e=Qe(r.firestore,Vt),t=dn(e),i=new za(e);return dN(t,r._key).then(a=>new xi(e,i,r._key,a,new Ea(a!==null&&a.hasLocalMutations,!0),r.converter))}function QN(r){r=Qe(r,Tt);const e=Qe(r.firestore,Vt);return pS(dn(e),r._key,{source:"server"}).then(t=>b_(e,r,t))}function $N(r){r=Qe(r,Rn);const e=Qe(r.firestore,Vt),t=dn(e),i=new za(e);return kS(r._query),_S(t,r._query).then(a=>new Ss(e,i,r,a))}function YN(r){r=Qe(r,Rn);const e=Qe(r.firestore,Vt),t=dn(e),i=new za(e);return mN(t,r._query).then(a=>new Ss(e,i,r,a))}function XN(r){r=Qe(r,Rn);const e=Qe(r.firestore,Vt),t=dn(e),i=new za(e);return _S(t,r._query,{source:"server"}).then(a=>new Ss(e,i,r,a))}function ST(r,e,t){r=Qe(r,Tt);const i=Qe(r.firestore,Vt),a=ad(r.converter,e,t);return Ac(i,[ed(Ua(i),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,_t.none())])}function AT(r,e,t,...i){r=Qe(r,Tt);const a=Qe(r.firestore,Vt),l=Ua(a);let c;return c=typeof(e=ot(e))=="string"||e instanceof ws?g_(l,"updateDoc",r._key,e,t,i):m_(l,"updateDoc",r._key,e),Ac(a,[c.toMutation(r._key,_t.exists(!0))])}function WN(r){return Ac(Qe(r.firestore,Vt),[new ml(r._key,_t.none())])}function ZN(r,e){const t=Qe(r.firestore,Vt),i=Vf(r),a=ad(r.converter,e);return Ac(t,[ed(Ua(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,_t.exists(!1))]).then(()=>i)}function zS(r,...e){var t,i,a;r=ot(r);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||rp(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(rp(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,y;if(r instanceof Tt)p=Qe(r.firestore,Vt),y=fl(r._key.path),m={next:T=>{e[c]&&e[c](b_(p,r,T))},error:e[c+1],complete:e[c+2]};else{const T=Qe(r,Rn);p=Qe(T.firestore,Vt),y=T._query;const b=new za(p);m={next:D=>{e[c]&&e[c](new Ss(p,b,T,D))},error:e[c+1],complete:e[c+2]},kS(r._query)}return function(b,D,M,z){const U=new Yf(z),Y=new Jp(D,U,M);return b.asyncQueue.enqueueAndForget(async()=>Xp(await ol(b),Y)),()=>{U.Za(),b.asyncQueue.enqueueAndForget(async()=>Wp(await ol(b),Y))}}(dn(p),y,d,m)}function JN(r,e){return gN(dn(r=Qe(r,Vt)),rp(e)?e:{next:e})}function Ac(r,e){return function(i,a){const l=new an;return i.asyncQueue.enqueueAndForget(async()=>jD(await o_(i),a,l)),l.promise}(dn(r),e)}function b_(r,e,t){const i=t.docs.get(e._key),a=new za(r);return new xi(r,a,e._key,i,new Ea(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tV=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ua(e)}set(e,t,i){this._verifyNotCommitted();const a=hs(e,this._firestore),l=ad(a.converter,t,i),c=ed(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(c.toMutation(a._key,_t.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=hs(e,this._firestore);let c;return c=typeof(t=ot(t))=="string"||t instanceof ws?g_(this._dataReader,"WriteBatch.update",l._key,t,i,a):m_(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_t.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hs(e,this._firestore);return this._mutations=this._mutations.concat(new ml(t._key,_t.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hs(r,e){if((r=ot(r)).firestore!==e)throw new se(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nV=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Ua(t)}get(t){const i=hs(t,this._firestore),a=new jN(this._firestore);return this._transaction.lookup([i._key]).then(l=>{if(!l||l.length!==1)return ge();const c=l[0];if(c.isFoundDocument())return new oc(this._firestore,a,c.key,c,i.converter);if(c.isNoDocument())return new oc(this._firestore,a,i._key,null,i.converter);throw ge()})}set(t,i,a){const l=hs(t,this._firestore),c=ad(l.converter,i,a),d=ed(this._dataReader,"Transaction.set",l._key,c,l.converter!==null,a);return this._transaction.set(l._key,d),this}update(t,i,a,...l){const c=hs(t,this._firestore);let d;return d=typeof(i=ot(i))=="string"||i instanceof ws?g_(this._dataReader,"Transaction.update",c._key,i,a,l):m_(this._dataReader,"Transaction.update",c._key,i),this._transaction.update(c._key,d),this}delete(t){const i=hs(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hs(e,this._firestore),i=new za(this._firestore);return super.get(e).then(a=>new xi(this._firestore,i,t._key,a._document,new Ea(!1,!1),t.converter))}};function rV(r,e,t){r=Qe(r,Vt);const i=Object.assign(Object.assign({},eV),t);return function(l){if(l.maxAttempts<1)throw new se(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,c,d){const m=new an;return l.asyncQueue.enqueueAndForget(async()=>{const p=await cN(l);new lN(l.asyncQueue,p,d,c,m).au()}),m.promise}(dn(r),a=>e(new nV(r,a)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(){return new wc("deleteField")}function sV(){return new c_("serverTimestamp")}function aV(...r){return new h_("arrayUnion",r)}function oV(...r){return new f_("arrayRemove",r)}function lV(r){return new d_("increment",r)}(function(e,t=!0){(function(a){hl=a})(Uf),Sa(new Ai("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Vt(new d2(i.getProvider("auth-internal")),new _2(i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vs(p.options.projectId,y)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pr(m0,"4.7.3",e),pr(m0,"4.7.3","esm2017")})();const uV="@firebase/firestore-compat",cV="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new se("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){if(typeof Uint8Array>"u")throw new se("unimplemented","Uint8Arrays are not available in this environment.")}function IT(){if(!j2())throw new se("unimplemented","Blobs are unavailable in Firestore in this environment.")}let qS=class sp{constructor(e){this._delegate=e}static fromBase64String(e){return IT(),new sp(Hr.fromBase64String(e))}static fromUint8Array(e){return RT(),new sp(Hr.fromUint8Array(e))}toBase64(){return IT(),this._delegate.toBase64()}toUint8Array(){return RT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r){return hV(r,["next","error","complete"])}function hV(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{enableIndexedDbPersistence(e,t){return bN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return wN(e._delegate)}clearIndexedDbPersistence(e){return SN(e._delegate)}}class FS{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof vs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){yN(this._delegate,e,t,i)}enableNetwork(){return RN(this._delegate)}disableNetwork(){return IN(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,vS("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return AN(this._delegate)}onSnapshotsInSync(e){return JN(this._delegate,e)}get app(){if(!this._appCompat)throw new se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ll(this,SS(this._delegate,e))}catch(t){throw bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new sr(this,Vf(this._delegate,e))}catch(t){throw bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Tn(this,vN(this._delegate,e))}catch(t){throw bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return rV(this._delegate,t=>e(new jS(this,t)))}batch(){return dn(this._delegate),new HS(new tV(this._delegate,e=>Ac(this._delegate,e)))}loadBundle(e){return xN(this._delegate,e)}namedQuery(e){return CN(this._delegate,e).then(t=>t?new Tn(this,t):null)}}class od extends T_{constructor(e){super(),this.firestore=e}convertBytes(e){return new qS(new Hr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sr.forKey(t,this.firestore,null)}}function dV(r){u2(r)}class jS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new od(e)}get(e){const t=Ta(e);return this._delegate.get(t).then(i=>new lc(this._firestore,new xi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=Ta(e);return i?(w_("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Ta(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Ta(e);return this._delegate.delete(t),this}}class HS{constructor(e){this._delegate=e}set(e,t,i){const a=Ta(e);return i?(w_("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const l=Ta(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,i,...a),this}delete(e){const t=Ta(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ma{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Hu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uc(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Ma.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let l=a.get(t);return l||(l=new Ma(e,new od(e),t),a.set(t,l)),l}}Ma.INSTANCES=new WeakMap;class sr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new od(e)}static forPath(e,t,i){if(e.length%2!==0)throw new se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sr(t,new Tt(t._delegate,i,new de(e)))}static forKey(e,t,i){return new sr(t,new Tt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new ll(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ll(this.firestore,SS(this._delegate,e))}catch(t){throw bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ot(e),e instanceof Tt?AS(this._delegate,e):!1}set(e,t){t=w_("DocumentReference.set",t);try{return t?ST(this._delegate,e,t):ST(this._delegate,e)}catch(i){throw bn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?AT(this._delegate,e):AT(this._delegate,e,t,...i)}catch(a){throw bn(a,"updateDoc()","DocumentReference.update()")}}delete(){return WN(this._delegate)}onSnapshot(...e){const t=GS(e),i=KS(e,a=>new lc(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return zS(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=KN(this._delegate):(e==null?void 0:e.source)==="server"?t=QN(this._delegate):t=GN(this._delegate),t.then(i=>new lc(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new sr(this.firestore,e?this._delegate.withConverter(Ma.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bn(r,e,t){return r.message=r.message.replace(e,t),r}function GS(r){for(const e of r)if(typeof e=="object"&&!ap(e))return e;return{}}function KS(r,e){var t,i;let a;return ap(r[0])?a=r[0]:ap(r[1])?a=r[1]:typeof r[0]=="function"?a={next:r[0],error:r[1],complete:r[2]}:a={next:r[1],error:r[2],complete:r[3]},{next:l=>{a.next&&a.next(e(l))},error:(t=a.error)===null||t===void 0?void 0:t.bind(a),complete:(i=a.complete)===null||i===void 0?void 0:i.bind(a)}}class lc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BS(this._delegate,e._delegate)}}class uc extends lc{data(e){const t=this._delegate.data(e);return this._delegate._converter||c2(t!==void 0),t}}class Tn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new od(e)}where(e,t,i){try{return new Tn(this.firestore,us(this._delegate,PN(e,t,i)))}catch(a){throw bn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Tn(this.firestore,us(this._delegate,kN(e,t)))}catch(i){throw bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Tn(this.firestore,us(this._delegate,LN(e)))}catch(t){throw bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Tn(this.firestore,us(this._delegate,UN(e)))}catch(t){throw bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Tn(this.firestore,us(this._delegate,BN(...e)))}catch(t){throw bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Tn(this.firestore,us(this._delegate,zN(...e)))}catch(t){throw bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Tn(this.firestore,us(this._delegate,qN(...e)))}catch(t){throw bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Tn(this.firestore,us(this._delegate,FN(...e)))}catch(t){throw bn(t,"endAt()","Query.endAt()")}}isEqual(e){return RS(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=YN(this._delegate):(e==null?void 0:e.source)==="server"?t=XN(this._delegate):t=$N(this._delegate),t.then(i=>new op(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=GS(e),i=KS(e,a=>new op(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return zS(this._delegate,t,i)}withConverter(e){return new Tn(this.firestore,e?this._delegate.withConverter(Ma.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class mV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class op{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Tn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mV(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new uc(this._firestore,i))})}isEqual(e){return BS(this._delegate,e._delegate)}}class ll extends Tn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sr(this.firestore,e):null}doc(e){try{return e===void 0?new sr(this.firestore,Vf(this._delegate)):new sr(this.firestore,Vf(this._delegate,e))}catch(t){throw bn(t,"doc()","CollectionReference.doc()")}}add(e){return ZN(this._delegate,e).then(t=>new sr(this.firestore,t))}isEqual(e){return AS(this._delegate,e._delegate)}withConverter(e){return new ll(this.firestore,e?this._delegate.withConverter(Ma.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ta(r){return Qe(r,Tt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(...e){this._delegate=new ws(...e)}static documentId(){return new S_(pt.keyField().canonicalString())}isEqual(e){return e=ot(e),e instanceof ws?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this._delegate=e}static serverTimestamp(){const e=sV();return e._methodName="FieldValue.serverTimestamp",new va(e)}static delete(){const e=iV();return e._methodName="FieldValue.delete",new va(e)}static arrayUnion(...e){const t=aV(...e);return t._methodName="FieldValue.arrayUnion",new va(t)}static arrayRemove(...e){const t=oV(...e);return t._methodName="FieldValue.arrayRemove",new va(t)}static increment(e){const t=lV(e);return t._methodName="FieldValue.increment",new va(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={Firestore:FS,GeoPoint:Zf,Timestamp:vt,Blob:qS,Transaction:jS,WriteBatch:HS,DocumentReference:sr,DocumentSnapshot:lc,Query:Tn,QueryDocumentSnapshot:uc,QuerySnapshot:op,CollectionReference:ll,FieldPath:S_,FieldValue:va,setLogLevel:dV,CACHE_SIZE_UNLIMITED:TN};function pV(r,e){r.INTERNAL.registerComponent(new Ai("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},gV)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(r){pV(r,(e,t)=>new FS(e,t,new fV)),r.registerVersion(uV,cV)}_V(ir);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",$S="storageBucket",yV=2*60*1e3,vV=10*60*1e3,EV=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends Rs{constructor(e,t,i=0){super(xg(e),`Firebase Storage: ${t} (${xg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function xg(r){return"storage/"+r}function A_(){const r="An unknown error occurred, please check the error payload for server response.";return new bt(ft.UNKNOWN,r)}function TV(r){return new bt(ft.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function bV(r){return new bt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wV(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(ft.UNAUTHENTICATED,r)}function SV(){return new bt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AV(r){return new bt(ft.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function YS(){return new bt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XS(){return new bt(ft.CANCELED,"User canceled the upload/download.")}function RV(r){return new bt(ft.INVALID_URL,"Invalid URL '"+r+"'.")}function IV(r){return new bt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function xV(){return new bt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$S+"' property when initializing the app?")}function WS(){return new bt(ft.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CV(){return new bt(ft.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function DV(){return new bt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NV(r){return new bt(ft.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qo(r){return new bt(ft.INVALID_ARGUMENT,r)}function ZS(){return new bt(ft.APP_DELETED,"The Firebase app was deleted.")}function JS(r){return new bt(ft.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gu(r,e){return new bt(ft.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Ou(r){throw new bt(ft.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=fn.makeFromUrl(e,t)}catch{return new fn(e,"")}if(i.path==="")return i;throw IV(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(ue){ue.path_=decodeURIComponent(ue.path)}const y="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",D=new RegExp(`^https?://${T}/${y}/b/${a}/o${b}`,"i"),M={bucket:1,path:3},z=t===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",Y=new RegExp(`^https?://${z}/${a}/${U}`,"i"),K=[{regex:d,indices:m,postModify:l},{regex:D,indices:M,postModify:p},{regex:Y,indices:{bucket:1,path:2},postModify:p}];for(let ue=0;ue<K.length;ue++){const oe=K[ue],pe=oe.regex.exec(e);if(pe){const I=pe[oe.indices.bucket];let S=pe[oe.indices.path];S||(S=""),i=new fn(I,S),oe.postModify(i);break}}if(i==null)throw RV(e);return i}}class VV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(r,e,t){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let p=!1;function y(...U){p||(p=!0,e.apply(null,U))}function T(U){a=setTimeout(()=>{a=null,r(D,m())},U)}function b(){l&&clearTimeout(l)}function D(U,...Y){if(p){b();return}if(U){b(),y.call(null,U,...Y);return}if(m()||c){b(),y.call(null,U,...Y);return}i<64&&(i*=2);let K;d===1?(d=2,K=0):K=(i+Math.random())*1e3,T(K)}let M=!1;function z(U){M||(M=!0,b(),!p&&(a!==null?(U||(d=2),clearTimeout(a),T(0)):U||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,z(!0)},t),z}function OV(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(r){return r!==void 0}function kV(r){return typeof r=="function"}function LV(r){return typeof r=="object"&&!Array.isArray(r)}function ld(r){return typeof r=="string"||r instanceof String}function xT(r){return R_()&&r instanceof Blob}function R_(){return typeof Blob<"u"}function lp(r,e,t,i){if(i<e)throw Qo(`Invalid value for '${r}'. Expected ${e} or greater.`);if(i>t)throw Qo(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(r,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${r}`}function eA(r){const e=encodeURIComponent;let t="?";for(const i in r)if(r.hasOwnProperty(i)){const a=e(i)+"="+e(r[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var wa;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(wa||(wa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t,i,a,l,c,d,m,p,y,T,b=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=T,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,M)=>{this.resolve_=D,this.reject_=M,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new nf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===wa.NO_ERROR,m=l.getStatus();if(!d||tA(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===wa.ABORT;i(!1,new nf(!1,null,y));return}const p=this.successCodes_.indexOf(m)!==-1;i(!0,new nf(p,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());PV(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=A_();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?ZS():XS();c(m)}else{const m=YS();c(m)}};this.canceled_?t(!1,new nf(!1,null,!0)):this.backoffId_=MV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function BV(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function zV(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qV(r,e){e&&(r["X-Firebase-GMPID"]=e)}function FV(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function jV(r,e,t,i,a,l,c=!0){const d=eA(r.urlParams),m=r.url+d,p=Object.assign({},r.headers);return qV(p,e),BV(p,t),zV(p,l),FV(p,i),new UV(m,r.method,p,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function GV(...r){const e=HV();if(e!==void 0){const t=new e;for(let i=0;i<r.length;i++)t.append(r[i]);return t.getBlob()}else{if(R_())return new Blob(r);throw new bt(ft.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function KV(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(r){if(typeof atob>"u")throw NV("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cg{constructor(e,t){this.data=e,this.contentType=t||null}}function nA(r,e){switch(r){case ar.RAW:return new Cg(rA(e));case ar.BASE64:case ar.BASE64URL:return new Cg(iA(r,e));case ar.DATA_URL:return new Cg(YV(e),XV(e))}throw A_()}function rA(r){const e=[];for(let t=0;t<r.length;t++){let i=r.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=r.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $V(r){let e;try{e=decodeURIComponent(r)}catch{throw Gu(ar.DATA_URL,"Malformed data URL.")}return rA(e)}function iA(r,e){switch(r){case ar.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw Gu(r,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case ar.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw Gu(r,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=QV(e)}catch(a){throw a.message.includes("polyfill")?a:Gu(r,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class sA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Gu(ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=WV(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function YV(r){const e=new sA(r);return e.base64?iA(ar.BASE64,e.rest):$V(e.rest)}function XV(r){return new sA(r).contentType}function WV(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t){let i=0,a="";xT(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(xT(this.data_)){const i=this.data_,a=KV(i,e,t);return a===null?null:new Ei(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ei(i,!0)}}static getBlob(...e){if(R_()){const t=e.map(i=>i instanceof Ei?i.data_:i);return new Ei(GV.apply(null,t))}else{const t=e.map(c=>ld(c)?nA(ar.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new Ei(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(r){let e;try{e=JSON.parse(r)}catch{return null}return LV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function JV(r,e){const t=e.split("/").filter(i=>i.length>0).join("/");return r.length===0?t:r+"/"+t}function aA(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(r,e){return e}class En{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||eM}}let rf=null;function tM(r){return!ld(r)||r.length<2?r:aA(r)}function ud(){if(rf)return rf;const r=[];r.push(new En("bucket")),r.push(new En("generation")),r.push(new En("metageneration")),r.push(new En("name","fullPath",!0));function e(l,c){return tM(c)}const t=new En("name");t.xform=e,r.push(t);function i(l,c){return c!==void 0?Number(c):c}const a=new En("size");return a.xform=i,r.push(a),r.push(new En("timeCreated")),r.push(new En("updated")),r.push(new En("md5Hash",null,!0)),r.push(new En("cacheControl",null,!0)),r.push(new En("contentDisposition",null,!0)),r.push(new En("contentEncoding",null,!0)),r.push(new En("contentLanguage",null,!0)),r.push(new En("contentType",null,!0)),r.push(new En("metadata","customMetadata",!0)),rf=r,rf}function nM(r,e){function t(){const i=r.bucket,a=r.fullPath,l=new fn(i,a);return e._makeStorageReference(l)}Object.defineProperty(r,"ref",{get:t})}function rM(r,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return nM(i,r),i}function oA(r,e,t){const i=I_(e);return i===null?null:rM(r,i,t)}function iM(r,e,t,i){const a=I_(e);if(a===null||!ld(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=r.bucket,T=r.fullPath,b="/b/"+c(y)+"/o/"+c(T),D=Ns(b,t,i),M=eA({alt:"media",token:p});return D+M})[0]}function x_(r,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=r[l.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="prefixes",DT="items";function sM(r,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[CT])for(const a of t[CT]){const l=a.replace(/\/$/,""),c=r._makeStorageReference(new fn(e,l));i.prefixes.push(c)}if(t[DT])for(const a of t[DT]){const l=r._makeStorageReference(new fn(e,a.name));i.items.push(l)}return i}function aM(r,e,t){const i=I_(t);return i===null?null:sM(r,e,i)}class Vi{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(r){if(!r)throw A_()}function cd(r,e){function t(i,a){const l=oA(r,a,e);return qr(l!==null),l}return t}function oM(r,e){function t(i,a){const l=aM(r,e,a);return qr(l!==null),l}return t}function lM(r,e){function t(i,a){const l=oA(r,a,e);return qr(l!==null),iM(l,a,r.host,r._protocol)}return t}function vl(r){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=SV():a=wV():t.getStatus()===402?a=bV(r.bucket):t.getStatus()===403?a=AV(r.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function hd(r){const e=vl(r);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=TV(r.path)),l.serverResponse=a.serverResponse,l}return t}function lA(r,e,t){const i=e.fullServerUrl(),a=Ns(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,d=new Vi(a,l,cd(r,t),c);return d.errorHandler=hd(e),d}function uM(r,e,t,i,a){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),i&&(l.pageToken=i),a&&(l.maxResults=a);const c=e.bucketOnlyServerUrl(),d=Ns(c,r.host,r._protocol),m="GET",p=r.maxOperationRetryTime,y=new Vi(d,m,oM(r,e.bucket),p);return y.urlParams=l,y.errorHandler=vl(e),y}function cM(r,e,t){const i=e.fullServerUrl(),a=Ns(i,r.host,r._protocol),l="GET",c=r.maxOperationRetryTime,d=new Vi(a,l,lM(r,t),c);return d.errorHandler=hd(e),d}function hM(r,e,t,i){const a=e.fullServerUrl(),l=Ns(a,r.host,r._protocol),c="PATCH",d=x_(t,i),m={"Content-Type":"application/json; charset=utf-8"},p=r.maxOperationRetryTime,y=new Vi(l,c,cd(r,i),p);return y.headers=m,y.body=d,y.errorHandler=hd(e),y}function fM(r,e){const t=e.fullServerUrl(),i=Ns(t,r.host,r._protocol),a="DELETE",l=r.maxOperationRetryTime;function c(m,p){}const d=new Vi(i,a,c,l);return d.successCodes=[200,204],d.errorHandler=hd(e),d}function dM(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function uA(r,e,t){const i=Object.assign({},t);return i.fullPath=r.path,i.size=e.size(),i.contentType||(i.contentType=dM(null,e)),i}function mM(r,e,t,i,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let ue=0;ue<2;ue++)K=K+Math.random().toString().slice(2);return K}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const p=uA(e,i,a),y=x_(p,t),T="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+p.contentType+`\r
\r
`,b=`\r
--`+m+"--",D=Ei.getBlob(T,i,b);if(D===null)throw WS();const M={name:p.fullPath},z=Ns(l,r.host,r._protocol),U="POST",Y=r.maxUploadRetryTime,J=new Vi(z,U,cd(r,t),Y);return J.urlParams=M,J.headers=c,J.body=D.uploadData(),J.errorHandler=vl(e),J}class Of{constructor(e,t,i,a){this.current=e,this.total=t,this.finalized=!!i,this.metadata=a||null}}function C_(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{qr(!1)}return qr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function gM(r,e,t,i,a){const l=e.bucketOnlyServerUrl(),c=uA(e,i,a),d={name:c.fullPath},m=Ns(l,r.host,r._protocol),p="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=x_(c,t),b=r.maxUploadRetryTime;function D(z){C_(z);let U;try{U=z.getResponseHeader("X-Goog-Upload-URL")}catch{qr(!1)}return qr(ld(U)),U}const M=new Vi(m,p,D,b);return M.urlParams=d,M.headers=y,M.body=T,M.errorHandler=vl(e),M}function pM(r,e,t,i){const a={"X-Goog-Upload-Command":"query"};function l(p){const y=C_(p,["active","final"]);let T=null;try{T=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qr(!1)}T||qr(!1);const b=Number(T);return qr(!isNaN(b)),new Of(b,i.size(),y==="final")}const c="POST",d=r.maxUploadRetryTime,m=new Vi(t,c,l,d);return m.headers=a,m.errorHandler=vl(e),m}const NT=256*1024;function _M(r,e,t,i,a,l,c,d){const m=new Of(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw CV();const p=m.total-m.current;let y=p;a>0&&(y=Math.min(y,a));const T=m.current,b=T+y;let D="";y===0?D="finalize":p===y?D="upload, finalize":D="upload";const M={"X-Goog-Upload-Command":D,"X-Goog-Upload-Offset":`${m.current}`},z=i.slice(T,b);if(z===null)throw WS();function U(ue,oe){const pe=C_(ue,["active","final"]),I=m.current+y,S=i.size();let R;return pe==="final"?R=cd(e,l)(ue,oe):R=null,new Of(I,S,pe==="final",R)}const Y="POST",J=e.maxUploadRetryTime,K=new Vi(t,Y,U,J);return K.headers=M,K.body=z.uploadData(),K.progressCallback=d||null,K.errorHandler=vl(r),K}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={STATE_CHANGED:"state_changed"},wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Dg(r){switch(r){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t,i){if(kV(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class EM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a){if(this.sent_)throw Ou("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ou("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ou("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ou("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ou("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TM extends EM{initXhr(){this.xhr_.responseType="text"}}function kr(){return new TM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=ud(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(ft.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(tA(a.status,[]))if(l)a=YS();else{this.sleepTime=Math.max(this.sleepTime*2,EV),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(ft.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=gM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,kr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const a=pM(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,kr,t,i);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=NT*this._chunkMultiplier,t=new Of(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=_M(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const d=this._ref.storage._makeRequest(c,kr,a,l,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){NT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=lA(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(i,kr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=mM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,kr,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=XS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Dg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,a){const l=new vM(t||void 0,i||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Dg(this._state)){case wn.SUCCESS:Uo(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const t=this._reject;Uo(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Dg(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Uo(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Uo(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Uo(e.error.bind(e,this._error))();break;default:e.error&&Uo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this._service=e,t instanceof fn?this._location=t:this._location=fn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Oa(e,t)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aA(this._location.path)}get storage(){return this._service}get parent(){const e=ZV(this._location.path);if(e===null)return null;const t=new fn(this._location.bucket,e);return new Oa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw JS(e)}}function bM(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new cA(r,new Ei(e),t)}function wM(r){const e={prefixes:[],items:[]};return hA(r,e).then(()=>e)}async function hA(r,e,t){const a=await fA(r,{pageToken:t});e.prefixes.push(...a.prefixes),e.items.push(...a.items),a.nextPageToken!=null&&await hA(r,e,a.nextPageToken)}function fA(r,e){e!=null&&typeof e.maxResults=="number"&&lp("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=uM(r.storage,r._location,"/",t.pageToken,t.maxResults);return r.storage.makeRequestWithTokens(i,kr)}function SM(r){r._throwIfRoot("getMetadata");const e=lA(r.storage,r._location,ud());return r.storage.makeRequestWithTokens(e,kr)}function AM(r,e){r._throwIfRoot("updateMetadata");const t=hM(r.storage,r._location,e,ud());return r.storage.makeRequestWithTokens(t,kr)}function RM(r){r._throwIfRoot("getDownloadURL");const e=cM(r.storage,r._location,ud());return r.storage.makeRequestWithTokens(e,kr).then(t=>{if(t===null)throw DV();return t})}function IM(r){r._throwIfRoot("deleteObject");const e=fM(r.storage,r._location);return r.storage.makeRequestWithTokens(e,kr)}function dA(r,e){const t=JV(r._location.path,e),i=new fn(r._location.bucket,t);return new Oa(r.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(r){return/^[A-Za-z]+:\/\//.test(r)}function CM(r,e){return new Oa(r,e)}function mA(r,e){if(r instanceof D_){const t=r;if(t._bucket==null)throw xV();const i=new Oa(t,t._bucket);return e!=null?mA(i,e):i}else return e!==void 0?dA(r,e):r}function DM(r,e){if(e&&xM(e)){if(r instanceof D_)return CM(r,e);throw Qo("To use ref(service, url), the first argument must be a Storage instance.")}else return mA(r,e)}function VT(r,e){const t=e==null?void 0:e[$S];return t==null?null:fn.makeFromBucketSpec(t,r)}function NM(r,e,t,i={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:a}=i;a&&(r._overrideAuthToken=typeof a=="string"?a:ab(a,r.app.options.projectId))}class D_{constructor(e,t,i,a,l){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yV,this._maxUploadRetryTime=vV,this._requests=new Set,a!=null?this._bucket=fn.makeFromBucketSpec(a,this._host):this._bucket=VT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=VT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oa(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new VV(ZS());{const c=jV(e,this._appId,i,a,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const MT="@firebase/storage",OT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="storage";function MM(r,e,t){return r=ot(r),bM(r,e,t)}function OM(r){return r=ot(r),SM(r)}function PM(r,e){return r=ot(r),AM(r,e)}function kM(r,e){return r=ot(r),fA(r,e)}function LM(r){return r=ot(r),wM(r)}function UM(r){return r=ot(r),RM(r)}function BM(r){return r=ot(r),IM(r)}function PT(r,e){return r=ot(r),DM(r,e)}function zM(r,e){return dA(r,e)}function qM(r,e,t,i={}){NM(r,e,t,i)}function FM(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new D_(t,i,a,e,Uf)}function jM(){Sa(new Ai(VM,FM,"PUBLIC").setMultipleInstances(!0)),pr(MT,OT,""),pr(MT,OT,"esm2017")}jM();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new sf(i,this,this._ref))},t)}on(e,t,i,a){let l;return t&&(typeof t=="function"?l=c=>t(new sf(c,this,this._ref)):l={next:t.next?c=>t.next(new sf(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,i||void 0,a||void 0)}}class LT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new wi(e,this._service))}get items(){return this._delegate.items.map(e=>new wi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=zM(this._delegate,e);return new wi(t,this.storage)}get root(){return new wi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new wi(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new kT(MM(this._delegate,e,t),this)}putString(e,t=ar.RAW,i){this._throwIfRoot("putString");const a=nA(t,e),l=Object.assign({},i);return l.contentType==null&&a.contentType!=null&&(l.contentType=a.contentType),new kT(new cA(this._delegate,new Ei(a.data,!0),l),this)}listAll(){return LM(this._delegate).then(e=>new LT(e,this.storage))}list(e){return kM(this._delegate,e||void 0).then(t=>new LT(t,this.storage))}getMetadata(){return OM(this._delegate)}updateMetadata(e){return PM(this._delegate,e)}getDownloadURL(){return UM(this._delegate)}delete(){return this._throwIfRoot("delete"),BM(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw JS(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UT(e))throw Qo("ref() expected a child path but got a URL, use refFromURL instead.");return new wi(PT(this._delegate,e),this)}refFromURL(e){if(!UT(e))throw Qo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fn.makeFromUrl(e,this._delegate.host)}catch{throw Qo("refFromUrl() expected a valid full URL but got an invalid one.")}return new wi(PT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){qM(this._delegate,e,t,i)}}function UT(r){return/^[A-Za-z]+:\/\//.test(r)}const HM="@firebase/storage-compat",GM="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM="storage-compat";function QM(r,{instanceIdentifier:e}){const t=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:e});return new gA(t,i)}function $M(r){const e={TaskState:wn,TaskEvent:yM,StringFormat:ar,Storage:gA,Reference:wi};r.INTERNAL.registerComponent(new Ai(KM,QM,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),r.registerVersion(HM,GM)}$M(ir);const YM={apiKey:"AIzaSyA8uHF4Q8aez18MXyJRKMBEz2hvNBdQlg8",authDomain:"movie-share-6a45e.firebaseapp.com",projectId:"movie-share-6a45e",storageBucket:"movie-share-6a45e.appspot.com",messagingSenderId:"602456951394",appId:"1:602456951394:web:e504f804f48670f668df3b",measurementId:"G-ESGMJTFE6L"},pA=ir.apps.length?ir.app():ir.initializeApp(YM),hn=pA.firestore();pA.storage();const XM=r=>{const e=new RTCPeerConnection(r);return e.onicecandidate=t=>{t.candidate&&console.log("ICE candidate:",t.candidate)},e.ontrack=t=>{console.log("Received remote stream:",t.streams[0])},e},WM=(r,e)=>{e.getTracks().forEach(t=>{r.addTrack(t,e)})},ZM=(r,e)=>{if(!r||!e)return;const t=r.getSenders?r.getSenders():[];e.getAudioTracks().forEach(i=>{t.some(l=>l.track&&l.track.id===i.id)||r.addTrack(i,e)})},JM=async r=>{const e=await r.createOffer();return await r.setLocalDescription(e),e},eO=async(r,e)=>{await r.setRemoteDescription(e);const t=await r.createAnswer();return await r.setLocalDescription(t),t},tO=async(r,e)=>{await r.setRemoteDescription(e)},Ng=async(r,e)=>{await r.addIceCandidate(e)},nO={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},N_={meetingId:null,userName:null,userId:null,isHost:!1,localStream:null,participants:[],waitingParticipants:[],mediaPermissionError:null,isMicMuted:!1,isCameraOff:!1,chatMessages:[],unreadChatMessages:!1,preShareMicMuted:null,preShareCameraOff:null,peerConnections:{},isScreenSharing:!1,screenShareStream:null,sharedMedia:null,currentSharerId:null},rO=(r,e)=>{var t,i;switch(e.type){case"CREATE_MEETING":case"REQUEST_JOIN_MEETING":{const{userName:a,userId:l,meetingId:c}=e.payload;return{...r,userName:a,userId:l,meetingId:c,isHost:e.type==="CREATE_MEETING"}}case"SET_LOCAL_STREAM":{const{stream:a,micMuted:l,cameraOff:c}=e.payload;return{...r,localStream:a,isMicMuted:l,isCameraOff:c,participants:r.participants.map(d=>d.id===r.userId?{...d,stream:a,isMicMuted:l,isCameraOff:c}:d),mediaPermissionError:null}}case"SET_MEDIA_ERROR":return{...r,mediaPermissionError:e.payload};case"UPDATE_LOCAL_USER_MEDIA_STATE":{const{isMicMuted:a,isCameraOff:l}=e.payload;return r.localStream&&(r.localStream.getAudioTracks().forEach(c=>c.enabled=!a),r.localStream.getVideoTracks().forEach(c=>c.enabled=!l)),{...r,isMicMuted:a,isCameraOff:l,participants:r.participants.map(c=>c.id===r.userId?{...c,isMicMuted:a,isCameraOff:l}:c)}}case"SET_PARTICIPANTS":return{...r,participants:e.payload};case"UPDATE_PARTICIPANT_STREAM":{const{participantId:a,stream:l}=e.payload;return{...r,participants:r.participants.map(c=>c.id===a?{...c,stream:l}:c)}}case"SET_WAITING_PARTICIPANTS":return{...r,waitingParticipants:e.payload};case"ADD_WAITING_PARTICIPANT":return r.waitingParticipants.some(a=>a.id===e.payload.id)?r:{...r,waitingParticipants:[...r.waitingParticipants,e.payload]};case"REMOVE_WAITING_PARTICIPANT":return{...r,waitingParticipants:r.waitingParticipants.filter(a=>a.id!==e.payload)};case"SET_SCREEN_SHARE_STATE":{const{isScreenSharing:a,stream:l}=e.payload;return{...r,isScreenSharing:a,screenShareStream:l||null}}case"SET_SHARED_MEDIA":return{...r,sharedMedia:e.payload||null};case"SET_CURRENT_SHARER_ID":return{...r,currentSharerId:e.payload||null};case"SET_CHAT_MESSAGES":return{...r,chatMessages:e.payload,unreadChatMessages:r.chatMessages.length<e.payload.length};case"ADD_CHAT_MESSAGE":case"SEND_CHAT_MESSAGE":return{...r,chatMessages:[...r.chatMessages,e.payload],unreadChatMessages:!0};case"CLEAR_UNREAD_CHAT_MESSAGES":return{...r,unreadChatMessages:!1};case"ADD_PEER_CONNECTION":{const{participantId:a,peerConnection:l}=e.payload;return{...r,peerConnections:{...r.peerConnections,[a]:l}}}case"REMOVE_PEER_CONNECTION":{const{[e.payload]:a,...l}=r.peerConnections;return{...r,peerConnections:l}}case"LEAVE_MEETING":return(t=r.localStream)==null||t.getTracks().forEach(a=>a.stop()),(i=r.screenShareStream)==null||i.getTracks().forEach(a=>a.stop()),Object.values(r.peerConnections||{}).forEach(a=>{try{a==null||a.close()}catch(l){console.error("Error closing peer connection on leave",l)}}),{...N_,mediaPermissionError:"You have left the meeting."};default:return r}},El=q.createContext({state:N_,dispatch:()=>null,setupLocalMediaStream:async()=>null,stopLocalMediaStream:()=>{},createMeeting:async()=>null,joinMeeting:async()=>!1,admitParticipant:async()=>{},denyParticipant:async()=>{},startScreenShare:async()=>!1,stopScreenShare:()=>{},shareMediaFile:async()=>!1,shareVideoStream:async()=>{},stopMediaShare:()=>{},sendChatMessage:async()=>{}}),iO=({children:r})=>{const[e,t]=q.useReducer(rO,N_),i=q.useRef({}),a=q.useRef({}),l=q.useRef({}),c=q.useCallback(async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("Media devices not supported. Please ensure you are using HTTPS or localhost."),t({type:"SET_LOCAL_STREAM",payload:{stream:null,micMuted:!0,cameraOff:!0}}),null;try{const I=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!0});return t({type:"SET_LOCAL_STREAM",payload:{stream:I,micMuted:!1,cameraOff:!1}}),I}catch(I){console.error("Error accessing media devices.",I);let S="Failed to access camera/microphone.";return I.name==="NotAllowedError"?S="Permission denied. Please allow camera and microphone access.":I.name==="NotFoundError"&&(S="No camera or microphone found."),t({type:"SET_MEDIA_ERROR",payload:S}),null}},[]),d=q.useCallback(()=>{var I;(I=e.localStream)==null||I.getTracks().forEach(S=>S.stop()),t({type:"SET_LOCAL_STREAM",payload:{stream:null,micMuted:!0,cameraOff:!0}})},[e.localStream]),m=q.useCallback((I,S)=>{const R=S||e.localStream;R&&(WM(I,R),ZM(I,R))},[e.localStream]),p=q.useCallback(I=>{I&&Object.values(e.peerConnections).forEach(S=>{S&&S.getSenders().forEach(R=>{R.track&&R.track.kind==="video"&&R.replaceTrack(I)})})},[e.peerConnections]),y=q.useCallback(()=>{var S,R;e.screenShareStream&&e.screenShareStream.getTracks().forEach(O=>O.stop()),Object.entries(l.current).forEach(([O,P])=>{const k=e.peerConnections[O];if(k&&P)try{k.removeTrack(P)}catch(C){console.error("Error removing screen share audio track",C)}}),l.current={};const I=(R=(S=e.localStream)==null?void 0:S.getVideoTracks())==null?void 0:R[0];I&&p(I),t({type:"SET_SCREEN_SHARE_STATE",payload:{isScreenSharing:!1,stream:null}})},[e.screenShareStream,e.localStream,e.peerConnections,p]),T=q.useCallback(async()=>{if(e.isScreenSharing)return!1;try{const I=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30},audio:!0}),S=I.getVideoTracks()[0];if(!S)return console.warn("No video track available from screen share"),!1;S.onended=()=>{y()},p(S);const R=I.getAudioTracks()[0];return R&&Object.entries(e.peerConnections).forEach(([O,P])=>{try{const k=P.addTrack(R,I);l.current[O]=k}catch(k){console.error("Error adding screen share audio track",k)}}),t({type:"SET_SCREEN_SHARE_STATE",payload:{isScreenSharing:!0,stream:I}}),!0}catch(I){return console.error("Error starting screen share",I),!1}},[e.isScreenSharing,e.peerConnections,p,y]),b=q.useCallback(async I=>{if(!e.meetingId)return!1;try{return t({type:"SET_SHARED_MEDIA",payload:{...I,stream:null}}),t({type:"SET_CURRENT_SHARER_ID",payload:I.sharerId||e.userId}),await hn.doc("meetings/"+e.meetingId).set({sharedMedia:{sharerId:e.userId,sharerName:e.userName,type:"video",name:I.name,isRemoteStream:!0}},{merge:!0}),!0}catch(S){return console.error("Error sharing media file:",S),!1}},[e.meetingId,e.userId,e.userName]),D=q.useCallback(async I=>{if(!I)return;t({type:"SET_SHARED_MEDIA",payload:{...e.sharedMedia,stream:I}});const S=I.getVideoTracks()[0],R=I.getAudioTracks()[0];Object.entries(e.peerConnections).forEach(([O,P])=>{try{if(S){const k=P.getSenders().find(C=>{var ze;return((ze=C.track)==null?void 0:ze.kind)==="video"});k?k.replaceTrack(S):P.addTrack(S,I)}if(R){const k=P.getSenders().find(C=>{var ze;return((ze=C.track)==null?void 0:ze.kind)==="audio"});k?k.replaceTrack(R):P.addTrack(R,I)}}catch(k){console.error("Error sharing tracks with peer:",O,k)}})},[e.sharedMedia,e.peerConnections]),M=q.useCallback(async I=>{if(!(!e.meetingId||!e.sharedMedia||e.sharedMedia.isLocal))try{await hn.doc("meetings/"+e.meetingId).set({sharedMedia:{...e.sharedMedia,playbackState:{...I,updatedAt:Date.now()}}},{merge:!0})}catch(S){console.error("Error updating media state:",S)}},[e.meetingId,e.sharedMedia]),z=q.useCallback(async()=>{var I,S,R,O;if(e.meetingId)try{(I=e.sharedMedia)!=null&&I.stream&&e.sharedMedia.stream.getTracks().forEach(ze=>ze.stop()),(S=e.sharedMedia)!=null&&S.isLocal&&e.sharedMedia.url&&(URL.revokeObjectURL(e.sharedMedia.url),document.querySelectorAll('video[style*="-9999px"]').forEach(xe=>xe.remove())),await hn.doc("meetings/"+e.meetingId).set({sharedMedia:null},{merge:!0}),t({type:"SET_SHARED_MEDIA",payload:null}),t({type:"SET_CURRENT_SHARER_ID",payload:null});const k=(R=e.localStream)==null?void 0:R.getVideoTracks()[0],C=(O=e.localStream)==null?void 0:O.getAudioTracks()[0];Object.values(e.peerConnections).forEach(ze=>{const xe=ze.getSenders(),X=xe.find(fe=>{var ve;return((ve=fe.track)==null?void 0:ve.kind)==="video"});X&&(k&&!e.isCameraOff?X.replaceTrack(k):X.replaceTrack(k||null));const re=xe.find(fe=>{var ve;return((ve=fe.track)==null?void 0:ve.kind)==="audio"});re&&re.replaceTrack(C||null)})}catch(P){console.error("Error stopping media share:",P)}},[e.meetingId,e.sharedMedia,e.peerConnections,e.localStream,e.isCameraOff]),U=q.useCallback(async(I,S)=>{const R=Math.random().toString(36).substring(2,10);try{return await hn.doc("meetings/"+R).set({createdAt:ir.firestore.FieldValue.serverTimestamp(),hostId:S}),await hn.doc("meetings/"+R+"/participants/"+S).set({name:I,id:S,isHost:!0}),t({type:"CREATE_MEETING",payload:{userName:I,userId:S,meetingId:R,stream:null}}),R}catch(O){return console.error("Error creating meeting: ",O),null}},[]),Y=q.useCallback(async(I,S,R)=>{try{return(await hn.doc("meetings/"+R).get()).exists?(await hn.collection("meetings/"+R+"/waitingRoom").doc(S).set({name:I,id:S,timestamp:ir.firestore.FieldValue.serverTimestamp()}),t({type:"REQUEST_JOIN_MEETING",payload:{userName:I,userId:S,meetingId:R}}),t({type:"ADD_WAITING_PARTICIPANT",payload:{name:I,id:S}}),!0):(console.error("No such meeting!"),!1)}catch(O){return console.error("Error joining meeting: ",O),!1}},[]),J=q.useCallback(async(I,S)=>{try{await hn.doc("meetings/"+I+"/participants/"+S.id).set({name:S.name,id:S.id,isHost:!1}),await hn.doc("meetings/"+I+"/waitingRoom/"+S.id).delete(),t({type:"REMOVE_WAITING_PARTICIPANT",payload:S.id})}catch(R){console.error("Error admitting participant: ",R)}},[]),K=q.useCallback(async(I,S)=>{try{await hn.doc("meetings/"+I+"/waitingRoom/"+S).delete(),t({type:"REMOVE_WAITING_PARTICIPANT",payload:S})}catch(R){console.error("Error denying participant: ",R)}},[]),ue=q.useCallback(async I=>{if(!(!e.meetingId||!e.userId))try{await hn.collection("meetings/"+e.meetingId+"/chat").add({senderId:e.userId,senderName:e.userName,text:I,timestamp:Date.now()})}catch(S){console.error("Error sending chat:",S)}},[e.meetingId,e.userId,e.userName]),oe=q.useCallback(I=>{const S=i.current[I];if(S!=null&&S.peerConnection)try{S.peerConnection.ontrack=null,S.peerConnection.onicecandidate=null,S.peerConnection.onconnectionstatechange=null,S.peerConnection.close()}catch(R){console.error("Error closing peer connection",R)}a.current[I]&&(a.current[I](),delete a.current[I]),delete i.current[I],l.current[I]&&delete l.current[I],t({type:"REMOVE_PEER_CONNECTION",payload:I}),t({type:"UPDATE_PARTICIPANT_STREAM",payload:{participantId:I,stream:null}})},[]),pe=q.useCallback(async I=>{if(!I||!e.meetingId||!e.userId)return;let S=e.localStream;if(S||(S=await c()),!!S&&!i.current[I])try{const R=XM(nO);if(m(R,S),e.isScreenSharing&&e.screenShareStream){const re=e.screenShareStream.getVideoTracks()[0];re&&R.getSenders().forEach(ve=>{ve.track&&ve.track.kind==="video"&&ve.replaceTrack(re)});const fe=e.screenShareStream.getAudioTracks()[0];if(fe)try{const ve=R.addTrack(fe,e.screenShareStream);l.current[I]=ve}catch(ve){console.error("Error adding screen share audio track for new participant",ve)}}R.ontrack=re=>{const fe=re.streams[0];t({type:"UPDATE_PARTICIPANT_STREAM",payload:{participantId:I,stream:fe}})},R.onconnectionstatechange=()=>{["closed","failed","disconnected"].includes(R.connectionState)&&oe(I)};const O=[e.userId,I].sort().join("_"),P=hn.collection(`meetings/${e.meetingId}/connections`).doc(O),k=P.collection("candidates"),C={peerConnection:R,connectionId:O,isInitiator:e.userId<I,offerHandled:!1,answerHandled:!1,remoteDescriptionSet:!1,queuedRemoteCandidates:[],candidateIds:new Set};if(i.current[I]=C,R.onicecandidate=re=>{re.candidate&&k.add({from:e.userId,candidate:re.candidate.toJSON(),createdAt:ir.firestore.FieldValue.serverTimestamp()}).catch(fe=>console.error("Error sending ICE candidate",fe))},t({type:"ADD_PEER_CONNECTION",payload:{participantId:I,peerConnection:R}}),(await P.get()).exists||await P.set({participants:[e.userId,I],createdAt:ir.firestore.FieldValue.serverTimestamp()}),C.isInitiator){const re=await JM(R);await P.set({participants:[e.userId,I],offer:{type:re.type,sdp:re.sdp},offerBy:e.userId,createdAt:ir.firestore.FieldValue.serverTimestamp()},{merge:!0})}const xe=P.onSnapshot(async re=>{const fe=re.data();if(fe){if(fe.offer&&fe.offerBy!==e.userId&&!C.offerHandled){C.offerHandled=!0;try{const ve=new RTCSessionDescription(fe.offer),V=await eO(R,ve);C.remoteDescriptionSet=!0,C.queuedRemoteCandidates.forEach(te=>{Ng(R,te).catch(ce=>console.error("Error adding queued ICE candidate",ce))}),C.queuedRemoteCandidates=[],await P.set({answer:{type:V.type,sdp:V.sdp},answerBy:e.userId,answeredAt:ir.firestore.FieldValue.serverTimestamp()},{merge:!0})}catch(ve){console.error("Error responding to offer",ve)}}if(fe.answer&&fe.answerBy!==e.userId&&!C.answerHandled){C.answerHandled=!0;try{const ve=new RTCSessionDescription(fe.answer);await tO(R,ve),C.remoteDescriptionSet=!0,C.queuedRemoteCandidates.forEach(V=>{Ng(R,V).catch(te=>console.error("Error adding queued ICE candidate",te))}),C.queuedRemoteCandidates=[]}catch(ve){console.error("Error applying answer",ve)}}}}),X=k.where("from","!=",e.userId).onSnapshot(re=>{re.docChanges().forEach(fe=>{if(fe.type==="added"){const ve=fe.doc.id;if(C.candidateIds.has(ve))return;C.candidateIds.add(ve);const V=fe.doc.data();if(!(V!=null&&V.candidate))return;const te=new RTCIceCandidate(V.candidate);if(!C.remoteDescriptionSet){C.queuedRemoteCandidates.push(te);return}Ng(R,te).catch(ce=>console.error("Error adding ICE candidate",ce))}})});a.current[I]=()=>{xe(),X()}}catch(R){console.error("Error creating peer connection:",R)}},[e.meetingId,e.userId,e.localStream,e.isScreenSharing,e.screenShareStream,m,oe,c]);return q.useEffect(()=>{if(!e.meetingId)return;const S=hn.collection("meetings/"+e.meetingId+"/participants").onSnapshot(xe=>{const X=xe.docs.map(re=>({...re.data(),id:re.id}));t({type:"SET_PARTICIPANTS",payload:X})}),O=hn.collection("meetings/"+e.meetingId+"/waitingRoom").onSnapshot(xe=>{const X=xe.docs.map(re=>({...re.data(),id:re.id}));t({type:"SET_WAITING_PARTICIPANTS",payload:X})}),k=hn.doc("meetings/"+e.meetingId).onSnapshot(xe=>{const X=xe.data(),re=(X==null?void 0:X.sharedMedia)||null;t({type:"SET_CURRENT_SHARER_ID",payload:(re==null?void 0:re.sharerId)||null}),(!re||re.sharerId!==e.userId)&&t({type:"SET_SHARED_MEDIA",payload:re})}),ze=hn.collection("meetings/"+e.meetingId+"/chat").orderBy("timestamp","asc").onSnapshot(xe=>{const X=xe.docs.map(re=>({...re.data(),id:re.id}));t({type:"SET_CHAT_MESSAGES",payload:X})});return()=>{S(),O(),k(),ze()}},[e.meetingId,e.isHost]),q.useEffect(()=>{if(!e.meetingId||!e.userId)return;const I=e.participants.some(R=>R.id===e.userId),S=e.waitingParticipants.some(R=>R.id===e.userId);I&&S&&t({type:"SET_WAITING_PARTICIPANTS",payload:e.waitingParticipants.filter(R=>R.id!==e.userId)})},[e.meetingId,e.userId,e.participants]),q.useEffect(()=>{!e.meetingId||!e.userId||!e.localStream||(e.participants.filter(I=>I.id!==e.userId).forEach(I=>{pe(I.id)}),Object.keys(i.current).forEach(I=>{e.participants.some(R=>R.id===I)||oe(I)}))},[e.participants,e.meetingId,e.userId,e.localStream,pe,oe]),q.useEffect(()=>()=>{y()},[y]),x.createElement(El.Provider,{value:{state:e,dispatch:t,setupLocalMediaStream:c,stopLocalMediaStream:d,createMeeting:U,joinMeeting:Y,admitParticipant:J,denyParticipant:K,startScreenShare:T,stopScreenShare:y,shareMediaFile:b,shareVideoStream:D,stopMediaShare:z,sendChatMessage:ue,updateMediaState:M}},r)},sO=()=>{const{createMeeting:r,joinMeeting:e,state:t,dispatch:i}=q.useContext(El),[a,l]=q.useState(""),[c,d]=q.useState(""),[m,p]=q.useState(null),[y,T]=q.useState(!1),[b,D]=q.useState("host"),M=hc();q.useEffect(()=>{t.mediaPermissionError==="You have left the meeting."&&i({type:"SET_MEDIA_PERMISSION_ERROR",payload:null})},[i,t.mediaPermissionError]);const z=async()=>{if(!a.trim()){p("Please enter your name");return}T(!0),p(null);const J=Math.random().toString(36).substring(2,15),K=await r(a,J);T(!1),K?M(`/meeting/${K}`):p("Failed to create meeting. Please try again.")},U=async()=>{if(!a.trim()){p("Please enter your name");return}if(!c.trim()){p("Please enter a meeting ID");return}T(!0),p(null);const J=Math.random().toString(36).substring(2,15),K=await e(a,J,c.trim());T(!1),K?M(`/waiting-room/${c.trim()}`):p("Failed to join meeting. Please check the meeting ID and try again.")},Y=J=>{J.preventDefault(),b==="host"?z():U()};return x.createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white"},x.createElement("div",{className:"container mx-auto px-4 py-8"},x.createElement("header",{className:"text-center mb-12"},x.createElement("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent"},"VisionMeet"),x.createElement("p",{className:"text-xl text-gray-300"},"Connect with crystal-clear video and audio")),x.createElement("div",{className:"flex flex-col lg:flex-row gap-8 items-center justify-center"},x.createElement("div",{className:"lg:w-1/2 w-full"},x.createElement("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl border border-gray-700/50"},x.createElement("div",{className:"flex mb-6 bg-gray-700/50 rounded-lg p-1"},x.createElement("button",{onClick:()=>D("host"),className:`flex-1 py-2 px-4 rounded-md transition-all duration-200 ${b==="host"?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:text-white"}`},"Host Meeting"),x.createElement("button",{onClick:()=>D("join"),className:`flex-1 py-2 px-4 rounded-md transition-all duration-200 ${b==="join"?"bg-blue-600 text-white shadow-lg":"text-gray-300 hover:text-white"}`},"Join Meeting")),x.createElement("form",{onSubmit:Y,className:"space-y-4"},x.createElement("div",null,x.createElement("label",{htmlFor:"userName",className:"block text-sm font-medium text-gray-300 mb-2"},"Your Name"),x.createElement("input",{type:"text",id:"userName",value:a,onChange:J=>l(J.target.value),className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Enter your name",required:!0})),b==="join"&&x.createElement("div",null,x.createElement("label",{htmlFor:"meetingId",className:"block text-sm font-medium text-gray-300 mb-2"},"Meeting ID"),x.createElement("input",{type:"text",id:"meetingId",value:c,onChange:J=>d(J.target.value),className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600/50 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Enter meeting ID",required:!0})),m&&x.createElement("div",{className:"bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-3 rounded-lg"},m),x.createElement("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl disabled:cursor-not-allowed flex items-center justify-center"},y?x.createElement(x.Fragment,null,x.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},x.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Processing..."):x.createElement(x.Fragment,null,b==="host"?x.createElement(x.Fragment,null,x.createElement("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),"New Meeting"):x.createElement(x.Fragment,null,x.createElement("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})),"Join Meeting")))),x.createElement("div",{className:"grid grid-cols-2 gap-4 mt-8"},x.createElement("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700/50"},x.createElement("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center mb-3"},x.createElement("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),x.createElement("h3",{className:"font-medium text-white"},"HD Video"),x.createElement("p",{className:"text-sm text-gray-400 mt-1"},"Crystal clear video quality")),x.createElement("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700/50"},x.createElement("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center mb-3"},x.createElement("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"}))),x.createElement("h3",{className:"font-medium text-white"},"Clear Audio"),x.createElement("p",{className:"text-sm text-gray-400 mt-1"},"Noise cancellation")),x.createElement("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700/50"},x.createElement("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center mb-3"},x.createElement("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}))),x.createElement("h3",{className:"font-medium text-white"},"Secure"),x.createElement("p",{className:"text-sm text-gray-400 mt-1"},"End-to-end encrypted")),x.createElement("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700/50"},x.createElement("div",{className:"w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center mb-3"},x.createElement("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}))),x.createElement("h3",{className:"font-medium text-white"},"Scheduling"),x.createElement("p",{className:"text-sm text-gray-400 mt-1"},"Plan meetings ahead")))),x.createElement("div",{className:"lg:w-1/2 relative hidden lg:block"},x.createElement("div",{className:"relative bg-gray-800/50 rounded-2xl overflow-hidden border border-gray-700/50 aspect-video"},x.createElement("div",{className:"absolute inset-0 flex items-center justify-center"},x.createElement("div",{className:"text-center p-8"},x.createElement("div",{className:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},x.createElement("svg",{className:"w-10 h-10 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),x.createElement("h3",{className:"text-xl font-semibold text-white"},"Ready to connect?"),x.createElement("p",{className:"text-gray-400 mt-2"},"Start or join a meeting to begin"))),x.createElement("div",{className:"absolute top-4 right-4 w-3 h-3 bg-green-400 rounded-full animate-pulse"}),x.createElement("div",{className:"absolute bottom-4 left-4 text-xs text-gray-400"},"visionmeet.app")),x.createElement("div",{className:"flex -space-x-3 mt-8 justify-center"},[1,2,3,4].map(J=>x.createElement("div",{key:J,className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center text-white font-medium text-sm border-2 border-gray-800"},"U",J)),x.createElement("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center text-gray-400 font-medium text-sm border-2 border-gray-800"},"+12")),x.createElement("p",{className:"text-center text-gray-400 mt-4 text-sm"},"Join thousands of users connecting daily")))),x.createElement("footer",{className:"mt-16 text-center text-gray-500 text-sm"},x.createElement("p",null," ",new Date().getFullYear()," VisionMeet. All rights reserved."),x.createElement("div",{className:"flex justify-center space-x-6 mt-4"},x.createElement("a",{href:"#",className:"hover:text-white transition-colors"},"Privacy"),x.createElement("a",{href:"#",className:"hover:text-white transition-colors"},"Terms"),x.createElement("a",{href:"#",className:"hover:text-white transition-colors"},"Help")))))},aO=()=>{const{state:r,dispatch:e}=q.useContext(El),t=hc(),i=()=>{e({type:"LEAVE_MEETING"})};return q.useEffect(()=>{if(!r.meetingId||!r.userId)return;r.participants.some(l=>l.id===r.userId)&&t(`/meeting/${r.meetingId}`)},[r.meetingId,r.userId,r.participants,t]),x.createElement("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-4"},x.createElement("div",{className:"bg-gray-800 p-8 md:p-12 rounded-lg shadow-xl text-center w-full max-w-lg"},x.createElement("h1",{className:"text-3xl font-bold mb-6 text-blue-400"},"VisionMeet"),x.createElement("p",{className:"text-xl mb-2"},"Hello, ",x.createElement("span",{className:"font-semibold"},r.userName||"Guest"),"!"),x.createElement("p",{className:"text-lg mb-8 text-gray-300"},"You are trying to join meeting: ",x.createElement("span",{className:"font-medium text-gray-100"},r.meetingId||"...")),x.createElement("div",{className:"my-8"},x.createElement("svg",{className:"animate-spin h-12 w-12 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},x.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))),x.createElement("p",{className:"text-2xl font-semibold mb-3 text-gray-100"},"Waiting for Host Approval..."),x.createElement("p",{className:"text-gray-400 mb-8"},"The host has been notified. Please wait for them to let you in."),x.createElement("button",{onClick:i,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition duration-150 ease-in-out"},"Cancel Request")))},oO=({isMicMuted:r,isCameraOff:e,onToggleMic:t,onToggleCamera:i,onLeaveCall:a,onShareMovie:l,onStopMovieShare:c,isCurrentUserSharing:d,movieShareDisabled:m,isUploadingMovie:p})=>x.createElement("div",{className:"bg-gray-800 p-4 flex justify-center space-x-4"},x.createElement("button",{onClick:t,className:`p-3 rounded-full ${r?"bg-red-600":"bg-gray-700"} hover:opacity-90`,title:r?"Unmute":"Mute"},r?x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11l1 1m0 0l1 1m-1-1l-1 1m1-1l1-1m-9 8a7 7 0 01-7-7v-2m7 9h2m0 0h2m-2 0v-2m0 0h-2m2 0V9m0 0H9m2 0h2m0 0V7a3 3 0 00-3-3m3 3v2m-3 0h2m0 0V7a3 3 0 013-3m0 0h2m-2 0v2m0 0a3 3 0 013 3v2m0 0v2a3 3 0 01-3 3z"})):x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"}))),x.createElement("button",{onClick:i,className:`p-3 rounded-full ${e?"bg-red-600":"bg-gray-700"} hover:opacity-90`,title:e?"Turn on camera":"Turn off camera"},e?x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})):x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),d?x.createElement("button",{onClick:c,className:"p-3 rounded-full bg-red-600 hover:bg-red-700",title:"Stop sharing"},x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"}))):x.createElement("button",{onClick:l,disabled:m||p,className:`p-3 rounded-full ${m?"bg-gray-600":"bg-blue-600 hover:bg-blue-700"}`,title:m?"Someone else is sharing":"Share screen"},p?x.createElement("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},x.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})):x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}))),x.createElement("button",{onClick:a,className:"p-3 rounded-full bg-red-600 hover:bg-red-700",title:"Leave call"},x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transform rotate-135",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})))),lO=({isOpen:r,onClose:e,waitingParticipants:t,onApprove:i,onDeny:a})=>r?x.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[100] p-4",role:"dialog","aria-modal":"true","aria-labelledby":"approval-modal-title"},x.createElement("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col"},x.createElement("div",{className:"flex justify-between items-center mb-4"},x.createElement("h2",{id:"approval-modal-title",className:"text-xl font-semibold text-blue-300"},"Waiting Room"),x.createElement("button",{onClick:e,className:"text-gray-400 hover:text-white","aria-label":"Close waiting room modal"},x.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),t.length===0?x.createElement("p",{className:"text-gray-400 text-center py-4"},"No users are currently waiting for approval."):x.createElement("ul",{className:"space-y-3 overflow-y-auto flex-grow"},t.map(l=>x.createElement("li",{key:l.id,className:"flex items-center justify-between bg-gray-700 p-3 rounded-md"},x.createElement("span",{className:"text-gray-200"},l.name),x.createElement("div",{className:"space-x-2"},x.createElement("button",{onClick:()=>i(l),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-md transition-colors"},"Admit"),x.createElement("button",{onClick:()=>a(l.id),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded-md transition-colors"},"Deny"))))),x.createElement("p",{className:"text-xs text-gray-500 mt-4"},"Waiting participants are synced with the meeting database."))):null,uO=({waitingParticipants:r,onApprove:e,onDeny:t})=>x.createElement("div",{className:"host-approval"},x.createElement("h2",null,"Waiting Room"),r.length===0?x.createElement("p",null,"No participants waiting"):x.createElement("ul",null,r.map(i=>x.createElement("li",{key:i.id,className:"participant-item"},x.createElement("span",null,i.name),x.createElement("button",{onClick:()=>e(i)},"Approve"),x.createElement("button",{onClick:()=>t(i.id)},"Deny"))))),cO=({className:r})=>x.createElement("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},x.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),x.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})),hO=({className:r})=>x.createElement("svg",{className:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},x.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),x.createElement("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),x.createElement("path",{d:"M6 9h12v2H6zm0 3h8v2H6z"})),fO=({onClose:r})=>{const{state:e,sendChatMessage:t}=q.useContext(El),[i,a]=q.useState(""),l=q.useRef(null),c=()=>{var m;(m=l.current)==null||m.scrollIntoView({behavior:"smooth"})};q.useEffect(c,[e.chatMessages]);const d=m=>{m.preventDefault(),!(!i.trim()||!e.userId||!e.userName)&&(t(i.trim()),a(""))};return x.createElement("div",{className:"fixed right-4 md:right-6 bottom-[120px] md:bottom-[148px] w-80 md:w-96 h-[60vh] md:h-[calc(100vh_-_200px)] max-h-[500px] md:max-h-[600px] bg-gray-800 border border-gray-700 rounded-lg shadow-xl flex flex-col z-[70]","aria-live":"polite",role:"log"},x.createElement("div",{className:"flex justify-between items-center p-3 border-b border-gray-700"},x.createElement("h3",{className:"text-lg font-semibold text-blue-300"},"Meeting Chat"),x.createElement("button",{onClick:r,className:"text-gray-400 hover:text-white","aria-label":"Close chat window"},x.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),x.createElement("div",{className:"flex-grow p-3 overflow-y-auto space-y-3"},e.chatMessages.length===0&&x.createElement("p",{className:"text-gray-400 text-sm text-center py-4"},"No messages yet. Start the conversation!"),e.chatMessages.map(m=>x.createElement("div",{key:m.id,className:`flex flex-col ${m.senderId===e.userId?"items-end":"items-start"}`},x.createElement("div",{className:`max-w-[75%] p-2 rounded-lg shadow ${m.senderId===e.userId?"bg-blue-600 text-white":"bg-gray-700 text-gray-200"}`},x.createElement("div",{className:"text-xs font-semibold mb-0.5 opacity-80"},m.senderId===e.userId?"You":m.senderName),x.createElement("p",{className:"text-sm break-words"},m.text),x.createElement("div",{className:"text-xs opacity-60 mt-1 text-right"},new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))))),x.createElement("div",{ref:l})),x.createElement("form",{onSubmit:d,className:"p-3 border-t border-gray-700"},x.createElement("div",{className:"flex items-center space-x-2"},x.createElement("input",{type:"text",value:i,onChange:m=>a(m.target.value),placeholder:"Type a message...",className:"flex-grow px-3 py-2 bg-gray-700 border border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-100","aria-label":"Chat message input"}),x.createElement("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-md text-sm transition-colors disabled:opacity-50",disabled:!i.trim(),"aria-label":"Send chat message"},"Send"))))},dO=()=>{const{state:r,dispatch:e,setupLocalMediaStream:t,admitParticipant:i,denyParticipant:a,shareMediaFile:l,shareVideoStream:c,stopMediaShare:d,updateMediaState:m}=q.useContext(El),{meetingId:p,userId:y,userName:T,participants:b,mediaPermissionError:D,isMicMuted:M,isCameraOff:z,isHost:U,waitingParticipants:Y,unreadChatMessages:J,sharedMedia:K,currentSharerId:ue,localStream:oe}=r,[pe,I]=q.useState(!1),[S,R]=q.useState(!1),[O,P]=q.useState(!1),[k,C]=q.useState(!1),[ze,xe]=q.useState(null),[X,re]=q.useState(null),fe=q.useRef(null),ve=q.useRef(null),V=q.useRef(null),te=q.useRef(!1),ce=q.useMemo(()=>b.find(Ne=>Ne.isHost),[b]),le=(ce==null?void 0:ce.name)||"Host",be=(ce==null?void 0:ce.id)===y,Ie=q.useMemo(()=>!p||typeof window>"u"?"":`${window.location.origin.replace(/\/$/,"")}/#/join/${p}`,[p]);q.useEffect(()=>{t()},[t]),q.useEffect(()=>{ve.current&&oe&&ve.current.srcObject!==oe&&(ve.current.srcObject=oe)},[oe]),q.useEffect(()=>{if(!(K!=null&&K.playbackState)||!V.current)return;const{isPlaying:Ne,currentTime:Pe,updatedAt:Ye}=K.playbackState,gn=V.current;if(Date.now()-Ye>5e3)return;const Gn=Math.abs(gn.currentTime-Pe);te.current=!0,Gn>2&&(gn.currentTime=Pe),Ne&&gn.paused?gn.play().catch($r=>console.log("Autoplay blocked:",$r)):!Ne&&!gn.paused&&gn.pause(),setTimeout(()=>{te.current=!1},500)},[K==null?void 0:K.playbackState]);const Ae=()=>{var Ne;te.current||(K==null?void 0:K.sharerId)===y&&m({isPlaying:!0,currentTime:(Ne=V.current)==null?void 0:Ne.currentTime})},Mt=()=>{var Ne;te.current||(K==null?void 0:K.sharerId)===y&&m({isPlaying:!1,currentTime:(Ne=V.current)==null?void 0:Ne.currentTime})},tt=()=>{var Ne,Pe;te.current||(K==null?void 0:K.sharerId)===y&&m({isPlaying:!((Ne=V.current)!=null&&Ne.paused),currentTime:(Pe=V.current)==null?void 0:Pe.currentTime})},Hn=()=>{e({type:"UPDATE_LOCAL_USER_MEDIA_STATE",payload:{isMicMuted:!M,isCameraOff:z}})},vr=()=>{e({type:"UPDATE_LOCAL_USER_MEDIA_STATE",payload:{isMicMuted:M,isCameraOff:!z}})},ur=()=>{K&&ue===y&&d(),e({type:"LEAVE_MEETING"})},Gr=()=>{V.current&&(V.current.requestFullscreen?V.current.requestFullscreen():V.current.webkitRequestFullscreen?V.current.webkitRequestFullscreen():V.current.msRequestFullscreen&&V.current.msRequestFullscreen())},Kr=()=>{if(!Ie)return;(async()=>{var Pe;try{if((Pe=navigator.clipboard)!=null&&Pe.writeText)return await navigator.clipboard.writeText(Ie),!0}catch(Ye){console.warn("navigator.clipboard unavailable, falling back",Ye)}try{const Ye=document.createElement("textarea");Ye.value=Ie,Ye.style.position="fixed",Ye.style.left="-9999px",document.body.appendChild(Ye),Ye.focus(),Ye.select();const gn=document.execCommand("copy");return document.body.removeChild(Ye),gn}catch(Ye){return console.error("Failed to copy meeting link",Ye),!1}})().then(Pe=>{Pe?(R(!0),setTimeout(()=>R(!1),2e3)):alert("Unable to copy the join link automatically. Please copy it manually from the banner.")})},Qr=()=>{var Ne;if(!(ue&&ue!==y)){if(xe(null),!p){xe("You need to be in a meeting to share a movie.");return}(Ne=fe.current)==null||Ne.click()}},Vs=Ne=>{var gn;const Pe=Ne.target,Ye=(gn=Pe.files)==null?void 0:gn[0];if(Ye){if(!Ye.type.startsWith("video/")){xe("Please select a video file."),Pe.value=null;return}if(!p){xe("You need to be in a meeting to share a movie."),Pe.value=null;return}xe(null);try{const Gn=URL.createObjectURL(Ye),$r={id:Date.now().toString(),url:Gn,type:"video",name:Ye.name,size:Ye.size,mimeType:Ye.type,sharerId:y,sharerName:T||"Unknown",sharedAt:Date.now(),isLocal:!0};l($r),Pe.value=null}catch(Gn){console.error("Error preparing video for sharing",Gn),xe("Unable to prepare the video for sharing."),Pe.value=null}}},qa=()=>{P(!O),J&&e({type:"CLEAR_UNREAD_CHAT_MESSAGES"})};b.length;const mn=Ne=>{i(p,Ne)},Fa=Ne=>{a(p,Ne)};return x.createElement("div",{className:"flex flex-col h-screen bg-gray-900 text-white"},D&&x.createElement("div",{className:"p-3 bg-red-600 text-center"},D),p&&x.createElement("div",{className:"fixed top-0 left-0 right-0 z-20 bg-gray-900 bg-opacity-95 backdrop-blur-sm border-b border-gray-800 px-3 sm:px-6 py-3"},x.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-xs sm:text-sm"},x.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 text-gray-300"},x.createElement("div",{className:"flex items-center gap-1.5"},x.createElement("span",{className:"uppercase tracking-wide text-[11px] text-gray-400"},"Host"),x.createElement("span",{className:"font-semibold text-white"},le),be&&x.createElement("span",{className:"ml-2 text-[10px] font-semibold px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-200"},"You")),p&&x.createElement("div",{className:"flex flex-wrap items-center gap-1"},x.createElement("span",{className:"text-gray-500 hidden sm:inline"},""),x.createElement("span",{className:"uppercase tracking-wide text-[11px] text-gray-400 sm:text-[12px]"},"Meeting ID"),x.createElement("code",{className:"bg-gray-800 rounded px-2 py-0.5 text-white text-xs"},p))),x.createElement("div",{className:"flex flex-wrap items-center gap-2"},x.createElement("button",{onClick:Kr,className:"px-3 py-1.5 rounded-lg bg-blue-600 hover:bg-blue-500 text-white text-xs sm:text-sm transition-colors"},S?"Link Copied":"Copy Join Link"),be&&x.createElement("button",{onClick:()=>I(!0),className:"relative flex items-center gap-2 px-3 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 transition-colors text-white text-xs sm:text-sm"},x.createElement(cO,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Manage Lobby",Y.length>0&&x.createElement("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-semibold"},Y.length)))),Ie&&x.createElement("p",{className:"mt-2 text-[11px] sm:text-xs text-gray-400 break-all"},"Share link:"," ",x.createElement("a",{href:Ie,target:"_blank",rel:"noreferrer",className:"text-blue-300 underline break-all"},Ie))),x.createElement("main",{className:"flex-grow px-3 sm:px-5 pt-28 sm:pt-32 pb-40 sm:pb-36 flex flex-col gap-4"},x.createElement("section",{className:"w-full flex-1 rounded-2xl overflow-hidden bg-black border border-gray-700 flex items-center justify-center p-2 sm:p-4 min-h-[320px]"},K?x.createElement("div",{className:"w-full h-full flex flex-col gap-3 sm:gap-4"},x.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between text-xs sm:text-sm text-gray-300 gap-1"},x.createElement("span",null,"Now Playing:"," ",x.createElement("span",{className:"font-semibold text-white break-all"},K.name)),x.createElement("span",{className:"text-gray-400"},"Shared by: ",K.sharerId===y?"You":K.sharerName||"Guest")),x.createElement("div",{className:"relative w-full h-full flex-1 min-h-0 bg-black rounded-xl overflow-hidden group"},x.createElement("video",{ref:Ne=>{if(V.current=Ne,Ne)if(K.sharerId===y){if(Ne.src!==K.url&&(Ne.src=K.url),!K.stream&&Ne.readyState>=1)try{const Pe=Ne.captureStream();c(Pe)}catch(Pe){console.error("Error capturing stream from video",Pe)}}else{const Pe=b.find(Ye=>Ye.id===K.sharerId);Pe!=null&&Pe.stream&&Ne.srcObject!==Pe.stream&&(Ne.srcObject=Pe.stream)}},key:K.id,controls:K.sharerId===y,onPlay:Ae,onPause:Mt,onSeeked:tt,onLoadedMetadata:Ne=>{if(K.sharerId===y&&!K.stream)try{const Pe=Ne.target.captureStream();c(Pe)}catch(Pe){console.error("Error capturing stream on loadedmetadata",Pe)}},autoPlay:!0,playsInline:!0,className:"w-full h-full object-contain"},"Your browser does not support the video tag."),x.createElement("button",{onClick:Gr,className:"absolute bottom-4 right-4 p-2.5 bg-black/60 hover:bg-black/80 text-white rounded-full backdrop-blur-sm transition-all transform active:scale-95 z-10",title:"Full Screen"},x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},x.createElement("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}))))):x.createElement("div",{className:"text-center text-gray-300 space-y-6 w-full"},x.createElement("div",{className:"flex flex-col items-center space-y-4"},x.createElement("div",{className:"w-20 h-20 sm:w-28 sm:h-28 rounded-full bg-gray-800 flex items-center justify-center border border-gray-700"},x.createElement("span",{className:"text-3xl sm:text-4xl font-bold text-gray-500"},(T||"Guest").substring(0,1).toUpperCase())),x.createElement("div",{className:"px-4"},x.createElement("p",{className:"text-xl sm:text-2xl font-semibold text-white"},"No movie is being shared yet"),x.createElement("p",{className:"text-gray-400 text-sm sm:text-base"},"Tap Share Movie to pick a video and stream it to everyone."))),oe&&x.createElement("div",{className:"max-w-xl w-full mx-auto px-2"},x.createElement("video",{ref:ve,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full rounded-xl border border-gray-700 opacity-60"})))),(ze||k)&&x.createElement("div",{className:"text-center text-sm space-y-2"},ze&&x.createElement("div",{className:"text-red-400 bg-red-900/30 border border-red-700 rounded-lg py-2 px-4"},ze),k&&x.createElement("div",{className:"text-blue-200 bg-blue-900/30 border border-blue-700 rounded-lg py-2 px-4"},"Uploading movie... ",X??0,"%"))),x.createElement("input",{ref:fe,type:"file",accept:"video/*",onChange:Vs,className:"hidden"}),x.createElement(oO,{isMicMuted:M,isCameraOff:z,onToggleMic:Hn,onToggleCamera:vr,onLeaveCall:ur,onShareMovie:Qr,onStopMovieShare:()=>d(),isCurrentUserSharing:(K==null?void 0:K.sharerId)===y,movieShareDisabled:!!K&&K.sharerId!==y,isUploadingMovie:k}),x.createElement("button",{onClick:qa,className:"fixed bottom-24 sm:bottom-24 right-4 p-3 bg-blue-600 hover:bg-blue-700 rounded-full shadow-lg"},x.createElement(hO,{className:"w-6 h-6"}),J&&x.createElement("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-xs"},"!")),U&&x.createElement(lO,{isOpen:pe,onClose:()=>I(!1),waitingParticipants:Y,onApprove:mn,onDeny:Fa}),U&&x.createElement(uO,{waitingParticipants:Y,onApprove:mn,onDeny:Fa}),O&&x.createElement(fO,{onClose:()=>P(!1)}))},mO=()=>{const{joinMeeting:r}=q.useContext(El),[e,t]=q.useState(""),[i,a]=q.useState(null),[l,c]=q.useState(!1),d=hc(),{meetingId:m}=II(),p=async()=>{if(!e.trim()||!m){a("Please enter your name and ensure the meeting ID is valid.");return}c(!0),a(null);const y=Math.random().toString(36).substring(2,15),T=await r(e,y,m);c(!1),T?d(`/waiting-room/${m}`):a("Failed to join the meeting. Please check the ID and try again.")};return x.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white p-4 sm:p-6"},x.createElement("div",{className:"w-full max-w-md p-6 sm:p-8 space-y-6 bg-gray-800/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-700/50 transition-all duration-300 hover:shadow-blue-900/20"},x.createElement("div",{className:"text-center space-y-2"},x.createElement("h1",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-500"},"Join Meeting"),x.createElement("p",{className:"text-gray-400 text-sm"},"Enter your details to enter the lobby")),i&&x.createElement("div",{className:"p-4 bg-red-500/10 border border-red-500/50 text-red-200 rounded-xl text-sm text-center animate-pulse"},i),x.createElement("div",{className:"space-y-4"},x.createElement("div",{className:"space-y-2"},x.createElement("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 ml-1"},"Display Name"),x.createElement("input",{type:"text",id:"name",value:e,onChange:y=>t(y.target.value),placeholder:"e.g. John Doe",className:"w-full px-4 py-3 bg-gray-900/50 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-500 text-white"}))),x.createElement("button",{onClick:p,disabled:l,className:`w-full py-3.5 px-6 rounded-xl font-semibold text-white shadow-lg transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] ${l?"bg-blue-600/50 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 hover:shadow-blue-500/25"}`},l?x.createElement("span",{className:"flex items-center justify-center gap-2"},x.createElement("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},x.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Connecting..."):"Join Meeting")))},gO=()=>x.createElement(d1,null,x.createElement(iO,null,x.createElement("div",{className:"h-screen w-screen bg-gray-800 text-gray-100"},x.createElement(jI,null,x.createElement(Bo,{path:"/",element:x.createElement(sO,null)}),x.createElement(Bo,{path:"/waiting-room/:meetingId",element:x.createElement(aO,null)}),x.createElement(Bo,{path:"/meeting/:meetingId",element:x.createElement(dO,null)}),x.createElement(Bo,{path:"/join/:meetingId",element:x.createElement(mO,null)}),x.createElement(Bo,{path:"*",element:x.createElement(qI,{to:"/",replace:!0})}))))),_A=document.getElementById("root");if(!_A)throw new Error("Could not find root element to mount to");const pO=XR.createRoot(_A);pO.render(x.createElement(x.StrictMode,null,x.createElement(gO,null)));
